!function(t){function e(e){for(var o,n,r=e[0],s=e[1],a=0,c=[];a<r.length;a++)n=r[a],i[n]&&c.push(i[n][0]),i[n]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);for(u&&u(e);c.length;)c.shift()()}var o={},n={25:0},i={25:0};function r(t){return s.p+"js/"+({0:"vendors~modal",1:"modal",2:"vendors~fine-uploader",4:"vendors~user",5:"user",6:"login"}[t]||t)+".js?v="+{0:"f021f6d7454b",1:"16c2e0a0464b",2:"edd9534ceb89",4:"95cd1a570cec",5:"ddc224e04ba7",6:"108b1ef52adb",13:"79cf5a7d4997",15:"05e25692bbbc",16:"4c8b98b20194",17:"ea059a74d4fa",18:"5ba33248fef7",19:"785bcd24961e",20:"0a1a8bf30dde",21:"bb0d90fb8ffd"}[t]}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[];n[t]?e.push(n[t]):0!==n[t]&&{1:1,5:1}[t]&&e.push(n[t]=new Promise(function(e,o){for(var n="css/"+({0:"vendors~modal",1:"modal",2:"vendors~fine-uploader",4:"vendors~user",5:"user",6:"login"}[t]||t)+".css?v="+{0:"31d6cfe0d16a",1:"274521808be3",2:"31d6cfe0d16a",4:"31d6cfe0d16a",5:"541c14bd469d",6:"31d6cfe0d16a",13:"31d6cfe0d16a",15:"31d6cfe0d16a",16:"31d6cfe0d16a",17:"31d6cfe0d16a",18:"31d6cfe0d16a",19:"31d6cfe0d16a",20:"31d6cfe0d16a",21:"31d6cfe0d16a"}[t],i=s.p+n,r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var c=(u=r[a]).getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===n||c===i))return e()}var l=document.getElementsByTagName("style");for(a=0;a<l.length;a++){var u;if((c=(u=l[a]).getAttribute("data-href"))===n||c===i)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var n=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.request=n,o(r)},h.href=i,document.getElementsByTagName("head")[0].appendChild(h)}).then(function(){n[t]=0}));var o=i[t];if(0!==o)if(o)e.push(o[2]);else{var a=new Promise(function(e,n){o=i[t]=[e,n]});e.push(o[2]=a);var c=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,l.crossOrigin="anonymous",s.nc&&l.setAttribute("nonce",s.nc),l.src=r(t);var u=setTimeout(function(){h({type:"timeout",target:l})},12e4);function h(e){l.onerror=l.onload=null,clearTimeout(u);var o=i[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+n+": "+r+")");s.type=n,s.request=r,o[1](s)}i[t]=void 0}}l.onerror=l.onload=h,c.appendChild(l)}var p={5:[0,1],6:[0,1,2]}[t];return p&&Promise.all(e).then(function(){var t=document.getElementsByTagName("head")[0];p.forEach(function(e){if(void 0===i[e]){i[e]=null;var o=document.createElement("link");o.rel="prefetch",o.href=r(e),t.appendChild(o)}})}),Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/static/dist/",s.oe=function(t){throw console.error(t),t};var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;s(s.s=169)}([function(t,e,o){"use strict";o.d(e,"b",function(){return i}),o.d(e,"a",function(){return r}),o.d(e,"d",function(){return s}),o.d(e,"c",function(){return a});var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};function i(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var r=function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&(o[n[i]]=t[n[i]])}return o}function a(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}},,function(t,e,o){"use strict";var n=o(22),i=function(){function t(t,e){this.concurrency=t,this.timeout=e,this._pending=[],this._working=[]}return t.prototype.run=function(t){var e=this;return new Promise(function(o,n){var i={resolve:o,reject:n,jobFunc:t};e._working.length>=e.concurrency?e._pending.push(i):e.startWorking(i)})},t.prototype.startWorking=function(e){var o=this,n=e.resolve,i=e.reject,r=e.jobFunc,s=t.beginJob(r),a=s.timeout||this.timeout,c=function(){var t=o._working.indexOf(s);-1!==t&&o._working.splice(t,1),setTimeout(function(t){o._working.length<o.concurrency&&o._pending.length>0&&o.startWorking(o._pending.shift())})};this._working.push(s),a&&setTimeout(function(t){s.cancel&&s.cancel(),c(),i(new Error("worker-pool timeout"))},a),Promise.resolve(s.promise).then(function(t){c(),n(t)},function(t){c(),i(t)})},t.beginJob=function(t){return t()},t}();o.d(e,"k",function(){return a}),o.d(e,"t",function(){return c}),o.d(e,"s",function(){return l}),o.d(e,"c",function(){return u}),o.d(e,"n",function(){return h}),o.d(e,"d",function(){return p}),o.d(e,"i",function(){return d}),o.d(e,"j",function(){return f}),o.d(e,"q",function(){return m}),o.d(e,"b",function(){return v}),o.d(e,"a",function(){return b}),o.d(e,"m",function(){return y}),o.d(e,"g",function(){return _}),o.d(e,"f",function(){return w}),o.d(e,"r",function(){return k}),o.d(e,"u",function(){return C}),o.d(e,"v",function(){return L}),o.d(e,"x",function(){return E}),o.d(e,"o",function(){return x}),o.d(e,"l",function(){return T}),o.d(e,"e",function(){return O}),o.d(e,"p",function(){return P}),o.d(e,"w",function(){return S}),o.d(e,"h",function(){return j});var r=new i(3,2e4),s=new i(5,2e4);function a(t){if(a[t])return a[t];var e=-1===t.indexOf(".gif")?s:r;return a[t]=e.run(function(){return function(t){var e=new Image;return e.src=t,{promise:new Promise(function(t,o){e.onload=t.bind(null,e),e.onerror=o}).then(function(t){return t},function(e){return console.error("load fail",t,e),Promise.reject(t)}),cancel:function(){return e.complete||e.removeAttribute("src")}}}(t)})}function c(t){return function(e){return new Promise(function(o){setTimeout(function(){return o(e)},1e3*t)})}}function l(t){return String(t).match(/^[0-9.]+$/)?String(t)+"px":t}function u(t,e){var o={},n=e.length;for(var i in t)t.hasOwnProperty(i)&&0===i.indexOf(e)&&i.length>n&&(o[i.slice(n,n+1).toLowerCase()+i.slice(n+1)]=t[i]);return o}function h(t,e){var o={};for(var n in t)t.hasOwnProperty(n)&&(o[[e,n.slice(0,1).toUpperCase(),n.slice(1)].join("")]=t[n]);return o}function p(){return p.result||(navigator.userAgent.match(/Android/i)?p.result="Android":navigator.userAgent.match(/iPhone|iPad|iPod/i)?p.result="iOS":p.result="etc"),p.result}function d(){var t=navigator.userAgent,e=t.indexOf("Android")>-1&&t.indexOf("Mozilla/")>-1&&t.indexOf("AppleWebKit")>-1,o=/AppleWebKit\/([\d.]+)/.exec(t),n=null===o?null:parseFloat(o[1]);return e&&null!==n&&n>500}function f(t,e){((e=e||t.root)===document.body?window:e).addEventListener("scroll",Object(n.throttle)(20,function(e){return t.emit("scroll",e)}))}function m(t,e){var o=function(t,e){return Object.keys(e).forEach(function(o){var n=new RegExp("\\["+o+"\\]","g");t=t.replace(n,e[o])}),t}(t.innerHTML,e);return t.innerHTML=o,t}p.result="";var g="__awaitTransition";function v(t,e,o){return void 0===e&&(e=3e3),void 0===o&&(o=!1),new Promise(function(n,i){if(t){var r=function(e){o&&e.target!==t||(clearTimeout(r.timeout),t.removeEventListener("transitionend",r),delete t[g],n(t))};t[g]&&(clearTimeout(t[g].timeout),t.removeEventListener("transitionend",t[g])),t.addEventListener("transitionend",r),t[g]=r,e&&(r.timeout=setTimeout(r,e))}else n(t)})}function b(t,e,o){return void 0===e&&(e=3e3),void 0===o&&(o=!1),new Promise(function(n,i){if(t){var r=function(e){o&&e.target!==t||(clearTimeout(r.timeout),t.removeEventListener("animationend",r),delete t[g],n(t))};t[g]&&(clearTimeout(t[g].timeout),t.removeEventListener("animationend",t[g])),t.addEventListener("animationend",r),t[g]=r,e&&(r.timeout=setTimeout(r,e))}else n(t)})}function y(t){if(!t)return new Promise(function(t){y(t)});setTimeout(t.bind(),20)}function _(t){var e=document.createElement("div");return e.innerHTML=t,e}function w(t){return _(t).children[0]}function k(t,e){Object.keys(e).forEach(function(o){var n=o.replace(/-([a-z])/g,function(t){return t.slice(1).toUpperCase()});n in t.style||console.warn("illegal styte:"+n),t.style[n]=e[o]})}function C(t){t.classList.add("notransition")}function L(t){x(t),t.classList.remove("notransition")}function E(t,e){for(var o,n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=e?"add":"remove";(o=t.classList)[r].apply(o,n)}function x(t){t.offsetHeight}function T(t,e){return void 0===e&&(e=!1),!e&&T[t]?T[t]:T[t]=new Promise(function(e,o){var n=document.createElement("script");n.src=t,n.onload=function(){e()},n.onerror=function(){o(new Error("Failed to load script "+t))},document.head.appendChild(n)})}function O(t){t&&console.error(t)}function P(t){if(t){var e=t.split(/#/);if(e[0]!==location.href.split(/#/)[0])location.href=t;else if(e.length>1){var o=e.shift();history.replaceState(null,"",o+"#"+e.join("#")),setTimeout(function(t){return location.reload()})}else location.reload()}else location.reload()}function S(t){return t&&t.replace(/^https?:/,"")}function j(t,e){if(document.selection)t.focus(),document.selection.createRange().text=e;else if(t.selectionStart||0===t.selectionStart){var o=t.selectionStart,n=t.selectionEnd;t.value=t.value.substring(0,o)+e+t.value.substring(n,t.value.length),t.selectionStart=o+e.length,t.selectionEnd=o+e.length}else t.value+=e}},function(t,e,o){"use strict";o.d(e,"a",function(){return a}),o.d(e,"b",function(){return c});var n=o(0),i=o(19),r=o(2),s=o(15),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"app",{get:function(){return i.VComponent.get(document.body)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return i.VComponent.get(this.root.parentNode.closest("[data-vce]"))},enumerable:!0,configurable:!0}),e.prototype.emitNextTick=function(t,e){var o=this;Object(r.m)(function(n){return o.emit(t,e)})},Object.defineProperty(e.prototype,"state",{get:function(){return this.__state||(this.__state={})},enumerable:!0,configurable:!0}),e.prototype.updateState=function(t,e){var o=this;t&&(this.state[t]=e),this.__last_state||(this.__last_state={});var n=this.state,i=!1;Object.keys(n).forEach(function(t){o.__last_state[t]!==n[t]&&(o.emit("state:"+t+":update",n[t]),i=!0,o.stateRender&&o.stateRender[t]&&o.qsa('[data-vce-state~="'+t+'"]').forEach(function(e){"function"==typeof o.stateRender[t]?o.stateRender[t].call(o,e,n[t],t):Object.keys(o.stateRender[t]).forEach(function(i){e.matches(i)&&o.stateRender[t][i].call(o,e,n[t],t)})}))}),i&&this.emit("state:update",n),this.__last_state=Object.assign({},n)},e}(i.VComponent),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){var e=this;t.prototype.bindDomEvents.call(this),this.app.viewport.onResize(this,function(t){t.isPcView&&e.opened&&e.app.modal.close(!0)})},e.prototype.render=function(){var t=this;return this._parent=this.root.parentNode,this._next=this.root.nextSibling,this.opened=!0,Object(s.import_modal)().then(function(e){var o=e.Hammer;t.hammer&&t.hammer.destroy(),t.hammer=new o.Manager(t.content.root,{recognizers:[[o.Swipe,{direction:o.DIRECTION_LEFT}]]}),t.hammer.on("swipeleft",function(){return t.emit("close")})}),Promise.resolve(this.root)},e.prototype.destroy=function(){if(this.opened=!1,this._parent){this._parent.insertBefore(this.root,this._next);var t=this.content;t.root.style.width="auto",t.layout&&t.layout()}},Object.defineProperty(e.prototype,"content",{get:function(){return this.qsChild("[data-vce-name=sidebar_content]")},enumerable:!0,configurable:!0}),e}(a)},,function(t,e,o){"use strict";o.d(e,"g",function(){return s}),o.d(e,"f",function(){return a}),o.d(e,"j",function(){return c}),o.d(e,"d",function(){return l}),o.d(e,"m",function(){return u}),o.d(e,"l",function(){return h}),o.d(e,"k",function(){return p}),o.d(e,"i",function(){return d}),o.d(e,"c",function(){return f}),o.d(e,"a",function(){return m}),o.d(e,"b",function(){return g}),o.d(e,"h",function(){return v}),o.d(e,"e",function(){return b});var n=new URL("/api/",ServerData.hostUrl||location.origin),i="__response",r="__original";function s(t){return v("pick-locale",{locale:t})}function a(t,e){return v("join",{ndcId:t,inviteCode:e})}function c(t,e){return v("request_join",{ndcId:t,message:e})}function l(t,e,o){return void 0===o&&(o=!1),g((o?"g":ServerData.community.ndcId)+"/"+t+"/"+e+"/votes")}function u(t){return v("vote",t)}function h(t){return v("unvote",t)}function p(t){return v("submit_comment",{ndcId:t.ndcId,postType:t.postType,postId:t.postId,content:t.content,commentId:t.commentId})}function d(t){return v("remove_comment",{ndcId:t.ndcId,postType:t.postType,postId:t.postId,commentId:t.commentId})}function f(){return g(ServerData.community.ndcId+"/online-members")}function m(t){return y("GET",t).then(function(t){if(t.status>=200&&t.status<300)return t.text();var e=new Error(t.statusText);throw e.response=t,e})}function g(t,e){return y("GET",t,e).then(_)}function v(t,e){return y("POST",t,e).then(_)}function b(t,e,o){return void 0===o&&(o="GET"),y(o,t,e).then(function(t){return 200!==t.status?Promise.reject(t):t.text()})}function y(t,e,o){var i,r=e instanceof URL?e:new URL(e,n),s={"X-Requested-With":"xmlhttprequest"};if("GET"===t.toUpperCase())for(var a in o)r.searchParams.set(a,o[a]);else i=JSON.stringify(o),s["Content-Type"]="application/json";return fetch(r.href,{method:t,headers:s,body:i,credentials:"same-origin",redirect:"follow"})}function _(t){return Promise.all([t,t.json()]).then(function(t){var e=t[0],o=t[1];return 200===o.code&&o.result?Promise.resolve(new w(e,o)):Promise.reject({message:o.message||"bad response",response:o})})}var w=function(){function t(t,e){Object.assign(this,e.result),Array.isArray(e.result)&&(this.length=e.result.length),this[i]=t,this[r]=e.result}return Object.defineProperty(t.prototype,"httpResponse",{get:function(){return this[i]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalResult",{get:function(){return this[r]},enumerable:!0,configurable:!0}),t}()},,,function(t,e,o){t.exports=function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";var n=o(1),i=n.isInBrowser,r=o(2),s=new r(i?document.body:null);s.setStateFromDOM(null),s.listenToDOM(),i&&(window.scrollMonitor=s),t.exports=s},function(t,e){"use strict";e.VISIBILITYCHANGE="visibilityChange",e.ENTERVIEWPORT="enterViewport",e.FULLYENTERVIEWPORT="fullyEnterViewport",e.EXITVIEWPORT="exitViewport",e.PARTIALLYEXITVIEWPORT="partiallyExitViewport",e.LOCATIONCHANGE="locationChange",e.STATECHANGE="stateChange",e.eventTypes=[e.VISIBILITYCHANGE,e.ENTERVIEWPORT,e.FULLYENTERVIEWPORT,e.EXITVIEWPORT,e.PARTIALLYEXITVIEWPORT,e.LOCATIONCHANGE,e.STATECHANGE],e.isOnServer="undefined"==typeof window,e.isInBrowser=!e.isOnServer,e.defaultOffsets={top:0,bottom:0}},function(t,e,o){"use strict";function n(t){return a?0:t===document.body?window.innerHeight||document.documentElement.clientHeight:t.clientHeight}function i(t){return a?0:t===document.body?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight):t.scrollHeight}function r(t){return a?0:t===document.body?window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop}var s=o(1),a=s.isOnServer,c=s.isInBrowser,l=s.eventTypes,u=o(3),h=!1;if(c)try{var p=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("test",null,p)}catch(t){}var d=!!h&&{capture:!1,passive:!0},f=function(){function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var s,a,c,u=this;this.item=e,this.watchers=[],this.viewportTop=null,this.viewportBottom=null,this.documentHeight=i(e),this.viewportHeight=n(e),this.DOMListener=function(){t.prototype.DOMListener.apply(u,arguments)},this.eventTypes=l,o&&(this.containerWatcher=o.create(e)),this.update=function(){(function(){if(u.viewportTop=r(e),u.viewportBottom=u.viewportTop+u.viewportHeight,u.documentHeight=i(e),u.documentHeight!==s){for(a=u.watchers.length;a--;)u.watchers[a].recalculateLocation();s=u.documentHeight}})(),function(){for(c=u.watchers.length;c--;)u.watchers[c].update();for(c=u.watchers.length;c--;)u.watchers[c].triggerCallbacks()}()},this.recalculateLocations=function(){this.documentHeight=0,this.update()}}return t.prototype.listenToDOM=function(){c&&(window.addEventListener?(this.item===document.body?window.addEventListener("scroll",this.DOMListener,d):this.item.addEventListener("scroll",this.DOMListener,d),window.addEventListener("resize",this.DOMListener)):(this.item===document.body?window.attachEvent("onscroll",this.DOMListener):this.item.attachEvent("onscroll",this.DOMListener),window.attachEvent("onresize",this.DOMListener)),this.destroy=function(){window.addEventListener?(this.item===document.body?(window.removeEventListener("scroll",this.DOMListener,d),this.containerWatcher.destroy()):this.item.removeEventListener("scroll",this.DOMListener,d),window.removeEventListener("resize",this.DOMListener)):(this.item===document.body?(window.detachEvent("onscroll",this.DOMListener),this.containerWatcher.destroy()):this.item.detachEvent("onscroll",this.DOMListener),window.detachEvent("onresize",this.DOMListener))})},t.prototype.destroy=function(){},t.prototype.DOMListener=function(t){this.setStateFromDOM(t)},t.prototype.setStateFromDOM=function(t){var e=r(this.item),o=n(this.item),s=i(this.item);this.setState(e,o,s,t)},t.prototype.setState=function(t,e,o,n){var i=e!==this.viewportHeight||o!==this.contentHeight;if(this.latestEvent=n,this.viewportTop=t,this.viewportHeight=e,this.viewportBottom=t+e,this.contentHeight=o,i)for(var r=this.watchers.length;r--;)this.watchers[r].recalculateLocation();this.updateAndTriggerWatchers(n)},t.prototype.updateAndTriggerWatchers=function(t){for(var e=this.watchers.length;e--;)this.watchers[e].update();for(e=this.watchers.length;e--;)this.watchers[e].triggerCallbacks(t)},t.prototype.createCustomContainer=function(){return new t},t.prototype.createContainer=function(e){"string"==typeof e?e=document.querySelector(e):e&&e.length>0&&(e=e[0]);var o=new t(e,this);return o.setStateFromDOM(),o.listenToDOM(),o},t.prototype.create=function(t,e){"string"==typeof t?t=document.querySelector(t):t&&t.length>0&&(t=t[0]);var o=new u(this,t,e);return this.watchers.push(o),o},t.prototype.beget=function(t,e){return this.create(t,e)},t}();t.exports=f},function(t,e,o){"use strict";function n(t,e,o){function n(t,e){if(0!==t.length)for(v=t.length;v--;)(b=t[v]).callback.call(y,e,y),b.isOne&&t.splice(v,1)}var i,f,m,g,v,b,y=this;this.watchItem=e,this.container=t,this.offsets=o?o===+o?{top:o,bottom:o}:{top:o.top||d.top,bottom:o.bottom||d.bottom}:d,this.callbacks={};for(var _=0,w=p.length;_<w;_++)y.callbacks[p[_]]=[];this.locked=!1,this.triggerCallbacks=function(t){switch(this.isInViewport&&!i&&n(this.callbacks[s],t),this.isFullyInViewport&&!f&&n(this.callbacks[a],t),this.isAboveViewport!==m&&this.isBelowViewport!==g&&(n(this.callbacks[r],t),f||this.isFullyInViewport||(n(this.callbacks[a],t),n(this.callbacks[l],t)),i||this.isInViewport||(n(this.callbacks[s],t),n(this.callbacks[c],t))),!this.isFullyInViewport&&f&&n(this.callbacks[l],t),!this.isInViewport&&i&&n(this.callbacks[c],t),this.isInViewport!==i&&n(this.callbacks[r],t),!0){case i!==this.isInViewport:case f!==this.isFullyInViewport:case m!==this.isAboveViewport:case g!==this.isBelowViewport:n(this.callbacks[h],t)}i=this.isInViewport,f=this.isFullyInViewport,m=this.isAboveViewport,g=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var t=this.top,e=this.bottom;if(this.watchItem.nodeName){var o=this.watchItem.style.display;"none"===o&&(this.watchItem.style.display="");for(var i=0,r=this.container;r.containerWatcher;)i+=r.containerWatcher.top-r.containerWatcher.container.viewportTop,r=r.containerWatcher.container;var s=this.watchItem.getBoundingClientRect();this.top=s.top+this.container.viewportTop-i,this.bottom=s.bottom+this.container.viewportTop-i,"none"===o&&(this.watchItem.style.display=o)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=this.container.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===t&&void 0===e||this.top===t&&this.bottom===e||n(this.callbacks[u],null)}},this.recalculateLocation(),this.update(),i=this.isInViewport,f=this.isFullyInViewport,m=this.isAboveViewport,g=this.isBelowViewport}var i=o(1),r=i.VISIBILITYCHANGE,s=i.ENTERVIEWPORT,a=i.FULLYENTERVIEWPORT,c=i.EXITVIEWPORT,l=i.PARTIALLYEXITVIEWPORT,u=i.LOCATIONCHANGE,h=i.STATECHANGE,p=i.eventTypes,d=i.defaultOffsets;n.prototype={on:function(t,e,o){switch(!0){case t===r&&!this.isInViewport&&this.isAboveViewport:case t===s&&this.isInViewport:case t===a&&this.isFullyInViewport:case t===c&&this.isAboveViewport&&!this.isInViewport:case t===l&&this.isInViewport&&this.isAboveViewport:if(e.call(this,this.container.latestEvent,this),o)return}if(!this.callbacks[t])throw new Error("Tried to add a scroll monitor listener of type "+t+". Your options are: "+p.join(", "));this.callbacks[t].push({callback:e,isOne:o||!1})},off:function(t,e){if(!this.callbacks[t])throw new Error("Tried to remove a scroll monitor listener of type "+t+". Your options are: "+p.join(", "));for(var o,n=0;o=this.callbacks[t][n];n++)if(o.callback===e){this.callbacks[t].splice(n,1);break}},one:function(t,e){this.on(t,e,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<this.container.viewportTop,this.isBelowViewport=this.bottom>this.container.viewportBottom,this.isInViewport=this.top<this.container.viewportBottom&&this.bottom>this.container.viewportTop,this.isFullyInViewport=this.top>=this.container.viewportTop&&this.bottom<=this.container.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var t=this.container.watchers.indexOf(this);this.container.watchers.splice(t,1);for(var e=0,o=p.length;e<o;e++)this.callbacks[p[e]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var f=function(t){return function(e,o){this.on.call(this,t,e,o)}},m=0,g=p.length;m<g;m++){var v=p[m];n.prototype[v]=f(v)}t.exports=n}])},,function(t,e,o){"use strict";var n=function(){function t(t){this.option=Object.assign({expire:null},t),this.option.key||console.error("falsy key")}return t.prototype.get=function(){try{var t=localStorage.getItem(this.option.key);if(!t)return null;var e=JSON.parse(t);return!this.option.expire||e.expire<Date.now()?(localStorage.removeItem(this.option.key),null):e.obj}catch(t){return null}},t.prototype.set=function(t){try{var e=this.option.expire?Date.now()+this.option.expire:null,o=JSON.stringify({expire:e,obj:t});localStorage.setItem(this.option.key,o)}catch(t){}},t}();e.a=n},,,,function(t,e,o){"use strict";var n=o(117);n.setConfig({img_dir:"/static/bower/emojify.js/images/emoji",blacklist:{elements:["script","textarea","pre","code"],classes:["no-emojify"]}}),e.a=n},function(t,e,o){"use strict";function n(){return o.e(6).then(o.bind(null,335))}function i(){return Promise.all([o.e(4),o.e(5)]).then(o.bind(null,328))}function r(){return Promise.all([o.e(0),o.e(1)]).then(o.bind(null,170))}o.r(e),o.d(e,"import_login",function(){return n}),o.d(e,"import_user",function(){return i}),o.d(e,"import_modal",function(){return r})},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(8),s=o.n(r),a=o(5),c=o(2),l=o(322),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.setup=function(){this._init=Date.now(),this.elPaginator=this.qs(".paginator"),this.loading=null,this.loadedPage=1,this.listName=this.dataset.listName,this.reverse=this.dataset.reverse},e.prototype.shouldStartWatcher=function(){return!0},e.prototype.shouldEndWatcher=function(){return!1},e.prototype.getNextURL=function(){throw new Error("getNextURL should be implemented")},e.prototype.willFetchURL=function(t){},e.prototype.didFetchPage=function(t){},e.prototype.shouldIncludeItem=function(t){return!0},e.prototype.collectItems=function(t){var e=t.querySelectorAll(".list-item");if(!e||0===e.length)return[];for(var o=[],n=0,i=e.length;n<i;n++)this.shouldIncludeItem(e[n])&&o.push(e[n]);return o},e.prototype.bindDomEvents=function(){t.prototype.bindDomEvents.call(this),this.setup(),this.shouldStartWatcher()&&this.setupMonitor()},e.prototype.setupMonitor=function(){var t=s.a,e=.5*this.app.viewport.viewportHeight;if(this.dataset.scrollContainer){var o=this.root.closest(this.dataset.scrollContainer);t=s.a.createContainer(o),e=.5*o.clientHeight,this.scrollElement=o}else this.scrollElement=document.body;this.monitor=t.create(this.elPaginator,e),this.monitor.enterViewport(this.loadNext.bind(this))},e.prototype.loadNext=function(){var t=this;if(!this.loading){if(this.shouldEndWatcher())return this.monitor.destroy(),void this.root.classList.add("list-all-items-loaded");this.render(!0);var e=this.getNextURL();return this.willFetchURL(e),this.loading=a.e(e).then(function(e){return t.inflateDOM(e)}).then(function(e){return t.didFetchPage(e),e}).then(function(e){return t.collectItems(e)}).then(function(e){return t.mountItems(e)}).then(Object(c.t)(.2)).then(function(e){t.render(!1),t.loading=void 0,t.loadedPage+=1,t.paginatorInViewport()&&t.loadNext()}).catch(function(e){console.error(e),t.render(!1),t.loading=void 0})}},e.prototype.paginatorInViewport=function(){for(var t=this.monitor.container;t.containerWatcher;)t.containerWatcher.recalculateLocation(),t=t.containerWatcher.container;return this.monitor.recalculateLocation(),this.monitor.update(),this.monitor.isInViewport},e.prototype.inflateDOM=function(t){var e=Object(c.g)(t).querySelector('[data-list-name="'+this.listName+'"]');if(!e)throw new Error("next page loader not found");return e},e.prototype.mountItems=function(t){var e=this,o=document.createDocumentFragment();t.forEach(function(t){t.classList&&!t.classList.contains("paginator")&&o.appendChild(t)});var n=this.qsa(".list-item");if(this.reverse){var i=this.scrollElement.scrollHeight,r=this.scrollElement.scrollTop;n[0].before(o),setTimeout(function(){var t=e.scrollElement.scrollHeight;e.scrollElement.scrollTop=r+(t-i)},200)}else n[n.length-1].after(o)},e.prototype.render=function(t){var e=this;void 0===t&&(t=!1),this.childrenStillRendering||(this.childrenStillRendering=!0,this.renderChildren().then(function(t){e.childrenStillRendering=!1})),this.elPaginator.innerHTML=l({pageToken:this.pageToken,base:this.base,loading:t}),this.emit(t?"loading":"load")},e}(i.a);e.default=u},function(t,e){t.exports=function(t,e){var o,n,i=window.navigator,r=(t=window._buorgres=t||{}).l||(i.languages?i.languages[0]:null)||i.language||i.browserLanguage||i.userLanguage||document.documentElement.getAttribute("lang")||"en";t.ll=r=r.replace("_","-").toLowerCase().substr(0,2),t.apiver=t.api||t.c||-1;var s={i:12,f:54,o:46,s:10.1,n:20,c:59,y:17.04,v:1.1,uc:11.3},a={i:-2,f:-4,o:-4,s:-1.7,n:12,c:-4,a:534,y:-.02,v:-.02,uc:-.03};n=t.apiver<4?{i:9,f:10,o:20,s:7}:{i:8,f:5,o:12.5,s:6.2};t.vs;var c=t.vs||a;for(o in a)c[o]||(c[o]=a[o]),s[o]&&c[o]>=s[o]&&(c[o]=s[o]-.2),s[o]&&c[o]<0&&(c[o]=s[o]+c[o]),n[o]&&c[o]<n[o]&&(c[o]=n[o]);t.vsf=c,t.reminder<.1||0===t.reminder?t.reminder=0:t.reminder=t.reminder||24,t.reminderClosed=t.reminderClosed||168,t.onshow=t.onshow||function(t){},t.onclick=t.onclick||function(t){},t.onclose=t.onclose||function(t){},t.pageurl=t.pageurl||location.hostname||"x",t.newwindow=!1!==t.newwindow,t.test=e||t.test||"#test-bu"===location.hash||"#test-bu-beta"===location.hash||!1;var l=function(t){var e,o=t||navigator.userAgent,n=!1,i={i:"Internet Explorer",e:"Edge",f:"Firefox",o:"Opera",s:"Safari",n:"Netscape",c:"Chrome",a:"Android Browser",y:"Yandex Browser",v:"Vivaldi",uc:"UC Browser",x:"Other"};function r(t,e){if(RegExp(e,"i").test(o))return t}var s=r("bot","bot|spider|archiver|transcoder|crawl|checker|monitoring|screenshot|python-|php|uptime|validator|fetcher|facebook|slurp|google|yahoo|microsoft|node|mail.ru|github|cloudflare|addthis|thumb|proxy|feed|fetch|favicon|link|http|scrape|seo|page|search console|AOLBuild|Teoma|Gecko Expeditor")||r("discontinued browser","camino|flot|k-meleon|fennec|galeon|chromeframe|coolnovo")||r("complicated device browser","SMART-TV|SmartTV")||r("niche browser","Dorado|Whale|SamsungBrowser|MIDP|wii|Chromium|Puffin|Opera Mini|maxthon|maxton|dolfin|dolphin|seamonkey|opera mini|netfront|moblin|maemo|arora|kazehakase|epiphany|konqueror|rekonq|symbian|webos|PaleMoon|QupZilla|Otter|Midori|qutebrowser")||r("mobile without upgrade path or landing page","kindle|silk|blackberry|bb10|RIM|PlayBook|meego|nokia|ucweb|ZuneWP7|537.85.10")||r("android(chrome) web view","; wv"),a=/iphone|ipod|ipad|android|mobile|phone|ios|iemobile/i.test(o);if(s)return{n:"x",v:0,t:"other browser",donotnotify:s};for(var c=[["CriOS.VV","c"],["FxiOS.VV","f"],["Trident.*rv:VV","i"],["Trident.VV","io"],["UCBrowser.VV","uc"],["MSIE.VV","i"],["Edge.VV","e"],["Vivaldi.VV","v"],["OPR.VV","o"],["YaBrowser.VV","y"],["Chrome.VV","c"],["Firefox.VV","f"],["Version.VV.*Safari","s"],["Safari.VV","so"],["Opera.*Version.VV","o"],["Opera.VV","o"],["Netscape.VV","n"]],l=0;l<c.length;l++)if(o.match(new RegExp(c[l][0].replace("VV","(\\d+\\.?\\d+)"),"i"))){e=c[l][1];break}if("v"===e||"y"===e||"uc"===e)var u=RegExp.$1.split("."),h=u[0]+"."+("00".substring(0,2-u[1].length)+u[1]);else h=Math.round(10*parseFloat(RegExp.$1))/10;if(!e)return{n:"x",v:0,t:i[e],mobile:a};if(/windows.nt.5.0|windows.nt.4.0|windows.95|windows.98|os x 10.2|os x 10.3|os x 10.4|os x 10.5|os x 10.6|os x 10.7/i.test(o)&&(n="oldOS"),/iphone|ipod|ipad|ios/i.test(o))return o.replace("_",".").match(new RegExp("OS.(\\d+\\.?\\d?)","i")),e="iOS",h=parseFloat(RegExp.$1),Math.max(window.screen.height,window.screen.width)<=480||window.devicePixelRatio<2?{n:"s",v:h,t:"iOS "+h,donotnotify:"iOS without upgrade path",mobile:a}:{n:"s",v:h,t:"iOS "+h,donotnotify:!1,mobile:a};if(o.indexOf("Android")>-1&&"s"===e){var p=parseInt((/WebKit\/([0-9]+)/i.exec(o)||0)[1],10)||2e3;if(p<=534)return{n:"a",v:p,t:i.a,mob:!0,donotnotify:n,mobile:a}}return"f"!=e||45!=Math.round(h)&&52!=Math.round(h)||(n="ESR"),"so"==e&&(h=4,e="s"),"i"==e&&7==h&&window.XDomainRequest&&(h=8),"io"==e&&(e="i",h=h>6?11:h>5?10:h>4?9:h>3.1?8:h>3?7:9),"e"==e?{n:"i",v:h,t:i[e]+" "+h,donotnotify:n,mobile:a}:{n:e,v:h,t:i[e]+" "+h,donotnotify:n,mobile:a}}();if(!t.test){if(!l||!l.n||"x"===l.n||!1!==l.donotnotify||document.cookie.indexOf("browserupdateorg=pause")>-1&&t.reminder>0)return;if(l.v>c[l.n]||l.mobile&&!1===t.mobile)return}if(t.setCookie=function(t){document.cookie="browserupdateorg=pause; expires="+new Date((new Date).getTime()+36e5*t).toGMTString()+"; path=/"},t.reminder>0&&t.setCookie(t.reminder),t.nomessage)t.onshow(t);else{var u=document.createElement("script");u.src=t.jsshowurl||/file:/.test(location.href)&&"http://browser-update.org/update.show.min.js"||"//browser-update.org/update.show.min.js",document.body.appendChild(u)}}},function(t,e,o){"use strict";var n=o(17),i=o.n(n),r=[];function s(t){return t&&r.push(t),{start:function t(e){if(0===r.length)return e();setTimeout(function(){return function(t,e){var o=document.createElement("script");o.src=t,o.onload=function(){e()},o.onerror=function(){e(new Error("Failed to load polyfill script "+t))},document.head.appendChild(o)}(r.shift(),function(o){return o?e(o):t(e)})})}}}function a(t){function e(){ga?(ga("send",{hitType:"event",eventCategory:"Browser Update Popup",eventAction:t,eventLabel:ServerData?ServerData.eventLabel:"",nonInteraction:!0}),ga("sampling.send",{hitType:"event",eventCategory:"Browser Update Popup",eventAction:t,eventLabel:ServerData?ServerData.eventLabel:"",nonInteraction:!0})):console.error("ga unavailable")}return function(){setTimeout(e,20)}}e.a=function(t){i()({notify:{i:11,c:"-12m",f:-4,s:-2,o:-4},unsecure:!0,api:5,onshow:a("Show"),onclick:a("Click"),onclose:a("Close")}),window.Proxy||s("https://unpkg.com/proxy-polyfill@0.1.7/proxy.min.js");for(var e=[],o=0,n=[{scope:window,feats:["Promise","fetch","URL","URLSearchParams","Map","localStorage","requestAnimationFrame"]},{scope:Element.prototype,prefix:"Element.prototype.",feats:["after","before","closest","remove","matches"]},{scope:Array,prefix:"Array.",feats:["from"]},{scope:Node.prototype,prefix:"Node.prototype.",feats:["contains"]},{scope:String.prototype,prefix:"String.prototype.",feats:["startsWith"]}];o<n.length;o++)for(var r=n[o],c=r.scope,l=r.feats,u=r.prefix,h=void 0===u?"":u,p=0,d=l;p<d.length;p++){var f=d[p];f in c||e.push(h+f)}window.URL&&!window.URL.prototype.hasOwnProperty("href")&&e.push("URL"),e.length&&s("https://cdn.polyfill.io/v2/polyfill.min.js?unknown=polyfill&flags=gated,always&features=default,"+e.join(",")),window.NodeList.prototype.forEach||(window.NodeList.prototype.forEach=Array.prototype.forEach),s().start(function(e){if(e)throw e;t()})}},function(t,e,o){"use strict";o.r(e);var n=o(0);var i=o(32);o.d(e,"VComponent",function(){return h});var r="__component",s="__root",a="__children",c="__listeners",l=Array.prototype.map;function u(t){for(var e=t.root;e=e.parentNode;)if(e[r])return e[r];return null}var h=function(t){function e(o){var n=t.call(this)||this;if(e.get(o))throw new Error("cannot construct twice");return n[s]=o,n[s][r]=n,n[a]={},n[c]=[],n.name=n[s].dataset.vceName||n.name||n.constructor.vceName||n[s].dataset.vce,n.initPromise=n.renderChildren().then(n.bindDomEvents.bind(n)).then(n.init.bind(n)),n}return n.b(e,t),e.prototype.removeChild=function(t){var e=t.name,o=this[a][e].indexOf(t);if(-1===o)throw new Error("child not found");t.off(),t.root.parentNode.removeChild(t.root),this[a][e].splice(o,1)},e.prototype.renderChildren=function(){if(e.isRootRendering(this.root)){var t=l.call(this.qsa("[data-vce]"),function(t){return e.get(t)}).filter(function(t){return!!t});return Promise.resolve(this["__init-children"](t))}return this.constructor.render(this.root).then(this["__init-children"].bind(this))},e.prototype["__init-children"]=function(t){var e=this,o={};t.forEach(function(t){if(u(t)===e){var n=t.name;o[n]=o[n]||[],-1===o[n].indexOf(t)&&o[n].push(t)}}),this[a]=o},e.prototype.createChild=function(t){if("string"==typeof t&&(t=this.qs(t)),!this.root.contains(t))throw new Error("cannot find child element");var o=e.get(t);return o?Promise.resolve(o):e.create(t).then(function(t){var e=u(t);return e[a][t.name]=e[a][t.name]||[],e[a][t.name].push(t),t})},e.prototype.qs=function(t){return this.root.querySelector(t)},e.prototype.qsa=function(t){return this.root.querySelectorAll(t)},e.prototype.qsChild=function(t){var o=this.qs(t);return o?e.get(o):null},e.prototype.qsChildren=function(t){var o=[];return this.qsa(t).forEach(function(t){var n=e.get(t);n&&o.push(n)}),o},e.prototype.replaceRoot=function(t){var e=this.root.parentNode;return e.insertBefore(t,this.root),e.removeChild(this.root),this.destroyListeners(),delete this.root[r],this[s]=t,t[r]=this,this.renderChildren().then(this.bindDomEvents.bind(this))},e.prototype.init=function(){},e.prototype.bindDomEvents=function(){var t=this;this.events&&this.events.forEach(function(e){"string"==typeof e?t.listen.apply(t,e.split(/\//)):t.listen.apply(t,e)})},e.prototype.listen=function(t,e,o,n){var i=this;return t="string"==typeof t?t.split(/ /):t,o="function"==typeof o?o.bind(this):this[o].bind(this),t.forEach(function(t){"@root"===e?(i.root.addEventListener(t,o,!!n),i[c].push([i.root,t,o,!!n])):"string"==typeof e?i[c].push(function(t,e,o,n,i){function r(o){var i=o.target.closest(e);i&&t.contains(i)&&n.call(this,new Proxy(o,{get:function(t,e){return"currentTarget"===e?i:"originalEvent"===e?t:"function"==typeof t[e]?t[e].bind(t):t[e]}}))}var s=!!i||{focus:!0,blur:!0}[o];return t.addEventListener(o,r,s),[t,o,r,s]}(i.root,e,t,o,n)):(e.addEventListener(t,o,!!n),i[c].push([e,t,o,!!n]))}),this},e.prototype.destroyListeners=function(){this[c].forEach(function(t){var e=t[0],o=t.slice(1);return e.removeEventListener.apply(e,o)}),this[c]=[]},Object.defineProperty(e.prototype,"root",{get:function(){return this[s]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this[a]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataset",{get:function(){return this.root.dataset},enumerable:!0,configurable:!0}),e.isRootRendering=function(t){return e["__rendering-root"]&&e["__rendering-root"].contains(t)},e.render=function(t){if(void 0===t&&(t=document),e.isRootRendering(t))throw new Error("render process conflict");e["__rendering-root"]=t;for(var o=t.querySelectorAll("[data-vce]"),n=[],i=o.length-1;i>=0;)n.push(this.create(o[i])),i-=1;return Promise.all(n).then(function(t){return delete e["__rendering-root"],t},function(t){return delete e["__rendering-root"],Promise.reject(t)})},e.create=function(t){var e=this;return Promise.resolve(this.loader(t.dataset.vce)).then(function(o){return e.get(t)||new o(t)})},e.get=function(t){return t[r]},e.loader=function(t){return this.components[t]},e.components={},e}(i.a)},function(t,e,o){var n,i;!function(r){if(void 0===(i="function"==typeof(n=r)?n.call(e,o,e,t):n)||(t.exports=i),!0,t.exports=r(),!!0){var s=window.Cookies,a=window.Cookies=r();a.noConflict=function(){return window.Cookies=s,a}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var o=arguments[t];for(var n in o)e[n]=o[n]}return e}return function e(o){function n(e,i,r){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(r=t({path:"/"},n.defaults,r)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*r.expires),r.expires=a}r.expires=r.expires?r.expires.toUTCString():"";try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(t){}i=o.write?o.write(i,e):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var c="";for(var l in r)r[l]&&(c+="; "+l,!0!==r[l]&&(c+="="+r[l]));return document.cookie=e+"="+i+c}e||(s={});for(var u=document.cookie?document.cookie.split("; "):[],h=/(%[0-9A-Z]{2})+/g,p=0;p<u.length;p++){var d=u[p].split("="),f=d.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var m=d[0].replace(h,decodeURIComponent);if(f=o.read?o.read(f,m):o(f,m)||f.replace(h,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(t){}if(e===m){s=f;break}e||(s[m]=f)}catch(t){}}return s}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,o){n(e,"",t(o,{expires:-1}))},n.withConverter=e,n}(function(){})})},,function(t,e,o){var n=o(164),i=o(323);t.exports={throttle:n,debounce:i}},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){var e=this;return Object(r.m)(function(t){return e.app.viewport.onResize(e,e.layout)}),t.prototype.init.call(this)},e.prototype.bindDomEvents=function(){return Object(r.m)(this.layout.bind(this)),t.prototype.bindDomEvents.call(this)},e.prototype.layout=function(){this.root.classList.remove("overflowing","overflowing-x","overflowing-y");var t=this.root.offsetWidth,e=this.root.offsetHeight,o=this.root.scrollWidth,n=this.root.scrollHeight;o>t&&this.root.classList.add("overflowing","overflowing-x"),n>e&&this.root.classList.add("overflowing","overflowing-y")},e}(i.a);e.default=s},function(t,e,o){var n,i,r;i=[t,o(116),o(114),o(113)],void 0===(r="function"==typeof(n=function(t,e,o,n){"use strict";var i=a(e),r=a(o),s=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),u=function(t){function e(t,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.resolveOptions(o),n.listenClick(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),l(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===c(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,s.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return h("action",t)}},{key:"defaultTarget",value:function(t){var e=h("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return h("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,o=!!document.queryCommandSupported;return e.forEach(function(t){o=o&&!!document.queryCommandSupported(t)}),o}}]),e}(r.default);function h(t,e){var o="data-clipboard-"+t;if(e.hasAttribute(o))return e.getAttribute(o)}t.exports=u})?n.apply(e,i):n)||(t.exports=r)},function(t,e,o){"use strict";o.d(e,"a",function(){return r});var n=o(8),i=o.n(n);function r(t,e){var o,n=i.a.create(t.root,{top:.5*t.app.viewport.viewportHeight,bottom:50});function r(){!1!==e.call(t)&&n.destroy()}n.enterViewport(function(){o=setTimeout(r,150)}),n.exitViewport(function(){return clearTimeout(o)})}},,,,,,,function(t,e,o){"use strict";var n="__events",i=function(){function t(){this[n]={}}return t.prototype.on=function(t,e){var o=this;return t.split(/ /).forEach(function(t){o[n][t]?o[n][t].push(e):o[n][t]=[e]}),this},t.prototype.off=function(t,e){var o=this;return t?e?(t.split(/ /).forEach(function(t){for(var i=o[n][t],r=i.length,s=0,a=0;s<r;)i[s]!==e&&(i[a]=i[s],a+=1),s+=1;i.length=a}),this):(t.split(/ /).forEach(function(t){return delete o[n][t]}),this):(this[n]={},this)},t.prototype.one=function(t,e){var o=this,n=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];o.off(t,n),e.apply(o,i)};return this.on(t,n)},t.prototype.emit=function(t){for(var e=this,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return this[n][t]&&this[n][t].length>0&&this[n][t].slice(0).forEach(function(t){return t.apply(e,o)}),this},t}();e.a=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(24),s=o.n(r),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){return this.clipboard&&this.clipboard.destroy(),this.doLoadClipboard(),t.prototype.bindDomEvents.call(this)},e.prototype.doLoadClipboard=function(){var t=this;s.a.isSupported()?(this.clipboard=new s.a(this.root),this.root.dataset.silence||(this.root.classList.contains("with-tooltip")?this.clipboard.on("success",function(e){t.root.classList.add("tooltip-show"),clearTimeout(t.root._tooltip_timeout),t.root._tooltip_timeout=setTimeout(function(e){return t.root.classList.remove("tooltip-show")},3e3),e.clearSelection()}):this.clipboard.on("success",function(e){var o={};if(t.root.dataset.toastFollow){var n=t.root.getBoundingClientRect();o.top="calc("+(n.top+n.height)+"px + "+t.root.dataset.toastFollow+")"}t.app.showToast("Copied",2,o)}))):this.root.parentNode.removeChild(this.root)},e}(i.a);e.default=a},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(25),s=o(2),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){t.prototype.bindDomEvents.call(this),this.bindLazyLoad()},e.prototype.bindLazyLoad=function(){"IMG"===this.root.tagName.toUpperCase()?r.a(this,this.load):this.emitNextTick("load")},e.prototype.load=function(){var t,e=this,o=this.root;if(!((t=o).offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;if(this.loaded)return!0;if(this.loaded=!0,!o.src||o.dataset.preview)if(o.dataset.src||!o.src)if(o.dataset.src){if(o.dataset.srcset)return o.src=o.dataset.src,o.srcset=o.dataset.srcset,void this.emitNextTick("load");o.classList.add("loading","community-bg"),this.emitNextTick("loading"),s.k(o.dataset.src).then(function(t){o.classList.remove("loading","community-bg"),t&&e.render(t)}).catch(function(t){return console.error(t)})}else console.error("empty data-src for vce[image]");else this.emitNextTick("load");else o.complete?(this.emitNextTick("load"),this.needBgDiv&&this.replaceBgDiv(o)):o.onload=function(){e.emitNextTick("load"),e.needBgDiv&&e.replaceBgDiv(o)}},e.prototype.render=function(t){var e=this;if(this.needBgDiv)this.replaceBgDiv(t);else{if(this.dataset.loadTransition&&this.root.dataset.preview&&this.root.src){var o=this.root.width;this.root.style.width=o+"px";var n=t.width;setTimeout(function(){e.root.style.width=n+"px"},200)}this.root.src=t.src,this.emitNextTick("load")}},Object.defineProperty(e.prototype,"needBgDiv",{get:function(){var t=this.root.classList;return(t.contains("img-cover")||t.contains("img-contain"))&&!Modernizr.objectfit},enumerable:!0,configurable:!0}),e.prototype.replaceBgDiv=function(t){var e=this,o=document.createElement("div");if([].slice.call(this.root.attributes).forEach(function(t){return o.setAttribute(t.name,t.value)}),o.style.backgroundImage="url("+t.src+")",this.root.getAttribute("height")){var n=this.root.height,i=this.root.width||t.width/t.height*this.root.height;o.style.width=s.s(i),o.style.height=s.s(n)}s.m(function(t){return e.replaceRoot(o)})},e}(i.a);e.default=a},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=o(5),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){var e=this;t.prototype.bindDomEvents.call(this),this.elNum=this.qs(".num"),this.unlock=function(){e.locked=!1}},Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/onClick"]},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){this.locked||(this.locked=!0,"0"===this.dataset.voteValue?this.vote().then(this.unlock,this.unlock):this.unvote().then(this.unlock,this.unlock))},e.prototype.vote=function(){var t=this,e=this.getTarget();return this.app.requireLoginAndJoin(Object.assign({successRedirect:""},this.dataset)).then(function(o){return Promise.race([s.m(e),Object(r.t)(.1)()]).then(function(n){return t._handleResult({memberStatus:o,target:e,voteValue:"4"})})}).catch(this.app.globalCatcher).catch(this.app.toastErrorHandler())},e.prototype.unvote=function(){var t=this,e=this.getTarget();return this.app.requireLoginAndJoin(Object.assign({successRedirect:""},this.dataset)).then(function(t){return Promise.race([s.l(e),Object(r.t)(.1)()])}).then(function(o){return t._handleResult({memberStatus:{loginedMember:!0},target:e,voteValue:"0"})}).catch(this.app.globalCatcher).catch(this.app.toastErrorHandler())},e.prototype._handleResult=function(t){var e=this,o=t.memberStatus,n=t.target,i=t.voteValue,s="btn-like-comment"===this.name?"comment":n.logType;"0"!==i?collectTEA("user_likes_anything",{type:s,source:{feed_card:"Feed Card",detail_page:"Page Detailed View",live_comment:"Live Comment"}[this.dataset.submitEventLabel]}):collectTEA("user_unlikes_anything",{type:s,source:{feed_card:"Feed Card",detail_page:"Page Detailed View",live_comment:"Live Comment"}[this.dataset.submitEventLabel]}),this.app.sendGaAndWait({eventCategory:("0"===i?"Unlike":"Like")+("btn-like-comment"===this.name?" Comment":""),eventLabel:this.dataset.submitEventLabel,eventAction:o.loginedMember?"submit":"auto"}).then(function(t){if(o.loginedMember){if(e.emit("success",{target:n,voteValue:i}),e.dataset.voteValue=i,e.elNum){var s=parseInt(e.elNum.innerText,10)+("0"===i?-1:1);e.elNum.innerText=String(s)}var a=e.qsa(".amino-icon");return a.forEach(function(t){return t.classList.add("anim-heartbeat")}),Object(r.a)(e.root,1e3).then(function(t){return a.forEach(function(t){return t.classList.remove("anim-heartbeat")})})}Object(r.p)(e.dataset.href)})},e.prototype.getTarget=function(){return Object(r.c)(this.dataset,"target")},e}(i.a);e.default=a},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/onClick"]},enumerable:!0,configurable:!0}),e.prototype.bindDomEvents=function(){return this.root.classList.add("btn-progress"),t.prototype.bindDomEvents.call(this)},e.prototype.onClick=function(t){this.emit("click",t)},e.prototype.startRequest=function(){this.root.disabled=!0,this.root.classList.remove("step-request-done"),this.root.classList.add("step-request-start")},e.prototype.requestFinish=function(){return this.root.classList.add("step-request-done"),this.root.classList.remove("step-request-start"),Object(r.b)(this.root,300)},e.prototype.reset=function(){this.root.disabled=!1,Object(r.u)(this.root),this.root.classList.remove("step-request-done"),this.root.classList.remove("step-request-start"),Object(r.v)(this.root)},e}(i.a);e.default=s},,,,,,function(t,e){var o=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==o;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,o){var n=o(110);t.exports=function(t,e,o,i,r){var s=function(t,e,o,i){return function(o){o.delegateTarget=n(o.target,e),o.delegateTarget&&i.call(t,o)}}.apply(this,arguments);return t.addEventListener(o,s,r),{destroy:function(){t.removeEventListener(o,s,r)}}}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var o=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===o||"[object HTMLCollection]"===o)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,o){var n=o(112),i=o(111);t.exports=function(t,e,o){if(!t&&!e&&!o)throw new Error("Missing required arguments");if(!n.string(e))throw new TypeError("Second argument must be a String");if(!n.fn(o))throw new TypeError("Third argument must be a Function");if(n.node(t))return function(t,e,o){return t.addEventListener(e,o),{destroy:function(){t.removeEventListener(e,o)}}}(t,e,o);if(n.nodeList(t))return function(t,e,o){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,o)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,o)})}}}(t,e,o);if(n.string(t))return function(t,e,o){return i(document.body,t,e,o)}(t,e,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){function o(){}o.prototype={on:function(t,e,o){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:o}),this},once:function(t,e,o){var n=this;function i(){n.off(t,i),e.apply(o,arguments)}return i._=e,this.on(t,i,o)},emit:function(t){for(var e=[].slice.call(arguments,1),o=((this.e||(this.e={}))[t]||[]).slice(),n=0,i=o.length;n<i;n++)o[n].fn.apply(o[n].ctx,e);return this},off:function(t,e){var o=this.e||(this.e={}),n=o[t],i=[];if(n&&e)for(var r=0,s=n.length;r<s;r++)n[r].fn!==e&&n[r].fn._!==e&&i.push(n[r]);return i.length?o[t]=i:delete o[t],this}},t.exports=o},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var o=t.hasAttribute("readonly");o||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),o||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i),e=n.toString()}return e}},function(t,e,o){var n,i,r;i=[t,o(115)],void 0===(r="function"==typeof(n=function(t,e){"use strict";var o,n=(o=e)&&o.__esModule?o:{default:o},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return r(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":i(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s})?n.apply(e,i):n)||(t.exports=r)},function(t,e,o){var n,i,r;!function(o,s){"use strict";i=[],void 0===(r="function"==typeof(n=function(){return function(){var t,e,o="+1,-1,100,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,back,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_medium_small_square,black_medium_square,black_nib,black_small_square,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crescent_moon,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,package,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkle,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_large_square,white_medium_small_square,white_medium_square,white_small_square,white_square_button,wind_chime,wine_glass,wink,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz".split(/,/),n=o.reduce(function(t,e){return t[e]=!0,t},{});function i(){var t={named:/:([a-z0-9A-Z_-]+):/,smile:/:-?\)/g,open_mouth:/:o/gi,scream:/:-o/gi,smirk:/[:;]-?]/g,grinning:/[:;]-?d/gi,stuck_out_tongue_closed_eyes:/x-d/gi,stuck_out_tongue_winking_eye:/[:;]-?p/gi,rage:/:-?[\[@]/g,frowning:/:-?\(/g,sob:/:['’]-?\(|:&#x27;\(/g,kissing_heart:/:-?\*/g,wink:/;-?\)/g,pensive:/:-?\//g,confounded:/:-?s/gi,flushed:/:-?\|/g,relaxed:/:-?\$/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g};return s.ignore_emoticons&&(t={named:/:([a-z0-9A-Z_-]+):/,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g}),Object.keys(t).map(function(e){return[t[e],e]})}function r(){var e=t.map(function(t){var e=t[0],o=e.source||e;return"("+(o=o.replace(/(^|[^\[])\^/g,"$1"))+")"}).join("|");return new RegExp(e,"gi")}var s={blacklist:{ids:[],classes:["no-emojify"],elements:["script","textarea","a","pre","code"]},tag_type:null,only_crawl_id:null,img_dir:"images/emoji",ignore_emoticons:!1,mode:"img"};function a(t){return" "===t||"\t"===t||"\r"===t||"\n"===t||""===t||t===String.fromCharCode(160)}var c={img:"img",sprite:"span","data-uri":"span"};function l(t){var e=null;if(t.replacer)e=t.replacer.apply({config:s},[":"+t.emojiName+":",t.emojiName]);else{var o=s.tag_type||c[s.mode];e=t.win.document.createElement(o),"img"!==o?e.setAttribute("class","emoji emoji-"+t.emojiName):(e.setAttribute("align","absmiddle"),e.setAttribute("alt",":"+t.emojiName+":"),e.setAttribute("class","emoji"),e.setAttribute("src",s.img_dir+"/"+t.emojiName+".png")),e.setAttribute("title",":"+t.emojiName+":")}t.node.splitText(t.match.index),t.node.nextSibling.nodeValue=t.node.nextSibling.nodeValue.substr(t.match[0].length,t.node.nextSibling.nodeValue.length),e.appendChild(t.node.splitText(t.match.index)),t.node.parentNode.insertBefore(e,t.node.nextSibling)}function u(e){if(e[1]&&e[2]){var o=e[2];return n[o]?o:void 0}for(var i=3;i<e.length-1;i++)if(e[i])return t[i-2][1]}function h(t,e){var o=this.config.tag_type||c[this.config.mode];return"img"!==o?"<"+o+" class='emoji emoji-"+e+"' title=':"+e+":'></"+o+">":"<img align='absmiddle' alt=':"+e+":' class='emoji' src='"+this.config.img_dir+"/"+e+".png' title=':"+e+":' />"}function p(){this.lastEmojiTerminatedAt=-1}return p.prototype={validate:function(t,e,o){var n=this,i=u(t);if(i){var r=t[0],s=r.length;if(0===e)return h();if(o.length===r.length+e)return h();var c=this.lastEmojiTerminatedAt===e;if(c)return h();if(a(o.charAt(e-1)))return h();var l=a(o.charAt(r.length+e));return l&&c?h():void 0}function h(){return n.lastEmojiTerminatedAt=s+e,i}}},{defaultConfig:s,emojiNames:o,setConfig:function(t){Object.keys(s).forEach(function(e){e in t&&(s[e]=t[e])})},replace:function(o,n){if(!o)return o;n||(n=h);t=i(),e=r();var a=new p;return o.replace(e,function(){var t=Array.prototype.slice.call(arguments,0,-2),e=arguments[arguments.length-2],o=arguments[arguments.length-1],i=a.validate(t,e,o);return i?n.apply({config:s},[arguments[0],i]):arguments[0]})},run:function(o,n){void 0===o&&(o=s.only_crawl_id?document.getElementById(s.only_crawl_id):document.body);var a=o.ownerDocument,c=a.defaultView||a.parentWindow,h=function(t,e){var o;if(t.hasChildNodes())for(o=t.firstChild;o;)e(o)&&h(o,e),o=o.nextSibling};t=i(),e=r();var d=[],f=new RegExp(s.blacklist.elements.join("|"),"i"),m=new RegExp(s.blacklist.classes.join("|"),"i");if(void 0!==c.document.createTreeWalker)for(var g,v=c.document.createTreeWalker(o,c.NodeFilter.SHOW_TEXT|c.NodeFilter.SHOW_ELEMENT,function(t){return 1!==t.nodeType?c.NodeFilter.FILTER_ACCEPT:t.tagName.match(f)||"svg"===t.tagName||t.className.match(m)?c.NodeFilter.FILTER_REJECT:c.NodeFilter.FILTER_SKIP},!1);null!==(g=v.nextNode());)d.push(g);else h(o,function(t){return!(void 0!==t.tagName&&t.tagName.match(f)||void 0!==t.className&&t.className.match(m))&&(1===t.nodeType||(d.push(t),!0))});d.forEach(function(t){var o,i=[],r=new p;for(;null!==(o=e.exec(t.data));)r.validate(o,o.index,o.input)&&i.push(o);for(var s=i.length;s-- >0;){var a=u(i[s]);l({node:t,match:i[s],emojiName:a,replacer:n,win:c})}})}}}()})?n.apply(e,i):n)||(t.exports=r)}()},function(t,e,o){"use strict";var n=o(0);function i(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.calculate=function(){var t=this;this._rect=this.root.getBoundingClientRect(),this._offsetRect=[this._rect.top,this._rect.right,this._rect.bottom,this._rect.left],(this._offset||[]).forEach(function(e,o){return t._offsetRect[o]+=e});var e=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,n=!1;this._topOverflow=this._offsetRect[0]<0,this._overBottom=this._offsetRect[0]>o,this._rightOverflow=this._offsetRect[1]>e,this._overLeft=this._offsetRect[1]<0,this._bottomOverflow=this._offsetRect[2]>o,this._overTop=this._offsetRect[2]<0,this._leftOverflow=this._offsetRect[3]<0,this._overRight=this._offsetRect[3]>e,this._yFullIn=!this._topOverflow&&!this._bottomOverflow,this._xFullIn=!this._leftOverflow&&!this._rightOverflow,this._fullIn!==this._xFullIn&&this._yFullIn&&(n=!0,this.emit(this._fullIn?"partialhidden":"fullvisible")),this._fullIn=this._xFullIn&&this._yFullIn,this._yPartialIn=!this._overTop&&!this._overBottom,this._xPartialIn=!this._overLeft&&!this._overRight,this._partialIn!==this._xPartialIn&&this._yPartialIn&&(n=!0,this.emit(this._partialIn?"fullhidden":"partialvisible")),this._partialIn=this._xPartialIn&&this._yPartialIn,n&&this.emit("statechange")},Object.defineProperty(e.prototype,"partialVisible",{get:function(){return this._partialIn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullVisible",{get:function(){return this._fullIn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialHidden",{get:function(){return!this._fullIn&&this._partialIn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullHidden",{get:function(){return!this._partialIn},enumerable:!0,configurable:!0}),e.prototype.initCarouselItem=function(){var t=this;this.handler=this.calculate.bind(this),this.app.on("scroll resize",this.handler),"complete"===document.readyState?setTimeout(this.handler,20):document.addEventListener("DOMContentLoaded",this.handler);var e=["Top","Right","Bottom","Left"];this.offset=(this.root.dataset.offset||"").trim().split(/ +/).map(function(o,n){return parseInt(t.root.dataset["offset"+e[n]])||parseInt(o)||null})},Object.defineProperty(e.prototype,"offset",{set:function(t){this._offset=[t[0],t[1],"number"!=typeof t[2]?t[0]:t[2],"number"!=typeof t[3]?t[1]:t[3]]},enumerable:!0,configurable:!0}),e}(t);return e.vceName="carouselItem",e}function r(t){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.doToggle=function(){this.isOpen?this.doClose():this.doOpen()},e.prototype.doOpen=function(){this.isOpen=!0,this.root.classList.add("open"),document.body.addEventListener("click",this.close.bind(this)),this.emit("open")},e.prototype.doClose=function(){this.isOpen=!1,this.root.classList.remove("open"),document.body.removeEventListener("click",this.close.bind(this)),this.emit("close")},e.prototype.close=function(t){if(this.isOpen){for(var e=t.target;null!=e;){if(e===this.root)return;e=e.parentNode}this.doClose()}},e}(t)}o.d(e,"a",function(){return i}),o.d(e,"b",function(){return r})},,function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(32),s=o(22),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.start=function(){var t=this;this.__listener=Object(s.throttle)(15,function(){t.emit("resize",t)}),this["__mod-map"]=new Map,window.addEventListener("resize",this.__listener)},e.prototype.stop=function(){window.removeEventListener("resize",this.__listener)},e.prototype.onResize=function(t,e){var o=this["__mod-map"].get(t);o&&this.off("resize",o),o=e.bind(t),this["__mod-map"].set(t,o),this.on("resize",o)},Object.defineProperty(e.prototype,"isPcView",{get:function(){return this.viewportWidth>=1160},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPhoneView",{get:function(){return this.viewportWidth<=640},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewportWidth",{get:function(){return window.innerWidth||document.documentElement.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewportHeight",{get:function(){return window.innerHeight||document.documentElement.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewportTop",{get:function(){return window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop},set:function(t){window.scroll instanceof Function?window.scroll(0,t):window.scrollTo instanceof Function?window.scrollTo(0,t):document.documentElement?document.documentElement.scrollTop=t:document.body.scrollTop=t},enumerable:!0,configurable:!0}),e.prototype.smoothScroll=function(t){"scrollBehavior"in document.documentElement.style?window.scroll({left:0,top:t,behavior:"smooth"}):this.viewportTop=t},e.prototype.destroy=function(){this.stop(),this.off()},e.prototype.scrollToElement=function(t,e,o){var n=void 0===o?{}:o,i=n.topPadding,r=void 0===i?120:i,s=n.bottomPadding,a=void 0===s?0:s,c=n.force,l=void 0!==c&&c,u=n.smooth,h=void 0!==u&&u,p=t.getBoundingClientRect();if(l||p.top<r||p.bottom>this.viewportHeight-a){var d=void 0;d=e>=0?this.viewportTop+p.top-e-r:this.viewportTop+p.bottom-this.viewportHeight-e+a,h?this.smoothScroll(d):this.viewportTop=d}},e}(r.a),c=o(2),l=o(20),u=o(10),h=o(15);o(321);var p,d={domain:location.hostname,path:"/"},f=function(t){function e(e){var o=this;try{o=t.call(this,e)||this}finally{o.viewport=new a,o.viewport.start()}return o}return n.b(e,t),e.prototype.init=function(){var t=this;if(c.j(this),this.on("scroll",function(e){var o=t.qs(".back-top");o&&(clearTimeout(t._hide_back_top),t.viewport.viewportTop>1.5*t.viewport.viewportHeight?(o.classList.add("active"),t._hide_back_top=setTimeout(function(t){return o.classList.remove("active")},5e3)):t.viewport.viewportTop<10&&o.classList.remove("active"))}),document.body.addEventListener("play",function(t){var e=t.target;collectTEA("play_video",{source:e.dataset.source,type:"Video"})},!0),l.remove("refer_type",d),ServerData.inviteCode&&this.inviteStorage.set({code:ServerData.inviteCode,ndcId:ServerData.community.ndcId}),ServerData&&ServerData.community&&ServerData.community.isPrivate){var e=this.inviteStorage.get();e&&e.ndcId===ServerData.community.ndcId?this.root.classList.add("private-with-invite"):this.root.classList.add("private-without-invite")}!function(){try{var t=ServerData.community.color,e=t[0],o=t[1],n=t[2],i=document.createElement("style");i.innerHTML="\n          .community-hover-bg:hover {\n            background: rgba("+e+","+o+","+n+", 0.2);\n          }\n        ",document.body.appendChild(i)}catch(t){}}()},Object.defineProperty(e.prototype,"events",{get:function(){return["click/.action-open-sidebar/openSidebar","click/.back-top/onClickBackTop","click/[data-event-category]/onClickGaElement/1","click/[data-tea-event]/onClickTeaElement/1","click/[data-refer-type]/onClickRefer","click/[data-alert-text]/onClickAlert"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this.children.modal[0]},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(t,e,o){var n=this;return Object(h.import_modal)().then(function(t){var e=t.loader;return n.renderChildren().then(function(){return e})}).then(function(i){var r=new(i(t))(e);return n.openModal(r,o).then(function(){return r})})},e.prototype.openModal=function(t,e){var o=this;return Promise.resolve(t.initPromise).then(function(n){return o.modal.open(t,e)})},e.prototype.confirm=function(t,e,o){void 0===e&&(e="Ok"),void 0===o&&(o=null);var n=Object.assign({},o,{message:t,action:e,type:"confirm"});return this.showMessageBox(n)},e.prototype.alert=function(t,e,o){void 0===e&&(e="Ok"),void 0===o&&(o=null);var n=Object.assign({},o,{message:t,action:e,type:"alert"});return this.showMessageBox(n)},e.prototype.prompt=function(t,e,o){void 0===e&&(e="Ok"),void 0===o&&(o=null);var n=Object.assign({},o,{message:t,action:e,type:"prompt"});return this.showMessageBox(n)},e.prototype.showMessageBox=function(t){return this.openPopup("message-box",t).then(function(t){return t.resultPromise})},e.prototype.openSidebar=function(t){var e=this,n=t.currentTarget.dataset.sidebar;if(!(n in this.children))throw new Error("cannot find "+n);Promise.all([o.e(0),o.e(1)]).then(o.bind(null,170)).then(function(){return e.renderChildren()}).then(function(){e.openModal(e.children[n][0])})},e.prototype.onClickRefer=function(t){var e=t.currentTarget.dataset.referType;l.set("refer_type",e,d),function(t){var e=t.closest("[data-list-name]"),o=t.closest(".list-item");if(!e||!o)return;var n=t.dataset.referType,i="home_following"===n,r="home_quiz"===n,s=e&&e.classList.contains("items");if(!i&&!s&&!r)return;var a=[],c=o.nextElementSibling;for(;c;){var l=c.href;if((i||r)&&(l=(l=c.querySelector(".post > a"))&&l.href),!l)break;a.push(l),c=c.nextElementSibling}try{sessionStorage.setItem("infinite_scroll_posts",JSON.stringify(a))}catch(t){}}(t.currentTarget)},e.prototype.onClickAlert=function(t){t.preventDefault();var e=t.currentTarget.dataset.alertText;this.alert(e)},e.prototype.onClickGaElement=function(t){var e=t.currentTarget.href,o=e&&!t.currentTarget.target&&!e.match(/^javascript:/)&&!i.a.get(t.currentTarget),n=Object.assign({},t.currentTarget.dataset),r=function(){r.resolved||(r.resolved=!0,o&&(location.href=e))};r.resolved=!1,t&&t.isTrusted||(n.eventAction="auto",n.nonInteraction=!0),this.sendGa(n,r),o&&(t.preventDefault(),setTimeout(r,1500))},e.prototype.onClickTeaElement=function(t){var e=c.c(t.currentTarget.dataset,"tea"),o=e.event,i=n.d(e,["event"]);t&&t.isTrusted||(i.emulated="True"),collectTEA(o,i)},e.prototype.onClickBackTop=function(t){this.qs("#top").scrollIntoView()},e.prototype.sendGa=function(t,e){e=e||function(t){return t};var o=Object.assign({hitType:"event",hitCallback:e,eventAction:"Click",eventLabel:ServerData.eventLabel,transport:"beacon"},t);"undefined"==typeof ga?(console.error("ga unavailable",o),e()):(ga("send",o),ga("sampling.send",o),navigator.sendBeacon&&setTimeout(e))},e.prototype.sendGaAndWait=function(t){var e=this;return new Promise(function(o){e.sendGa(t,o)})},e.prototype.showToast=function(t,e,o){void 0===e&&(e=2),this.children.toast[0].show(t,Object.assign({time:e},o))},e.prototype.requestJoinOrRenewFanclub=function(t,e,o){if(!t.influencerInfo)return this.app.alert(_("This fan club has been closed."));if(!o){var n=new URL(location.href);n.searchParams.set("from_web","1"),n.searchParams.set("redirect_from_clipboard","1"),o=n.href}return this.app.openPopup("join-fan-club",{icons:t.icon,closeByOverlay:!0,motivation:e,copytext:o},!0)},e.prototype.showLoginModal=function(){return this.openPopup("login",{closeByOverlay:!1},!0)},e.prototype.requireLogin=function(t,e){var o=e.onActualLogin,n=void 0===o?function(t){return t||!0}:o,i=e.eventLabel,r=e.eventAction;if(ServerData.isLogin)return Promise.resolve();this.app.sendGa({eventCategory:"Sign In Popup",eventLabel:i,eventAction:r||"Click",nonInteraction:!0}),collectTEA("sign_in_popup",{source:e.source});var s={loginMotivation:t,closeByOverlay:!0,preventReload:!0,source:e.source,referal:e.referal};return this.openPopup("login",s,!0).then(function(t){return t.loginPromise}).then(function(t){return ServerData.isLogin=!0,ServerData.isMember=t.isMember,t}).then(n)},e.prototype.requireJoin=function(t){if(ServerData.isMember)return Promise.resolve();this.app.sendGa({eventCategory:"Join Popup",eventLabel:t.eventLabel,eventAction:t.eventAction||"Click",nonInteraction:"Click"!==t.eventAction}),collectTEA("join_popup",{type:"join",source:t.source,template:ServerData.community.templateId,listing_status:{2:"Listed",1:"Unlisted"}[ServerData.community.listedStatus]});var e=Object.assign({closeByOverlay:!0,directJoinOnPc:!0},t);return this.openPopup("join-community",e,!0).then(function(t){return t.joinPromise})},e.prototype.requireLoginAndJoin=function(t){var e=this;Object(h.import_user)();var o={},n=Object.assign({successRedirect:t.successRedirect,eventLabel:t.eventLabel,source:t.source},c.c(t,"join"));return ServerData.isMember?(o.loginedMember=!0,Promise.resolve(o)):this.requireLogin(t.loginMotivation,{onActualLogin:function(t){o.justLogin=!0},eventLabel:t.eventLabel,source:t.source}).then(function(t){return ServerData.isMember?(o.justLoginMember=!0,o):(Object.assign(n,{eventAction:o.justLogin?"auto":"Click"}),e.requireJoin(n))}).then(function(t){return o.justJoin=!0,o},function(e){return o.justLogin&&void 0!==t.successRedirect&&c.p(t.successRedirect),Promise.reject(e)})},Object.defineProperty(e.prototype,"globalCatcher",{get:function(){var t=this;return function(e){return e&&e.response?105!==e.response.api_status_code?Promise.reject(e):void t.showLoginModal():Promise.reject(e)}},enumerable:!0,configurable:!0}),e.prototype.toastErrorHandler=function(t){var e=this;return function(o){return o&&e.app.showToast(o.response&&o.response.message||"Unknown Error"),console.error(o),t?t(o):null}},e.prototype.setViewportTop=function(t){this.viewport.viewportTop=t,this.qsChildren("[data-vce=headroom]").forEach(function(t){return t.ignoreScroll()})},Object.defineProperty(e.prototype,"inviteStorage",{get:function(){return function(){p||(p=new u.a({key:"invite",expire:432e5}));return p}()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMobile",{get:function(){return this.root.classList.contains("is-mobile")},enumerable:!0,configurable:!0}),e}(i.a);e.default=f},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/onClick"]},enumerable:!0,configurable:!0}),e.prototype.onClick=function(){var t=this.root;t.paused?t.play():t.pause()},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(23),r=o(2),s=o(10),a=o(20),c=30,l=60,u=Date.now()/1e3,h=new s.a({key:"content-collapse-first",expire:864e5}),p=new s.a({key:"content-collapse-second",expire:864e5}),d=new s.a({key:"comment-collapse",expire:864e5}),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/.height-toggle/onClick"]},enumerable:!0,configurable:!0}),e.prototype.bindDomEvents=function(){return setTimeout(this.layout.bind(this),1e3),t.prototype.bindDomEvents.call(this)},e.prototype.onClick=function(t){switch(this.root.classList.toggle("open"),this.root.dataset.additionalLogic||"toggle"){case"toggle":this.toggleContent();break;case"popup":this.popup(t);break;case"comment":this.comment(t);break;case"join":this.join(t)}},e.prototype.layout=function(){var t=this.dataset.threshold||200;"@page"===t&&(t=2*this.app.viewport.viewportHeight);var e=parseInt(String(t),10)||200,o=this.root.scrollHeight>e;o?this.root.classList.add("overflowing"):this.root.classList.remove("overflowing"),this.qs(".height-toggle")&&(o?this.root.classList.add("need-toggle"):this.root.classList.remove("need-toggle"))},e.prototype.toggleContent=function(){this.root.classList.contains("open")?this.root.style.maxHeight="none":this.root.style.maxHeight=""},e.prototype.popup=function(t){var e=this,o=Date.now()/1e3-u;if(m(o))this.toggleContent();else{!function(t){if(m(t))return void console.error("Should not call when toggle is available");t>=l?p.set({}):h.set({})}(o);var n=t.currentTarget,i=o<l,s=i?"show_first":"show_second",a=n.dataset.popup,c=Object(r.c)(n.dataset,"popup");c.motivation=i?"collapse-first":"collapse-second",c.teaSource=i?"Show First Popup":"Show Second Popup",this.app.sendGa({hitType:"event",eventAction:s,eventCategory:"Popup Join",eventLabel:ServerData.eventLabel}),collectTEA("download_popup",{source:c.teaSource}),this.app.openPopup(a,c,!0).then(function(t){t.one("close",e.toggleContent.bind(e))})}},e.prototype.comment=function(t){if(this.toggleContent(),!d.get()){d.set(1);var e=t.currentTarget,o=e.dataset.popup,n=Object(r.c)(e.dataset,"popup");this.app.sendGa({eventAction:"expand_comment",eventCategory:"Popup Join"}),this.app.openPopup(o,n,!0)}},e.prototype.join=function(t){if(this.root.classList.contains("open")){this.root.classList.remove("open"),this.app.sendGa({eventCategory:"Expand Comment"});var e=Object(r.c)(t.currentTarget.dataset,"popup");e.motivation="join-to-expand";var o=Object.assign({eventLabel:"expand_comment",loginMotivation:"Sign in to read the whole comment.",successRedirect:e.successRedirect,source:e.source},Object(r.n)(e,"join"));this.app.requireLoginAndJoin(o).then(function(t){history.replaceState&&history.replaceState(null,null,e.successRedirect),location.reload()}).catch(r.e)}},e}(i.default);function m(t){return!!a.get("call2action_closed")||(t<c||(!!(t<l&&h.get())||!!p.get()))}e.default=f},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.show=function(t,e){e=Object.assign({time:2,top:null},e);var o=this.root.classList.contains("active");o&&Object(r.u)(this.root),this.qs(".content").innerText=_(t),e.top?(this.root.style.bottom="initial",this.root.style.top=e.top):(this.root.style.removeProperty("top"),this.root.style.removeProperty("bottom")),o?Object(r.v)(this.root):this.root.classList.add("active"),this.lastClass&&(this.root.classList.remove(this.lastClass),this.lastClass=void 0),e.additionalClass&&(this.lastClass=e.additionalClass,this.root.classList.add(e.additionalClass)),e.time!==1/0&&this.delayClose(e.time)},e.prototype.warn=function(t,e){e=Object.assign({additionalClass:"toast-warn"},e),this.show(t,e)},e.prototype.success=function(t,e){e=Object.assign({additionalClass:"toast-success"},e),this.show(t,e)},e.prototype.delayClose=function(t,e){var o=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(t){o.root.classList.remove("active",e)},1e3*t)},e}(i.a);e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/.tab-toggle/onClick"]},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var e=this.qsa(".tab-toggle"),o=Array.prototype.indexOf.call(e,t.target);this.switchTab(o,e)},e.prototype.switchTab=function(t,e){for(var o=this.qsa(".tab-pane"),n=0,i=o.length;n<i;n++){var r=o[n];n===t?(r.classList.add("active"),e[n].classList.add("active")):(r.classList.remove("active"),e[n].classList.remove("active"))}},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(8),r=o.n(i),s=o(3),a=o(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){var e=this;t.prototype.bindDomEvents.call(this);var o=parseInt(this.root.dataset.top)||0;if(this.app.viewport.isPcView&&this.qsa("[data-vce=image]").forEach(function(t){return s.a.get(t).load()}),this.root.dataset.stickBottom){var n=this.layout=function(){var t=e._lastIsPcView;if(e._lastIsPcView=e.app.viewport.isPcView,!e.monitor||e.app.viewport.isPcView!==t)return e.monitor&&e.monitor.destroy(),e.root.classList.remove("fixed"),void Object(a.m)(function(t){e.monitor=r.a.create(e.root),e.monitor.stateChange(n),e.layout()});e.app.viewport.isPcView?e.monitor.bottom+5<e.monitor.container.contentHeight?(e.monitor.isBelowViewport?(e.monitor.unlock(),e.root.classList.remove("fixed")):(e.monitor.lock(),e.root.classList.add("fixed")),e.monitor.height+e.monitor.top>e.monitor.container.viewportHeight?(e.root.style.bottom=0,e.root.style.removeProperty("top")):(e.root.style.removeProperty("bottom"),e.root.style.top=o+"px"),e.root.style.width=e.root.parentNode.clientWidth+"px"):(e.monitor.unlock(),e.root.classList.remove("fixed")):(e.monitor.lock(),e.root.classList.add("fixed"),e.root.style.removeProperty("top"),e.root.style.removeProperty("bottom")),e.emit("layout")};Object(a.m)(function(t){e.app.viewport.onResize(e,n),n()})}else if(this.root.dataset.top){var i=this.monitor=r.a.create(this.root,o);i.lock(),this.qs(".content").style.top=o+"px",i.isFullyInViewport||this.root.classList.add("fixed"),i.exitViewport(function(){e.root.classList.add("fixed")}),i.enterViewport(function(){e.root.classList.remove("fixed")})}},e}(s.a);e.default=c},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e}(o(3).b);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){},e}(o(3).b);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(5),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/.j-reload/reload","wheel/@root/disablePopulate"]},enumerable:!0,configurable:!0}),e.prototype.disablePopulate=function(t){var e=this.chatlist;if(!this.nativeDisableOverscroll){t.preventDefault();var o=-t.deltaY||-t.detail;e.scrollTop+=30*(o<0?1:-1)}this.qs("h3.label").classList.toggle("shadow-when-scroll",e.scrollTop>0)},e.prototype.bindDomEvents=function(){var e=this;return this.loading=!0,this.chatlist=this.qs(".chatroom-list-container"),this.nativeDisableOverscroll=!!getComputedStyle(this.chatlist).overscrollBehavior,this.setHeight(),this.app.viewport.onResize(this,this.setHeight),Object(r.e)("/partial/public-chat-threads/"+ServerData.community.ndcId).then(function(t){e.chatlist.innerHTML=t,e.renderChildren(),e.loading=!1,e.qs(".loading-overlay").style.display="none"}).then(function(){return t.prototype.bindDomEvents.call(e)})},e.prototype.reload=function(){var t=this;if(!this.loading){this.loading=!0;var e,o=this.qs(".loading-overlay");return o.style.display="",this.qs("h3.label").classList.remove("shadow-when-scroll"),this.app.sendGa({eventCategory:"Refresh Chatroom List",eventAction:"click"}),collectTEA("refresh_chatroom_list"),Promise.all([Object(r.e)("/partial/public-chat-threads/"+ServerData.community.ndcId),(e=500+100*(Math.random()-.5),new Promise(function(t){setTimeout(t,e)}))]).then(function(e){var n=e[0];o.style.display="none",t.chatlist.innerHTML=n,t.chatlist.scrollTop=0,t.renderChildren(),t.loading=!1})}},e.prototype.setHeight=function(){var t=this.chatlist.getBoundingClientRect().top,e=this.app.viewport.viewportHeight;this.chatlist.style.maxHeight=e-t-22+"px"},e}(i.a);e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(/ /);function s(){var t=document.createElement("div");return t.setAttribute("class","file"),t}var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){var t=this;this.children.list&&(this.children.list[0].on("load",function(){i.a.get(t.qs(".folder")).reloadContent(),t.insertLabel()}),this.current=-1,this.insertLabel())},e.prototype.insertLabel=function(){var t=this;this.qsa(".list-item[data-time]").forEach(function(e){var o=new Date(e.dataset.time),n=new Date-o<6048e5?-1:o.getMonth();if((n<t.current||11===n&&0===t.current||-1===t.current&&-1!==n)&&(t.current=n,e.previousElementSibling&&e.previousElementSibling.classList.contains("list-item"))){e.before(s()),e.before(s()),e.before(s()),e.before(s()),e.before(s()),e.before(s());var i=document.createElement("div");i.setAttribute("class","label community-color-dark"),i.innerText=r[n]||"LATEST",e.before(i)}e.removeAttribute("data-time")})},e}(i.a);e.default=a},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(25),s=o(14),a=o(317),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){t.prototype.bindDomEvents.call(this),Object(r.a)(this,this.load)},e.prototype.load=function(){s.a.run(this.root),this.qsa(".embedded-video").forEach(this.embedVideo.bind(this))},e.prototype.embedVideo=function(t){var e=t.dataset.autoplay||"0";t.innerHTML=a({id:t.id.split(/embedded-video-/).pop(),autoplay:e})},e}(i.a);e.default=c},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(15),s=o(19),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/handleClick"]},enumerable:!0,configurable:!0}),e.prototype.handleClick=function(t){var e=this;t.preventDefault();var o=Object(r.import_user)(),n=Object.assign({successRedirect:""},this.dataset),i=this.dataset.onlyLogin?this.app.requireLogin(this.dataset.loginMotivation,n):this.app.requireLoginAndJoin(n);Promise.all([o,i]).then(function(){e.tryChangeForm()}).catch(function(t){console.error(t)})},e.prototype.tryChangeForm=function(){this.dataset.trueForm?this.revealTrueForm():this.reloadPage()},e.prototype.reloadPage=function(){this.dataset.successRedirect?location.href=this.dataset.successRedirect:location.reload()},e.prototype.revealTrueForm=function(){for(var t=this,e=this.root.cloneNode(),o=this.root.childNodes;o.length;)e.appendChild(o[0]);e.dataset.vce=e.dataset.trueForm;var n=this.root.parentNode,i=this.root.nextSibling;this.root.remove(),n.insertBefore(e,i),s.VComponent.create(e).then(function(o){o.isTransmuted=!0,o.on("click-completed",function(){t.reloadPage()}),o.initPromise.then(function(){e.click()},100)})},e}(i.a);e.default=a},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(8),r=o.n(i),s=o(3),a=o(2),c=function(t){return t},l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){var e=this;return this.app.viewport.onResize(this,this.layout),this.app.on("scroll",function(t){return e.layout()}),this.offset=50,t.prototype.init.call(this)},e.prototype.bindDomEvents=function(){var e=this;return this.monitor&&this.monitor.destroy(),this.monitor=r.a.create(this.root),this.monitor.stateChange(this.layout.bind(this)),Object(a.m)(function(t){e.root.classList.add("init"),e.root.classList.remove("cloak")}),t.prototype.bindDomEvents.call(this)},e.prototype.layout=function(){this.page&&(c("aside layout"),!this._monitorBinded&&this.mainMonitor&&(this._monitorBinded=!0,this.mainMonitor.stateChange(this.layout.bind(this))),this.app.viewport.isPcView&&(this.monitor.recalculateLocation(),this.monitor.update(),this.monitor.isInViewport&&this.shrinkForNext(),this.mainMonitor.isAboveViewport?this.mainMonitor.isBelowViewport?this.isCurrent?this.monitor.isBelowViewport?(c("aside layout is below"),this.monitor.unlock(),this.layoutStatic()):(this.monitor.lock(),this.root.style.position="fixed",this.isGiant?(this.root.style.bottom=0,this.root.style.removeProperty("top")):(this.root.style.removeProperty("bottom"),this.root.style.top=this.offset+"px")):c("aside layout not current"):this.isGiant?this.layoutStaticBottom():this.layoutStaticCurrent():this.layoutStatic()))},e.prototype.layoutStatic=function(){var t=this.page.main.getBoundingClientRect(),e=this.app.viewport.viewportTop;this.root.style.position="absolute",this.root.style.top=e+t.top-this.offset+"px",this.root.style.removeProperty("bottom")},e.prototype.layoutStaticBottom=function(){var t=this.page.main.getBoundingClientRect(),e=this.app.viewport.viewportTop;this.root.style.position="absolute",this.root.style.top=e+t.bottom-this.root.offsetHeight-this.offset+"px",this.root.style.removeProperty("bottom")},e.prototype.layoutStaticCurrent=function(){var t=this.app.viewport.viewportTop;"absolute"!==this.root.style.position&&(this.root.style.position="absolute",this.root.style.top=t+"px",this.root.style.removeProperty("bottom"))},e.prototype.shrinkForNext=function(){if(!this._shrinked){for(this._shrinked=!0;this.page.aside.offsetHeight>this.page.main.offsetHeight;){var t=this.page.aside.querySelectorAll("section.popular article.post"),e=t[t.length-1],o=e.closest("section.popular");if(e.remove(),o.querySelector("article.post")||o.remove(),!this.page.aside.querySelector("section.popular"))break}this.monitor.recalculateLocation(),this.layout()}},Object.defineProperty(e.prototype,"isCurrent",{get:function(){return this.page===this.pageLoader.currentPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainMonitor",{get:function(){return this._mainMonitor?this._mainMonitor:this.page&&this.page.main?this._mainMonitor=r.a.create(this.page.main,{top:this.offset}):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGiant",{get:function(){return this.monitor.height+this.offset>this.monitor.container.viewportHeight&&this.page.aside.offsetHeight<this.page.main.offsetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastPage",{get:function(){return this.pageLoader.pages[this.page.idx-1]},enumerable:!0,configurable:!0}),e}(s.a);e.default=l},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_lib_mod__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_lib_api__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5),_lib_utility__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),throttle_debounce__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(22),throttle_debounce__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(throttle_debounce__WEBPACK_IMPORTED_MODULE_4__),scrollmonitor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),scrollmonitor__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(scrollmonitor__WEBPACK_IMPORTED_MODULE_5__),_lib_json_storage__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10),cache={},debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},pageExclusionStorage=new _lib_json_storage__WEBPACK_IMPORTED_MODULE_6__.a({key:"page_exclusion_ids",expire:864e5}),NextPageLoader=function(_super){function NextPageLoader(){return null!==_super&&_super.apply(this,arguments)||this}return tslib__WEBPACK_IMPORTED_MODULE_0__.b(NextPageLoader,_super),NextPageLoader.prototype.init=function(){var t=this;return this.switchPage=Object(throttle_debounce__WEBPACK_IMPORTED_MODULE_4__.debounce)(100,this.switchPage.bind(this)),this.app.on("scroll",function(e){return t.updateNavigation()}),this.loadNext=this.loadNext.bind(this),this.nextPageList=tryGetNext(),_super.prototype.init.call(this)},NextPageLoader.prototype.bindDomEvents=function(){var t=this;return Object(_lib_utility__WEBPACK_IMPORTED_MODULE_3__.m)(function(e){var o=t.getPage(document);if(o){o.reported=!0,o.href=location.href;var n=t.app.qsChild("[data-vce=page-aside]");n.pageLoader=t,n.page=o,t.monitorNewPage(o),t.bindNextPage(),t.currentPage=o,n.layout()}}),_super.prototype.bindDomEvents.call(this)},NextPageLoader.prototype.monitorNewPage=function(t){var e=this;this.pages=this.pages||[];var o=scrollmonitor__WEBPACK_IMPORTED_MODULE_5___default.a.create(t.main,{top:-200}),n=this.pages.length;this.pages.push(Object.assign(t,{monitor:o,idx:n})),this.combineExclusion(t),o.enterViewport(function(){return e.switchPage(t)}),o.fullyEnterViewport(function(){return e.switchPage(t)}),t.main.querySelectorAll(".post-img").forEach(function(t){t.addEventListener("load",function(t){return e.layoutFollowingPageAside(n)})}),t.main.querySelectorAll("[data-vce=image],[data-vce=lazy-blog-like]").forEach(function(t){_lib_mod__WEBPACK_IMPORTED_MODULE_1__.a.get(t).on("load",function(t){return e.layoutFollowingPageAside(n)})})},NextPageLoader.prototype.layoutFollowingPageAside=function(t){for(var e=t;this.pages[++e];)_lib_mod__WEBPACK_IMPORTED_MODULE_1__.a.get(this.pages[e].aside).layout()},NextPageLoader.prototype.bindNextPage=function(){if(this.nextMonitor&&this.nextMonitor.destroy(),this.elNextPost=this.qs("section.next-post"),this.elNextPost){var t=[1,1600],e=Math.min(t[1],t[0]*this.app.viewport.viewportHeight);if(this.nextMonitor=scrollmonitor__WEBPACK_IMPORTED_MODULE_5___default.a.create(this.elNextPost,{top:e}),this.nextMonitor.enterViewport(this.loadNext),this.nextMonitor.isInViewport){if(debug("why you so short..."),this.loadCounter=this.loadCounter||0,this.loadCounter++,this.loadCounter>3)return void debug("OOPS");Object(_lib_utility__WEBPACK_IMPORTED_MODULE_3__.m)(this.loadNext)}else this.loadCounter=0}},NextPageLoader.prototype.getPage=function(t){var e=t.querySelector.bind(t);try{var o=e(".main-page article.main-post");return"none"===getComputedStyle(o).display&&(o=e(".main-page article.main-post.blocked-indicator")),{main:o,recommend:e(".main-page section.recommend"),next:e(".main-page section.next-post"),aside:e("[data-vce=page-aside]"),exclusion_list:e("script.exclusion_list"),style:e("style.custom"),bg:e(".global-bg"),title:e("title").innerText,analytic_script:e("script.ga_variables").innerHTML}}catch(e){console.error(e.stack),console.error(t.innerHTML)}},NextPageLoader.prototype.combineExclusion=function(t){var e=this;this.exclusion_obj=this.exclusion_obj||this.fetchExclusionObj(),this.new_exclusion=this.new_exclusion||{},t.exclusion_list?(t.exclusion_list.innerHTML.split(/\n/).forEach(function(t){e.exclusion_obj[t]=!0,e.new_exclusion[t]=!0}),this.writeExclusionObj(this.exclusion_obj)):debug("exclusion_not_found",t)},NextPageLoader.prototype.fetchExclusionObj=function(){var t={};return this.fetchExclusionStorageContent().forEach(function(e){return t[e]=!0}),t},NextPageLoader.prototype.fetchExclusionStorageContent=function(){return pageExclusionStorage.get()||[]},NextPageLoader.prototype.writeExclusionObj=function(t){var e=this.fetchExclusionStorageContent();Object.keys(t).forEach(function(t){var o=e.indexOf(t);if(-1!==o)return e.splice(o,1),void e.push(t);for(;e.length>=100;)e.shift();e.push(t)}),pageExclusionStorage.set(e)},NextPageLoader.prototype.loadNext=function(){var t=this;if(this.loading)debug("already loading, bye");else{var e=this.qs(".blocked-indicator");if(!(e&&e.getBoundingClientRect().width>0)){var o=this.nextPageList.length?this.nextPageList.shift():this.elNextPost.dataset.href;o&&(this.elNextPost.classList.add("loading"),this.loading=this.loadPage(o).then(function(e){var o=Object(_lib_utility__WEBPACK_IMPORTED_MODULE_3__.g)(e),n=t.getPage(o);if(n.href=t.elNextPost.dataset.href,!n.main){var i=new Error("bad response html");return Object.assign(i,{html:e,page:n}),Promise.reject(i)}return t.combineExclusion(n),n}).then(function(e){return t.renderNextPage(e)}).then(function(e){return delete t.loading}).catch(function(e){console.error(e),delete t.loading,t.elNextPost.classList.remove("loading")}))}}},NextPageLoader.prototype.renderNextPage=function(t){var e=this,o=[],n=document.createDocumentFragment(),i=Object(_lib_utility__WEBPACK_IMPORTED_MODULE_3__.f)('<div class="post-divider"></div>');return t.main.querySelector(".item-header")&&i.classList.add("wiki"),n.appendChild(i),n.appendChild(t.main),t.recommend&&n.appendChild(t.recommend),t.next&&n.appendChild(t.next),this.elNextPost.after(n),this.elNextPost.remove(),t.aside&&this.currentPage.aside.parentNode.appendChild(t.aside),o.push(_lib_mod__WEBPACK_IMPORTED_MODULE_1__.a.render(this.root).then(function(o){if(t.aside)return _lib_mod__WEBPACK_IMPORTED_MODULE_1__.a.create(t.aside).then(function(o){o.pageLoader=e,o.page=t})})),Promise.all(o).then(function(o){e.monitorNewPage(t),e.bindNextPage(),t.aside&&Object(_lib_utility__WEBPACK_IMPORTED_MODULE_3__.m)(function(e){return _lib_mod__WEBPACK_IMPORTED_MODULE_1__.a.get(t.aside).layout()})})},NextPageLoader.prototype.switchPage=function(t){this.currentPage!==t&&(this.currentPage=t,this.switchBg(t))},NextPageLoader.prototype.switchBg=function(t){if(!t.style)return Promise.resolve();var e=[this._switchingBg],o=t.style.innerHTML.match(/url\((.+)\)/);return o&&e.push(Object(_lib_utility__WEBPACK_IMPORTED_MODULE_3__.k)(o[1])),this._switchingBg=Promise.all(e).then(function(e){var o=document.querySelector("style.custom");o&&(o.after(t.style),o.remove())}).catch(function(t){return console.error(t)})},NextPageLoader.prototype.loadPage=function(t){if(cache[t])return cache[t];var e=new URL(t);e.searchParams&&e.searchParams.set("_refer_type",ServerData.referType);var o=ServerData.referType?Object.keys(this.new_exclusion):Object.keys(this.exclusion_obj);return cache[t]=Object(_lib_api__WEBPACK_IMPORTED_MODULE_2__.e)(e,{exclusion_list:o,loaded_pages:this.pages.length},"POST")},NextPageLoader.prototype.updateNavigation=function(){if(this.pages){var t,e=this.app.viewport.viewportHeight;this.pages.forEach(function(o){var n=o.main.getBoundingClientRect().top;t&&t.top>n||n<.5*e&&(t={page:o,top:n})}),t&&t.page.href!==location.href&&this.navigateTo(t.page)}},NextPageLoader.prototype.navigateTo=function(page){window.history.replaceState({},page.title,page.href),document.title=page.title,eval(page.analytic_script),ga("set","location",page.href),ga("sampling.set","location",page.href),collectTEA("predefine_pageview"),page&&!page.reported&&(ga("set","dimension7","infinite_scroll"),ga("sampling.set","dimension7","infinite_scroll"),ga("send","pageview"),ga("sampling.send","pageview"),page.reported=!0)},NextPageLoader}(_lib_mod__WEBPACK_IMPORTED_MODULE_1__.a);function tryGetNext(){try{var t=sessionStorage.getItem("infinite_scroll_posts")||"[]";return sessionStorage.removeItem("infinite_scroll_posts"),JSON.parse(t)||[]}catch(t){return[]}}__webpack_exports__.default=NextPageLoader},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(5),s=o(14),a=o(2),c=function(t){return t},l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){return this._tickBegin=Date.now(),this._timer=setTimeout(this._tick.bind(this)),this._timer_normalize=setTimeout(this._tick_normalize.bind(this)),this._members=[],this._count=0,this._remain=[],this._realcount=0,this._animating=!1,this._listMax=this._listMax||4,t.prototype.init.call(this)},Object.defineProperty(e.prototype,"listMax",{set:function(t){this._listMax=t},enumerable:!0,configurable:!0}),e.prototype.fetch=function(){return!this.loadFromLocal&&(this.loadFromLocal=!0,window.ServerData.members)?Promise.resolve(window.ServerData.members):Object(r.c)()},e.prototype.reload=function(){var t=this;this._reloading?c("already reloading!"):(c("reloading"),this._reloading=!0,this.fetch().then(function(e){if(!e||"number"!=typeof e.onlineMembersCount||!Array.isArray(e.onlineMembersList))throw new TypeError("invalid chat member info");if(0===e.onlineMembersCount)throw new Error("skip_load_empty_online");e.onlineMembersList.reverse();var o=t.app.qs(".community-livelayer-padding");if(o&&o.classList.remove("cloak"),0===t._members.length){for(t._remain=[],e.onlineMembersCount>=1.5*t._listMax&&t._remain.push(e.onlineMembersList.pop());e.onlineMembersList.length>t._listMax;)t._remain.push(e.onlineMembersList.pop());t._realcount=e.onlineMembersCount,t._updateAvatars(e.onlineMembersList),t._updateCount(e.onlineMembersCount),c("reload from zero")}else{var n=e.onlineMembersList.filter(function(e){return!t._hasMember(e.uid)});if(0===n.length)return;t._remain=n,t._realcount=e.onlineMembersCount,t._popRemain()}t._reloading=!1,c("reload success")}).catch(function(e){e&&"skip_load_empty_online"!==e.message&&console.warn(e),t._reloading=!1}))},e.prototype._tick=function(){var t=Date.now()-this._tickBegin;clearTimeout(this._timer),this._timer=setTimeout(this._tick.bind(this),t<6e4?8e3:t<6e5?18e3:t<36e5?4e4:12e4),document.hidden||this.reload()},e.prototype._tick_normalize=function(){if(clearTimeout(this._timer_normalize),this._timer_normalize=setTimeout(this._tick_normalize.bind(this),u(6e3,18e3)),!this._animating&&!document.hidden){var t=this._realcount!==this._count,e=this._remain.length>0;t&&e&&(Math.random()<.3?t=!1:e=!1),e&&this._popRemain(),t&&this._updateCount(this._getNextFixedCount())}},e.prototype._updateAvatars=function(t){var e=this,o=this.qs(".avatars");this._members=t,this._updatePopupIcon(),o.innerHTML="",Promise.all(this._members.map(function(t){return e._renderMemberAvatar(t)})).then(function(t){t.forEach(function(t){return o.append(t)}),e.root.classList.add("active"),e.qsChildren("[data-vce=overflow-aware]").forEach(function(t){return t.layout()})})},e.prototype._updateCount=function(t){var e=this;c("update_count"+t);var n=!this._animating;n&&(this._animating=!0),function(t,e,n){var i=o(318);if(e=(parseInt(e)||0).toString(),n=(parseInt(n)||0).toString(),e===n)return Promise.resolve(!0);t.innerHTML=i({count:e,oldCount:n});var r=t.querySelector(".num");return r.remove(),a.q(t,{member_count:r.outerHTML}),function(t,e){var o=(e=(parseInt(e)||0).toString()).length,n=Array.from(t.querySelectorAll(".digit:not(.removing)"));if(n.length>o)n.slice(0,n.length-o).forEach(function(t){a.b(t).then(function(e){t.classList.add("removing"),a.b(t,500).then(function(e){t.remove()})}),t.setAttribute("class","digit digit-0")}),n=n.slice(n.length-o);else for(;n.length<o;){var i=document.createElement("span");i.classList.add("digit","digit-0"),i.innerText="x",t.prepend(i),n=Array.from(t.querySelectorAll(".digit:not(.removing)"))}return"1"===e?t.parentNode.classList.add("singular"):t.parentNode.classList.remove("singular"),a.m(function(t){n.forEach(function(t,o){t.innerText="x",t.dataset.digit=e[o],t.setAttribute("class","digit digit-"+e[o])})}),Promise.all(n.map(function(t){return a.b(t,1100)}))}(t.querySelector(".num"),e)}(this.qs(".member-counter"),t,this._count).then(a.t(1.2)).then(function(t){c("update_count end"),n&&(e._animating=!1)}),this._count=t},e.prototype._popRemain=function(){var t=this;if(c("popremain"),!this._animating&&!document.hidden){for(var e;(e=this._remain.shift())&&this._hasMember(e.uid););if(e){for(this._members.push(e);this._members.length>this._listMax;)this._members.shift();this._updatePopupIcon();var n=this.qs(".avatars");this._animating=!0,this._renderMemberAvatar(e).then(function(t){var i=new Date-new Date(e.createdTime)<18e5,r=o(319)({isJoin:i}),c=a.f(r);c.children[0].before(t);var l=c.querySelector(".nickname");return l.innerText=e.nickname,s.a.run(l),c.style.transform="translateX("+(document.body.offsetWidth<=1159?.3*document.body.offsetWidth:220)+"px)",a.m(function(t){return c.style.transform=""}),n.append(c),a.b(c,4e3)}).then(a.t(1)).then(function(e){t._updateCount(t._count+1),[].forEach.call(n.children,function(e){e.dataset.uid&&!t._hasMember(e.dataset.uid)&&a.m(function(){e.classList.add("dead")})}),a.r(n,{transform:"translateX(0)",transitionDuration:"0"}),a.m(function(){a.r(n,{transform:"translateX(0.8em)",transitionDuration:"300ms"}),a.r(e,{transform:"translateX(-0.8em)",transitionDuration:"300ms"})});var o=[];return e.classList.add("bigger"),o.push(a.b(e,400).then(function(t){return e.classList.add("fading"),a.b(e,400)})),o.push(a.b(n,800)),Promise.all(o).then(function(t){return e})}).then(function(e){if(a.u(t.root),a.r(n,{transform:"translateX(0)",transitionDuration:"0"}),e.after(a.f(e.querySelector(".avatar").outerHTML)),e.remove(),n.querySelectorAll(".dead").forEach(function(t){return t.remove()}),a.v(t.root),t._remain.length>0&&Math.random()<.2)return t._animating=!1,a.m(function(e){return t._popRemain()}),Promise.reject({doubleStrike:!0})}).then(a.t(6)).then(function(e){t._animating=!1}).catch(function(e){if(t._animating=!1,!e||!e.doubleStrike)return Promise.reject(e)})}}},e.prototype._getNextFixedCount=function(){var t=this._realcount,e=this._count;return u(Math.min(t,e),Math.max(t,e))},e.prototype._renderMemberAvatar=function(t){return a.k(t.icon?t.icon.replace(/_00\.(\w+)$/,"_68.$1"):"/static/img/user-icon-placeholder.png").then(e,function(){return a.k("/static/img/user-icon-placeholder.png").then(e)});function e(e){return e.classList.add("avatar"),e.dataset.uid=t.uid,e}},e.prototype._updatePopupIcon=function(){this.children["btn-popup"][0].root.dataset.popupIcons=this._members.slice(-3).map(function(t){return t.icon?t.icon.replace(/_00\.(\w+)$/,"_128.$1"):"/static/img/user-icon-placeholder.png"}).join("#")},e.prototype._hasMember=function(t){return this._members.some(function(e){return e.uid===t})},e}(i.a);function u(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}e.default=l},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(5),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/[data-language]/onPick"]},enumerable:!0,configurable:!0}),e.prototype.onPick=function(t){var e=t.currentTarget.dataset.language;Object(r.g)(e).then(function(t){return console.log(t)})},e}(i.a);e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(8),r=o.n(i),s=o(3),a=o(2),c=o(14),l=o(5),u=o(168),h=[["Reply to:",0],["Responder a:",0],["回复:",0],["Responder para:",0],["رد على:"],["Ответить:",0],["에게 답장"],["Répondre à:",0],["Antworte auf:",0]],p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){return this.extraComments=[],this.app.viewport.onResize(this,this.layout),t.prototype.init.call(this)},Object.defineProperty(e.prototype,"events",{get:function(){return["click/li.comment/onClickComment","click/.state-switch/onClickStateSwitch","click/.comment-input-bar.placeholder/onClickCommentInputPlaceholder"]},enumerable:!0,configurable:!0}),e.prototype.setupScrollMonitors=function(){var t=this,e=this.flushLiveState.bind(this);this.articleScrollMonitor&&this.articleScrollMonitor.destroy(),this.articleScrollMonitor=r.a.create(this.parentArticle,{top:-200}),this.commentScrollMonitor&&this.commentScrollMonitor.destroy(),this.commentScrollMonitor=r.a.create(this.root,{top:0}),Object(a.m)(function(o){var n=t,i=n.articleScrollMonitor,r=n.commentScrollMonitor;i.partiallyExitViewport(e),i.exitViewport(e),i.enterViewport(e),i.fullyEnterViewport(e),r.exitViewport(e),r.enterViewport(e)})},e.prototype.realInitialize=function(){if(this.layout(),this.initComments(),this.flushLiveState(),!e.first){e.first=!0;var t=location.hash;"#comment-more"===t?ServerData.isMember&&this.qs(".read-more-comments").click():"#comment-list"===t?this.app.viewport.scrollToElement(this.root,5):0===t.indexOf("#comment-")&&this.highlightOneComment(t.slice(1))}},e.prototype.highlightOneComment=function(t){var e=this.qs('a[name="'+t+'"]');if(e){var o=e.closest("article.comment");this.app.viewport.scrollToElement(o,5),o.classList.add("highlight"),Object(a.o)(o),o.classList.remove("highlight");var n=o.querySelector(".read-more");n&&ServerData.isMember&&n.click();var i=o.querySelector(".height-toggle");i&&ServerData.isMember&&i.click()}},e.prototype.bindDomEvents=function(){var o=this;Object(a.m)(function(t){return o.realInitialize()}),this.elContent=this.qs(".live-comment>.content"),this.elCommentContainer=this.elContent.querySelector("ul.comments"),this.parentArticle=this.root.closest("article.post"),this.setupScrollMonitors(),this.members||(this.members=this.app.qsChild(".live-member-list"),(!ServerData.members||ServerData.members.onlineMembersCount<=0)&&this.root.classList.add("empty-member"));var n="article.post>section.info .counters,article.post>.item-header .counters,article.post>.counters",i=this.parentArticle.querySelector(n);if(i){this.parentArticle.querySelectorAll(n).forEach(function(t){return t.remove()});var r=i.querySelector(".amino-icon-heart-o");if(!this.app.isMobile){var s=r.cloneNode(!0);s.classList.remove("amino-icon-heart-o"),s.classList.add("amino-icon-heart"),r.after(s)}this.elContent.appendChild(i)}if(!this.app.isMobile){var c=this.qs(".comment-input-bar.main");if(!this.elCommentInput){var l=this.elContent.querySelector(".comment-input-bar.placeholder");c?(this.elCommentInput=c.cloneNode(!0),this.elCommentInput.classList.remove("main"),this.elContent.appendChild(this.elCommentInput),Object(a.m)().then(function(t){return o.renderChildren()}).then(function(t){var n=e.get(o.elCommentInput);o.bindCommentBar(n)})):this.elCommentInput=l}}return t.prototype.bindDomEvents.call(this)},e.prototype.bindCommentBar=function(t){var e=this;t.on("blur",function(o){t.content||(e._inputing=!1,e.flushLiveState())}).on("submit",function(o){t.startLoading();var n=Object(a.c)(e.dataset,"target");Object(l.k)(Object.assign(n,{content:o})).then(function(o){e.app.sendGa({eventCategory:"Comment New",eventAction:"create",eventLabel:"live_comment"}),collectTEA("user_comments",{types:n.logType,type:"New",content_type:"Text",source:"Live Comment"}),t.clear(),t.stopLoading();var i=d(Object(a.f)(o.html));e.extraComments.push(i),e.comments.unshift(i),e.commentsCount++,e.commentsCount<=1&&e.initComments(),e.popComment(),t.focus()}).catch(e.app.globalCatcher).catch(e.app.toastErrorHandler(function(e){return t.stopLoading()}))})},e.prototype.initComments=function(){var t=[].slice.call(this.qsa("article.comment"));this.comments=t.map(d).concat(this.extraComments).filter(function(t){return t&&t.text}),this.commentsCount=this.comments.length},e.prototype.popComment=function(){var t=this;if(this.liveState.show&&(this.setPopTimeout(),"hidden"!==document.visibilityState)){var e=(this.comments||[]).shift();if(!e){if(this.commentsCount<3)return;this.initComments(),e=this.comments.shift()}var o=Object(a.f)(u(e));o._comment=e,this.setCommentMessageMaxWidth(o.querySelector(".comment>.message")),c.a.run(o),this.elCommentContainer.appendChild(o),this.elCommentContainer.children.length<3?this.elCommentContainer.children.length<this.commentsCount&&Object(a.m)(function(e){return t.popComment()}):(Object(a.u)(this.elCommentContainer),this.elCommentContainer.classList.add("newcoming"),Object(a.v)(this.elCommentContainer),this.elCommentContainer.classList.remove("newcoming"),[].slice.call(this.elCommentContainer.children,0,-2).forEach(function(t){t.classList.add("dying"),Object(a.b)(t,1e3).then(function(e){t.remove()})}))}},e.prototype.flushLiveState=function(){var t=this,o=this.liveState,n=!this.lastState;n&&Object(a.u)(this.root),(n||Object.keys(o).some(function(e){return o[e]!==t.lastState[e]}))&&(this.lastState=o,Object.keys(o).forEach(function(e){return o[e]?t.root.classList.add("state-"+e):t.root.classList.remove("state-"+e)}),o.show&&(this.elCommentContainer.children.length<2?this.popComment():this.setPopTimeout())),o.endcap||this.elContent.querySelector(".live-member-list")||!this.members||this.elContent.querySelector(".upper").appendChild(this.members.root),n&&Object(a.v)(this.root),o.commentinput&&e.get(this.elCommentInput).focus()},e.prototype.setPopTimeout=function(t){var e=this;void 0===t&&(t=5e3),this.commentsCount<3||(clearTimeout(this.timeout),this.timeout=setTimeout(function(t){return e.popComment()},t))},Object.defineProperty(e.prototype,"liveState",{get:function(){var t={hide:this._hide_comments,endcap:!1,commentarea:!1,show:!1,commentinput:this._inputing};return this.articleScrollMonitor.isBelowViewport&&this.articleScrollMonitor.isInViewport?this.commentScrollMonitor&&this.commentScrollMonitor.isInViewport?t.endcap=!0:t.show=!0:t.endcap=!0,t},enumerable:!0,configurable:!0}),e.prototype.layout=function(){var t=this;this.parentWidth=this.parentArticle.getBoundingClientRect().width,this.elContent.style.width=this.parentWidth+"px",this.elContent.classList.add("init"),this.elContent.querySelectorAll(".comment>.message").forEach(function(e){return t.setCommentMessageMaxWidth(e)})},e.prototype.setCommentMessageMaxWidth=function(t){this.app.viewport.isPcView?t.style.maxWidth=this.parentWidth-100+"px":t.style.removeProperty("maxWidth")},e.prototype.onClickComment=function(t){var e=this.app.qs(".comment-like-share.collapse .collapse-counter");e&&e.click();var o=t.currentTarget._comment;if(document.body.contains(o.el)){var n=o.el.getBoundingClientRect();this.app.setViewportTop(this.app.viewport.viewportTop+n.top-117),o.el.classList.add("highlight"),Object(a.o)(o.el),o.el.classList.remove("highlight"),this.app.sendGa({eventCategory:"Live comment thread",nonInteraction:!0}),collectTEA("click_live_comment_thread")}},e.prototype.onClickStateSwitch=function(t){this._hide_comments=!this._hide_comments,this.flushLiveState()},e.prototype.onClickCommentInputPlaceholder=function(t){this._inputing=!0,this.flushLiveState()},e}(s.a);function d(t){var e=t.querySelector(".avatar-aside .avatar"),o=t.querySelector(".carousel-item>[data-vce=carousel-img]");o&&o.closest("article.comment")!==t&&(o=null);var n="";return t.querySelectorAll(".comment-text p").forEach(function(e){if(e.closest("article.comment")===t){var o=e.textContent;if(o.trim())h.some(function(t){var e=o.indexOf(t[0]);return t[1]&&e===t[1]||!t[1]&&-1!==e})||(n+=o+" ")}}),{avatar:e.dataset.src||e.src,media:o&&(o.dataset.src||o.src),text:n,el:t}}e.default=p},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.setup=function(){t.prototype.setup.call(this),this.pageToken=this.root.dataset.pageToken,this.readMore=parseInt(this.root.dataset.readMore,10),this.base=this.root.dataset.base},e.prototype.shouldStartWatcher=function(){return this.readMore>0&&!!this.pageToken},e.prototype.shouldEndWatcher=function(){return this.loadedPage>this.readMore||!this.pageToken},e.prototype.getNextURL=function(){var t=new URL(this.base,location.origin);return t.searchParams.set("page_token",this.pageToken),t},e.prototype.willFetchURL=function(t){Date.now()-this._init>200&&Math.random()<=.1&&this.app.sendGa({eventCategory:"Listview",eventAction:"Load",eventValue:this.loadedPage,nonInteraction:!0})},e.prototype.didFetchPage=function(t){this.pageToken=t.dataset.pageToken},e}(o(16).default);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.setup=function(){t.prototype.setup.call(this),this.curPage=parseInt(this.root.dataset.curPage,10),this.maxPage=parseInt(this.root.dataset.maxPage,10),this.readMore=parseInt(this.root.dataset.readMore,10),this.base=this.root.dataset.base,this.terminated=!1},e.prototype.shouldStartWatcher=function(){return this.readMore>0&&this.curPage<this.maxPage},e.prototype.shouldEndWatcher=function(){return this.terminated||this.loadedPage>this.maxPage||this.morePage>=this.readMore},e.prototype.getNextURL=function(){var t=new URL(this.base,location.origin);return t.searchParams.set("page",String(this.curPage+1)),t},e.prototype.willFetchURL=function(t){"post-list"===this.listName&&Date.now()-this._init>200&&Math.random()<=.1&&this.app.sendGa({eventCategory:"Listview",eventAction:"Load",eventValue:this.curPage+1,nonInteraction:!0})},e.prototype.didFetchPage=function(t){var e=t.querySelectorAll(".list-item");this.curPage++,0===e.length&&(this.terminated=!0)},e}(o(16).default);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/.lightbox-thumb/onClickThumb"]},enumerable:!0,configurable:!0}),e.prototype.bindDomEvents=function(){t.prototype.bindDomEvents.call(this),this.reloadContent()},e.prototype.reloadContent=function(){this.elThumbs=[].slice.call(this.qsa(".lightbox-thumb"))},e.prototype.getCurrent=function(){var t=this.elThumbs[this.cur].querySelector(".lightbox-item");return t?t.dataset:null},e.prototype.onClickThumb=function(t){var e=this;if(t.preventDefault(),this.cur=this.elThumbs.indexOf(t.currentTarget),-1!==this.cur&&!this.loadingLightbox){if(this.autoplay=!0,this.popup)this.popup.render(!0),this.app.openModal(this.popup);else{this.loadingLightbox=!0;var o=this.getOption();this.app.openPopup("lightbox",o).then(function(t){e.loadingLightbox=!1,e.popup=t})}Object(r.m)(function(t){e.app.sendGa({eventCategory:"Lightbox",eventAction:"Open",nonInteraction:!0})})}},e.prototype.move=function(t){for(this.cur+=t,this.autoplay=!1;this.cur<0;)this.cur+=this.elThumbs.length;for(;this.cur>=this.elThumbs.length;)this.cur-=this.elThumbs.length;this.popup.render(!0)},e.prototype.getOption=function(){var t=this;return{container:t,get current(){return t.getCurrent()},get pager(){return{current:t.cur+1,max:t.elThumbs.length}},get autoplay(){return t.autoplay},hideControl:t.dataset.hideControl}},e.prototype.isLast=function(){return this.cur===this.elThumbs.length-1},e.prototype.isFirst=function(){return 0===this.cur},e}(i.a);e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(25),s=o(5),a=o(320),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){var e=this;r.a(this,this.load),this.votesCount=+this.dataset.votesCount,this.moreVotes=this.qs(".more-votes"),this.voteIcon=this.qs(".vote-icon");var o=this.qsChild('[data-vce="btn-like"]');return o&&o.on("success",function(t){e.handleLikeBtn(t)}),t.prototype.bindDomEvents.call(this)},e.prototype.handleLikeBtn=function(t){var e,o=t.voteValue;this.votedMe="0"===o?null:{href:ServerData.memberUrl,profile:{icon:ServerData.memberIcon}},this.loaded&&(this.votedMe?this.data=(e=[this.votedMe]).concat.apply(e,this.data):this.data=[].filter.call(this.data,function(t){return t.href!==ServerData.memberUrl}),this.originalLen=this.data.length,this.drawIcons())},e.prototype.load=function(){var t=this;if(!this.loading&&!this.loaded){this.root.classList.add("loading");var e=this.dataset,o=e.postType,n=e.postId,i=e.isGlobal;this.loading=Object(s.d)(o,n,!!i).then(function(e){return t.registerDraw(e)}).then(function(){return t.drawIcons()}).catch(function(){return t.cleanup()})}},e.prototype.registerDraw=function(t){var e;this.votedMe&&(t=(e=[this.votedMe]).concat.apply(e,t)),this.originalLen=t.length,this.data=t,this.app.viewport.onResize(this,this.drawIcons)},e.prototype.cleanup=function(){this.root.classList.remove("loading"),this.loading=null},e.prototype.drawIcons=function(){var t=this.qs(".user-list"),e=this.moreVotes,o=this.voteIcon,n=this.computeDisplaySize(t);this.data.length=Math.min(this.originalLen,n),t.classList.remove("loading"),function(t){for(var e=window.devicePixelRatio>1?"_128":"_68",o=0,n=t.length;o<n;o++){var i=t[o];i&&i.profile&&"string"==typeof i.profile.icon&&(i.profile.icon=i.profile.icon.replace("_00",e))}}(this.data),t.innerHTML=a(this.data),o&&t.prepend(o),e&&n<this.votesCount&&t.appendChild(e),this.loaded||(this.emitNextTick("load"),this.loaded=!0),this.cleanup()},e.prototype.computeDisplaySize=function(t){var e=t.clientWidth+8,o=this.app.viewport.isPhoneView&&this.voteIcon?1:0;return Math.floor(e/48)-1-o},e}(i.a);e.default=c},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){var e=this.app.inviteStorage.get();return e&&e.ndcId===ServerData.community.ndcId&&(this.root.href="/invite/"+e.code),t.prototype.bindDomEvents.call(this)},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/onClick/1"]},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){t.preventDefault(),t.stopPropagation();var e=this.dataset,o={icon:e.authorIcon,influencerInfo:"true"===e.authorIsInfluencer?{}:null};this.app.requestJoinOrRenewFanclub(o,e.motivation)},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(5),s=o(2),a=o(14),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){var t=this,e=this.children.direct_join;if(e&&e[0]){var o=e[0];o.on("joined",function(e){var o=e.ndcId;t.fetchProfileHTML(o)}),o.on("success",function(e){Object(s.b)(t.root,5e3).then(function(){return t.templatePromise}).then(function(e){t.showJoinAnimation(e)})}),this.root.style.height=this.root.clientHeight+"px"}},e.prototype.showJoinAnimation=function(t){var e=this;this.root.classList.add("hide-community-info","user-loggedin"),this.root.style.height="240px";var o=this.qs(".sidebar-profile-container");Object(s.b)(this.root,5e3,!0).then(function(){e.root.classList.add("mount-user-profile"),o.outerHTML=t,e.renderChildren(),a.a.run(e.qs(".title")),Object(s.o)(e.root),e.root.classList.remove("mount-user-profile"),Object(s.b)(e.qs(".title")).then(function(){location.reload()})})},e.prototype.fetchProfileHTML=function(t){this.templatePromise=Object(r.a)("/partial/"+t+"/community-side-profile")},e}(i.a);e.default=c},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(23),r=o(165),s=o.n(r),a=o(2),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){var e=this,o=Object(a.c)(this.root.dataset,"headroom");return o.onPin=function(){return e.emit("pin")},o.onUnpin=function(){return e.emit("unpin")},this.headroom=new s.a(this.root,o),this.headroom.init(),t.prototype.bindDomEvents.call(this)},e.prototype.ignoreScroll=function(){this.headroom.lastKnownScrollY=this.headroom.getScrollY()},e}(i.default);e.default=c},function(t,e,o){"use strict";o.r(e);var n=o(0);function i(t){var e=t&&t.querySelector("article.post > a.block");return e?e.href:""}var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.setup=function(){t.prototype.setup.call(this),this.terminated=!1,this.urls=[].map.call(this.qsa(".list-item"),i)},e.prototype.shouldStartWatcher=function(){var t=this.elPaginator.querySelector(".fa-forward");return!!t&&(this.nextUrl=t.closest("a").href,!0)},e.prototype.shouldEndWatcher=function(){return this.terminated},e.prototype.getNextURL=function(){return this.nextUrl},e.prototype.shouldIncludeItem=function(t){var e=i(t);return!(e&&this.urls.indexOf(e)>=0)&&(this.urls.push(e),!0)},e.prototype.willFetchURL=function(t){Date.now()-this._init>200&&Math.random()<=.1&&this.app.sendGa({eventCategory:"Listview",eventAction:"Load",eventValue:this.loadedPage,nonInteraction:!0})},e.prototype.didFetchPage=function(t){var e=t.querySelector(".paginator");if(e&&e.querySelector(".fa-forward")){var o=e.querySelector(".fa-forward").closest("a");this.nextUrl=o.href}else this.terminated=!0},e}(o(16).default);e.default=r},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){var e=this;return this.children.image&&this.children.image[0].on("loading",function(t){return e.root.classList.add("loading")}).on("load",function(t){return e.root.classList.remove("loading")}),t.prototype.init.call(this)},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){this.index=0,this.images=this.qsa("img"),this.delay=parseInt(this.root.dataset.delay,10)||5e3,this.images.length<=1||(this.loop=this.loop.bind(this),setTimeout(this.loop,this.delay))},e.prototype.loop=function(){var t=this.images[this.index],e=(this.index+1)%this.images.length,o=this.images[e];t.classList.remove("show"),o.hasAttribute("src")?(this.index=e,o.classList.add("show"),setTimeout(this.loop,this.delay)):(o.src=o.dataset.src,o.onload=this.loop)},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=o(5),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){var e=this,o=this.qsChild('[data-vce-name="direct_join"]');o&&o.on("success",function(t){return e.gotoHome()});var n=window.top;return n&&n!==window&&n.origin===location.origin&&n.postMessage({type:"forceChatExit",payload:ServerData.community.ndcId.replace("x","")},location.origin),t.prototype.init.call(this)},e.prototype.bindDomEvents=function(){var e=this;return Object(r.m)(function(t){if(e.dataset.now&&!e.app.viewport.isPcView)e.route("now",!0);else{var o=location.hash.match(/^#?(.*?)(\?.*)?$/),n=o?o[1]:"";e.app.viewport.isPcView&&"now"===n?e.route("",!0):e.route(n,!0)}}),"etc"===Object(r.d)()?this.root.classList.add("platform-etc"):this.root.classList.add("platform-mobile"),this.root.classList.contains("blocked")&&this.qsChildren(".choice-deeplink .btn-download-option").forEach(function(t){return t.on("handle_click",function(t){setTimeout(function(t){return e.route("")},1e3)})}),t.prototype.bindDomEvents.call(this)},Object.defineProperty(e.prototype,"events",{get:function(){return["click/a[href]/onClickHashLink","keyup input/input[name=invite_code]/onInputCode","click/button[name=submit_invite]/onClickSubmitInvite","click/button[name=submit_request]/onClickSubmitRequest","click/button[name=request_switch]/onClickRequestSwitch","click/button[name=enter-amino]/onClickEnterAmino"]},enumerable:!0,configurable:!0}),e.prototype.onClickHashLink=function(t){if(!i.a.get(t.currentTarget)){var e=t.currentTarget.href;-1!==e.indexOf("#")&&this.route(e.slice(e.indexOf("#")+1))}},e.prototype.onClickSubmitInvite=function(t){var e=this,o=t.currentTarget.closest(".content").querySelector("input[name=invite_code]"),n=o.value.trim();n?(this.app.sendGa({eventCategory:"Submit Code"}),t.currentTarget.disabled=!0,Object(s.f)(ServerData.community.ndcId.slice(1),n).then(function(t){e.app.sendGa({eventCategory:"Join",eventAction:"succeed",nonInteraction:!0}),e.updateState("join",{step:"success"})},function(n){e.app.sendGa({eventCategory:"Join",eventAction:"failed",nonInteraction:!0});var i=e.dataset.joinType;return collectTEA("joins_a_community",{type:"0"===i?"join":"1"===i?"request invite":"closed",source:"Page Join Now",listing_status:{2:"Listed",1:"Unlisted"}[ServerData.community.listedStatus],template:ServerData.community.templateId}),o.value="",t.currentTarget.disabled=!0,Promise.reject(n)}).catch(this.app.globalCatcher).catch(function(t){t.response&&802===t.response.api_status_code||console.error(t),e.updateState("join",{step:"retry"})})):this.updateState("join",{step:"retry"})},e.prototype.onClickSubmitRequest=function(t){var e=this,o=t.currentTarget.closest(".content").querySelector("textarea[name=request_message]"),n=o.value.trim();n&&(this.app.sendGa({eventCategory:"Submit Request",eventAction:"submit"}),collectTEA("submit_request"),t.currentTarget.disabled=!0,Object(s.j)(ServerData.community.ndcId.slice(1),n).then(function(t){e.gotoJoin()},function(e){return o.value="",t.currentTarget.disabled=!1,Promise.reject(e)}).catch(this.app.globalCatcher).catch(function(t){t.response&&802===t.response.api_status_code||console.error(t),e.gotoHome()}))},e.prototype.onClickRequestSwitch=function(t){this.updateState("join",{step:t.currentTarget.dataset.step})},e.prototype.onClickEnterAmino=function(t){var e=this,o=i.a.get(t.currentTarget);o.startRequest(),setTimeout(function(){o.requestFinish(),e.gotoHome()},1e3)},e.prototype.onInputCode=function(t){var e=t.currentTarget.closest(".content"),o=e.querySelector("button[name^=submit]");13!==t.keyCode&&"Enter"!==t.key||o.click(),e.classList.contains("private-retry")?t.currentTarget.value.trim()&&(this.updateState("join",{step:"init",code:t.currentTarget.value}),t.currentTarget.value=""):e.classList.contains("request-retry")?t.currentTarget.value.trim()&&(this.updateState("join",{step:"invite",code:t.currentTarget.value}),t.currentTarget.value=""):o.disabled=!t.currentTarget.value.trim()},e.prototype.gotoHome=function(){location.href="/c/"+ServerData.community.endpoint+"/home/"},e.prototype.gotoJoin=function(){location.href="/c/"+ServerData.community.endpoint+"/join/"},Object.defineProperty(e.prototype,"storedInviteCode",{get:function(){var t=this.app.inviteStorage.get();return t&&t.ndcId===ServerData.community.ndcId?t.code:null},enumerable:!0,configurable:!0}),e.prototype.route=function(t,e){var o=this;if(e&&Object(r.u)(this.root),this.app.isMobile&&("now"===t||this.root.classList.contains("invite")))this.root.classList.add("active"),"openapp-fail"===t&&this.root.classList.add("openapp-fail"),Object(r.m)(function(t){return requestAnimationFrame(function(t){return o.root.classList.add("focus-in")})});else if(this.app.isMobile||"now"!==t||this.root.dataset.requestSent)this.root.classList.remove("join-now","active","focus-in","openapp-fail"),history.replaceState(null,document.title,location.pathname+location.search);else{var n={0:"open",1:"request_approval",2:"invite_only"}[this.dataset.joinType];history.replaceState(null,document.title,location.pathname+location.search),this.app.requireLogin("Sign in to join this Amino.",{eventLabel:this.dataset.eventLabel}).then(function(t){if(t){if(ServerData.isMember)return void location.reload();o.app.sendGa(Object.assign({eventCategory:"Join",eventAction:"auto",eventLabel:n,nonInteraction:!0}))}location.hash="now",o.switchJoinNow()})}e&&(this.root.classList.add("inited"),Object(r.v)(this.root))},e.prototype.switchJoinNow=function(){var t=this;this.root.classList.add("join-now"),Object(r.m)(function(e){return requestAnimationFrame(function(e){return t.root.classList.add("focus-in")})}),this.updateState("join",{step:"init"})},Object.defineProperty(e.prototype,"stateRender",{get:function(){var t;return{join:(t={},t[".private"]=function(t,e){var o="2"===this.dataset.joinType&&"init"===e.step;if(Object(r.x)(t,o,"active"),o&&(e.code||this.storedInviteCode)){var n=t.querySelector("[name=invite_code]");n.value=e.code||this.storedInviteCode,t.querySelector("button[name^=submit]").disabled=!n.value.trim(),n.focus()}},t[".private-retry"]=function(t,e){Object(r.x)(t,"2"===this.dataset.joinType&&"retry"===e.step,"active")},t[".request"]=function(t,e){Object(r.x)(t,"1"===this.dataset.joinType&&"init"===e.step,"active")},t[".request-invite"]=function(t,e){var o="1"===this.dataset.joinType&&"invite"===e.step;if(Object(r.x)(t,o,"active"),o&&(e.code||this.storedInviteCode)){var n=t.querySelector("[name=invite_code]");n.value=e.code||this.storedInviteCode,t.querySelector("button[name^=submit]").disabled=!n.value.trim(),n.focus()}},t[".request-retry"]=function(t,e){Object(r.x)(t,"1"===this.dataset.joinType&&"retry"===e.step,"active")},t[".success"]=function(t,e){var o=this,n="success"===e.step;if(Object(r.x)(t,n,"active"),n){var i=this.constructor.get(t.querySelector(".btn-join"));Object(r.m)(function(t){return i.startRequest()}),setTimeout(function(t){return i.requestFinish().then(function(t){return o.gotoHome()})},400)}},t)}},enumerable:!0,configurable:!0}),e}(i.a);e.default=a},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=o(101),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){var e=this;return document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(clearTimeout(e.timeout),e.timeout=null,e.clicked=!1)}),t.prototype.init.call(this)},e.prototype.bindDomEvents=function(){var e=this;return this.deviceType=Object(r.d)(),"Android"===this.deviceType?(this.deeplink=this.root.dataset.deeplinkAndroid,this.storeLink=this.root.dataset.storeAndroid):"iOS"===this.deviceType&&(this.deeplink=this.root.dataset.deeplinkIos,this.storeLink=this.root.dataset.storeIos),this.deeplink||(this.deeplink=this.root.dataset.deeplink),!this.storeLink&&"etc"!==this.deviceType&&ServerData.community&&(this.storeLink=this.root.dataset.store||ServerData.community[Object(r.d)()]),!this.root.href&&this.deeplink?this.href=this.root.href=this.deeplink:this.href=this.root.href,Object(r.m)(function(){e.clipboardMod&&e.clipboardMod.clipboard.destroy(),e.root.dataset.copyText&&"etc"!==e.deviceType&&(e.clipboardMod=new s.default(document.createElement("div")),e.clipboardMod.root.dataset.silence=1,e.clipboardMod.root.dataset.clipboardText=e.root.dataset.copyText)}),t.prototype.bindDomEvents.call(this)},Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/onClick"]},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){var e=this;this.emit("handle_click"),t.preventDefault();var o=Date.now();this.clicked=!0,clearTimeout(this.timeout),this.clipboardMod&&this.clipboardMod.root.click(),this.timeout=setTimeout(function(){e.clicked&&e.timeout&&(e.clicked=!1,e.timeout=null,Date.now()-o>=2e3||(e.storeLink?window.location.href=e.storeLink:e.href&&(window.location.href=e.href)))},this.deeplink?1e3:20),this.deeplink&&(this.emit("try_deeplink"),Object(r.i)()?this.openInIFrame(this.intentify(this.deeplink)):window.location.href=this.deeplink)},e.prototype.intentify=function(t){var e=t.split(":");return"intent:"+e[1]+"#Intent;scheme="+e[0]+";S.browser_fallback_url="+encodeURIComponent(this.storeLink||this.href)+";end"},e.prototype.openInIFrame=function(t){var e=document.createElement("iframe");e.onload=e.onerror=function(){e.parentNode.removeChild(e)},e.src=t,e.style.display="none",document.body.appendChild(e)},e}(i.a);e.default=a},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["mouseenter/@root/toggleHighlight","mouseleave/@root/toggleHighlight","click/.overflow-hint > .amino-icon/scroll"]},enumerable:!0,configurable:!0}),e.prototype.init=function(){return this.overflowHint=this.qs(".overflow-hint"),this.scrollIcon=this.qs(".overflow-hint > .amino-icon"),this.scrollToView(),t.prototype.init.call(this)},e.prototype.toggleHighlight=function(){this.scrollIcon.classList.toggle("community-bg"),this.scrollIcon.classList.toggle("community-color"),this.overflowHint.classList.toggle("community-color")},e.prototype.scroll=function(){var t=this.qs("ul.content"),e=this.root.classList.contains("scroll-to-right")?0:t.scrollWidth-t.clientWidth,o=this.root.classList.contains("scroll-to-right")?"next":"prev";this.overflowHint.dataset.eventAction=o,this.overflowHint.dataset.teaType={next:"Next",prev:"Prev"}[o],function(t,e,o,n){var i=o.scrollLeft,r=null;requestAnimationFrame(function s(a){r||(r=a);var c=(l=a-r,u=i,h=t-i,p=e,(l/=p/2)<1?h/2*l*l+u:-h/2*(--l*(l-2)-1)+u);var l,u,h,p;o.scrollLeft=c;a-r<e?requestAnimationFrame(s):n&&n()})}(e,400,t),this.root.classList.toggle("scroll-to-right")},e.prototype.scrollToView=function(){var t=this.qs("ul.content").querySelector(".active");if(t){var e=this.root.getBoundingClientRect(),o=t.getBoundingClientRect();if(e.left+e.width<o.left+o.width+45){var n=this.qs("ul.content"),i=n.scrollWidth-n.clientWidth;n.scrollLeft=i,this.root.classList.toggle("scroll-to-right")}}},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.bindDomEvents=function(){t.prototype.bindDomEvents.call(this),this.elBtnSend=this.qs(".btn-send"),this.elContentInput=this.qs("[name=content]")},Object.defineProperty(e.prototype,"events",{get:function(){return["input/[name=content]/onInputContent","keydown/[name=content]/onKeyContent","blur/[name=content]/onBlurContent","focus/[name=content]/onFocusContent","click/.btn-send/onClickSend"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.elContentInput.value.trim()},enumerable:!0,configurable:!0}),e.prototype.onInputContent=function(t){this.adjustHeight()},e.prototype.adjustHeight=function(){this.elBtnSend.disabled=!this.content,this.elContentInput.style.height="0px";var t=Math.min(198,Math.max(36,this.elContentInput.scrollHeight+2));this.elContentInput.style.height=t+"px",Object(r.x)(this.elContentInput,t>=198,"with-scrollbar"),this.emit("layout")},e.prototype.onKeyContent=function(t){if(13===t.keyCode||"Enter"===t.key){if(t.isComposing)return;t.ctrlKey||t.metaKey||t.altKey?(t.preventDefault(),Object(r.h)(t.currentTarget,"\n"),this.adjustHeight()):t.shiftKey||(t.preventDefault(),this.submit())}},e.prototype.onBlurContent=function(t){this.emit("blur")},e.prototype.onFocusContent=function(t){var e=this;this.app.requireLoginAndJoin(Object.assign({successRedirect:"",loginMotivation:"Sign in to leave a comment."},this.dataset)).then(function(t){e.elContentInput.removeAttribute("readonly"),e.elContentInput.focus(),e.emit("focus")},function(t){return e.elContentInput.blur()})},e.prototype.onClickSend=function(t){this.submit()},e.prototype.submit=function(){this.content&&this.emit("submit",this.content)},e.prototype.startLoading=function(){this.elBtnSend.disabled=!0,this.elContentInput.disabled=!0,this.elBtnSend.classList.add("loading")},e.prototype.clear=function(){this.elContentInput.value="",this.adjustHeight()},e.prototype.focus=function(){this.elContentInput.focus()},e.prototype.stopLoading=function(){this.elContentInput.disabled=!1,this.elBtnSend.disabled=!this.content,this.elBtnSend.classList.remove("loading")},e}(i.a);e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=o(5),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/.reply/onClickReply","click/.action-remove/onClickRemove"]},enumerable:!0,configurable:!0}),e.prototype.bindDomEvents=function(){this.bindCommentBar(this.children["comment-input-bar"][0]),t.prototype.bindDomEvents.call(this)},e.prototype.bindCommentBar=function(t){var e=this;this.commentBar=t,t.on("submit",function(o){t.startLoading();var n=Object(r.c)(e.root.closest("[data-target-post-id]").dataset,"target");Object(s.k)(Object.assign(n,{content:o})).then(function(o){e.app.sendGa({eventCategory:"Comment New",eventAction:"create",eventLabel:"detail_page"}),collectTEA("user_comments",{types:n.logType,type:"New",content_type:"Text",source:"Page Detailed View"}),t.clear(),t.stopLoading(),t.root.after(Object(r.f)(o.html));var i=e.qs(".empty-content");i&&i.remove(),e.renderChildren()}).catch(e.app.globalCatcher).catch(e.app.toastErrorHandler(function(e){return t.stopLoading()}))})},e.prototype.onClickReply=function(t){var e=this,o=t.currentTarget,n=o.closest("article.comment.main"),i=o.closest("article.comment"),r=this.getSubCommentContainer(n),s=r.querySelector(".comment-input-bar");s?this.bindReplyCommentBar(s,i):this.app.requireLoginAndJoin(Object.assign({successRedirect:""},this.commentBar.dataset,{source:"Comment Reply",loginMotivation:"Sign in to leave a reply.",eventLabel:"comment_reply"})).then(function(t){var o=e.commentBar.root.cloneNode(!0);o.classList.remove("main"),r.appendChild(o),e.renderChildren().then(function(t){return e.bindReplyCommentBar(o,i,!0)})})},e.prototype.getSubCommentContainer=function(t){var e=[].slice.call(t.children).filter(function(t){return t.classList.contains("sub-comments")});if(e.length)return e[0];var o=document.createElement("div");return o.classList.add("sub-comments"),t.appendChild(o),o},e.prototype.bindOnce=function(t){var e=this;t.on("focus",function(e){t.elParent.classList.contains("main")&&!t.elParent.querySelector("article.comment")||t.elParent.classList.add("replying")}).on("blur",function(e){return t.elParent.classList.remove("replying")}).on("submit",function(o){t.startLoading();var n=Object(r.c)(e.root.closest("[data-target-post-id]").dataset,"target");t.elParent.classList.contains("main")||(o=t.elContentInput.placeholder+"\n"+o),Object(s.k)(Object.assign(n,{content:o,commentId:t.elParent.dataset.commentId})).then(function(o){e.app.sendGa({eventCategory:"Comment Reply",eventAction:"create",eventLabel:"detail_page"}),collectTEA("user_comments",{types:"comment",type:"Reply",content_type:"Text",source:"Page Detailed View"}),t.clear(),t.stopLoading(),t.root.before(Object(r.f)(o.html)),e.renderChildren()}).catch(e.app.globalCatcher).catch(e.app.toastErrorHandler(function(e){return t.stopLoading()}))})},e.prototype.bindReplyCommentBar=function(t,e,o){var n,r=i.a.get(t);if(r.elParent=e,this.qsa("article.comment.replying").forEach(function(t){return t.classList.remove("replying")}),e.classList.contains("main"))r.elContentInput.placeholder=this.commentBar.elContentInput.placeholder;else{var s=(n=e.dataset.authorName.trim(),c.innerHTML=n,c.textContent);r.elContentInput.placeholder=_("Reply to:")+" "+s}o&&this.bindOnce(r),this.app.viewport.scrollToElement(r.root,-80,{bottomPadding:120}),r.focus()},e.prototype.onClickRemove=function(t){var e=this,o=t.currentTarget.closest("article.comment").classList.contains("main"),n=Object.assign(Object(r.c)(t.currentTarget.closest("[data-target-post-id]").dataset,"target"),{commentId:t.currentTarget.closest("[data-comment-id]").dataset.commentId});return this.app.requireLoginAndJoin(this.dataset).then(function(t){return e.app.confirm("Are you sure you want to <strong>delete</strong> it?")}).then(function(t){return Object(s.i)(n)}).then(function(i){t.currentTarget.closest("article.comment").remove(),e.app.sendGa({eventCategory:o?"Comment New":"Comment Reply",eventAction:"delete"}),collectTEA("user_deletes_comment",{source:"Page Detailed View",types:n.logType,type:o?"New":"Reply",content_type:"Text"})}).catch(this.app.globalCatcher).catch(this.app.toastErrorHandler())},e}(i.a);e.default=a;var c=document.createElement("div")},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/.collapse-counter/onExpand","click/.collapse-share/onShare"]},enumerable:!0,configurable:!0}),e.prototype.init=function(){if("#comment-list"===location.hash){var t=this.qs(".collapse-counter");this.root.classList.toggle("collapse",!1),t.classList.toggle("community-bg",!0),t.classList.toggle("community-color",!1)}},e.prototype.bindDomEvents=function(){t.prototype.bindDomEvents.call(this),this.post=this.root.closest("article.post")},e.prototype.onExpand=function(t){var e=t.currentTarget;this.root.classList.toggle("collapse"),e.classList.toggle("community-bg"),e.classList.toggle("community-color")},e.prototype.onShare=function(t){var e=t.currentTarget;e.classList.toggle("collapse"),e.classList.toggle("community-bg")},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/showDropdown"]},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.close=this.close.bind(this)},e.prototype.showDropdown=function(t){this.isOpen?this.doClose():this.doOpen()},e.prototype.doOpen=function(){this.isOpen=!0,this.root.classList.add("open"),document.body.addEventListener("click",this.close)},e.prototype.doClose=function(){this.isOpen=!1,this.root.classList.remove("open"),document.body.removeEventListener("click",this.close)},e.prototype.close=function(t){if(this.isOpen){for(var e=t.target;null!=e;){if(e===this.root)return;e=e.parentNode}this.doClose()}},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(102),r=o(118),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.initCarouselItem()},e.prototype.bindLazyLoad=function(){},e}(Object(r.a)(i.default));e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){var e=this;return this.on("scroll",function(t){e.onScroll()}),this._doScroll=this._doScroll.bind(this),t.prototype.init.call(this)},e.prototype.bindDomEvents=function(){var e=this;this.root.dataset.height&&(this.root.style.height=(parseInt(this.root.dataset.height)||135)+"px"),this.scroller=this.qs(".scroll-container"),r.j(this,this.scroller),r.m(function(t){e.onScroll();var o=e.app.viewport,n=Math.max(.2*Math.min(o.viewportWidth,o.viewportHeight),150);e.items.forEach(function(t){var i=e.root.getBoundingClientRect();t.offset=[-45,o.viewportWidth-i.right+n,0,i.left-n],t.calculate(),t.partialVisible&&t.load(),t.one("partialvisible",function(e){t.load()})}),o.onResize(e,function(t){var i=e.root.getBoundingClientRect();e.items.forEach(function(t){t.offset=[-45,o.viewportWidth-i.right+n,0,i.left-n]})})});var o=parseInt(this.root.dataset.arrowOffset);return o&&this.qsa(".arrow").forEach(function(t){return t.style.marginTop=o+"px"}),t.prototype.bindDomEvents.call(this)},Object.defineProperty(e.prototype,"items",{get:function(){return this.children.carouselItem||[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return["mousemove/@root/onMouseMove","mouseleave/@root/onMouseLeave","mouseenter/.arrow/onEnterArrow/1","mouseleave/.arrow/onLeaveArrow/1","mousedown/.arrow/onEnterArrow","mouseup/.arrow/onLeaveArrow"]},enumerable:!0,configurable:!0}),e.prototype.onMouseMove=function(t){if(this.scroller.scrollWidth<=this.scroller.clientWidth)return this.root.classList.remove("hover-left"),void this.root.classList.remove("hover-right");var e=this.root.getBoundingClientRect();(t.clientX-e.left)/e.width<=.5?this.root.classList.contains("hover-left")||(this.root.classList.remove("hover-right"),this.root.classList.add("hover-left")):this.root.classList.contains("hover-right")||(this.root.classList.add("hover-right"),this.root.classList.remove("hover-left"))},e.prototype.onMouseLeave=function(t){this.root.classList.remove("hover-left"),this.root.classList.remove("hover-right")},e.prototype.onEnterArrow=function(t){var e=t.currentTarget.classList.contains("arrow-left");this.scrollStart(e,"mousedown"===t.type?6:2)},e.prototype.onLeaveArrow=function(t){this.scrollEnd()},e.prototype.scrollStart=function(t,e){void 0===e&&(e=3),this.scrolling=!0,this.scrollingSpeed=t?-e:e,this._doScroll()},e.prototype.scrollEnd=function(){this.scrolling=!1,this.scrollingSpeed=0},e.prototype._doScroll=function(){this.scrolling&&(this.scroller.scrollLeft+=this.scrollingSpeed,requestAnimationFrame(this._doScroll))},e.prototype.onScroll=function(){this.items&&this.items.forEach(function(t){return t.calculate()});var t=this.scroller.scrollLeft;0===t?(this.root.classList.add("scroll-leftmost"),this.root.classList.remove("scroll-rightmost")):t+this.scroller.clientWidth>=this.scroller.scrollWidth?(this.root.classList.add("scroll-rightmost"),this.root.classList.remove("scroll-leftmost")):this.root.classList.remove("scroll-leftmost","scroll-rightmost")},e}(i.a);e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(8),s=o.n(r),a=o(20),c=o(10),l=new c.a({key:"content-collapse-first",expire:864e5}),u=new c.a({key:"content-collapse-second",expire:864e5}),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){ServerData.isLogin||(this.elPopup=this.app.qs("#call2action-interested"),this.needMonitor()&&this.app.on("scroll",this.lazyTrigger.bind(this)))},e.prototype.needMonitor=function(){return!(l.get()||u.get())&&(!a.get("call2action_closed")&&this.elPopup)},e.prototype.bindDomEvents=function(){var e=this;return ServerData.isLogin?t.prototype.bindDomEvents.call(this):(setTimeout(function(t){e.needMonitor()&&(e.monitor=s.a.create(e.root,Math.min(300,.5*e.app.viewport.viewportHeight)),e._start=Date.now(),setTimeout(function(t){e.trigger()},6e4))},500),t.prototype.bindDomEvents.call(this))},e.prototype.lazyTrigger=function(){clearTimeout(this.timeout),this.timeout=setTimeout(this.trigger.bind(this),500)},e.prototype.trigger=function(){window.joinCommunityHasShowed||ServerData.isLogin||Date.now()-this._start<6e4||this.monitor&&!this.monitor.isBelowViewport&&(i.a.get(this.elPopup).showPopup(),collectTEA("download_popup",{source:"Proactive"}),Math.random()<=.1&&this.app.sendGa({eventAction:"show",eventCategory:"Proactive Popup",nonInteraction:!0}))},e}(i.a);e.default=h},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/onClick"]},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.showPopup()},e.prototype.showPopup=function(){var t=this.root.dataset.popup,e=Object(r.c)(this.root.dataset,"popup");this.app.openPopup(t,e,!0)},e}(i.a);e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/onClick"]},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){var e=this;if("BUTTON"!==this.root.tagName.toUpperCase()){var o=t.target.closest(".poll-item");if(o&&(t.preventDefault(),t.target.closest(".label"))){var n=o.dataset.polloptId;this.app.requireLoginAndJoin(Object.assign({successRedirect:"",source:"Poll Vote"},this.dataset)).then(function(){return e.jumpToDetailPage(n)}).catch(this.app.globalCatcher).catch(this.app.toastErrorHandler())}}else{var i=this.dataset,r=i.mainText,s=i.closeText;this.app.alert(r,s)}},e.prototype.jumpToDetailPage=function(t){var e=this.root.closest("a.pollopt"),o=e?e.href:location.href;try{sessionStorage.setItem("prejoin-poll-vote",t)}catch(t){}location.href=o},e}(o(3).a);e.default=i},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(3),r=o(5),s=o(2),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.init=function(){return this.page=+this.dataset.nextPage||1,t.prototype.init.call(this)},Object.defineProperty(e.prototype,"events",{get:function(){return["click/@root/onClick"]},enumerable:!0,configurable:!0}),e.prototype.onClick=function(t){var e=this;if(!this.root.disabled){var o=this.dataset;this.app.requireLoginAndJoin(o).then(function(t){return e.loadComments()}).catch(s.e)}},e.prototype.loadComments=function(){var t=this,e=this._getUrl();e.searchParams.set("sort",this.dataset.sort||"newest"),this.dataset.remain&&e.searchParams.set("remain",this.dataset.remain),this.root.disabled=!0,this.root.classList.add("loading"),Object(r.e)(e,{page:this.page}).then(function(e){var o,n;t.root.disabled=!1,t.root.classList.remove("loading");var r=Object(s.g)(e),a=r.querySelector(".comment-has-next"),c=t.dataset.remain;c&&(t.dataset.remain=String(+c-r.querySelectorAll("article.comment").length));var l=[].slice.call(r.childNodes);t.dataset.responseCommentId?(o=t.root).after.apply(o,l):(n=t.root).before.apply(n,l),i.a.get(t.root.parentElement.closest("[data-vce]")).renderChildren(),a?(a.remove(),a.innerHTML.trim()&&(t.root.innerHTML=a.innerHTML)):t.root.remove(),t.page++}).catch(function(e){t.root.disabled=!1,t.root.classList.remove("loading"),console.error(e)})},e.prototype._getUrl=function(){var t=this.dataset.parent;if(!t)throw new Error("empty parent");return this.dataset.responseCommentId?new URL("/partial/comment-list/"+t+"/"+this.dataset.responseCommentId+"/response",ServerData.hostUrl||location.origin):new URL("/partial/comment-list/"+t,ServerData.hostUrl||location.origin)},e}(i.a);e.default=a},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(103),r=o(2),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.getTarget=function(){return Object.assign(Object(r.c)(this.root.closest("[data-target-post-id]").dataset,"target"),{commentId:this.root.closest("[data-comment-id]").dataset.commentId})},e}(i.default);e.default=s},function(t,e,o){"use strict";o.r(e);var n=o(0),i=o(104),r=o(5),s=o(2),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.b(e,t),e.prototype.onClick=function(t){var e=this;if(!this.dataset.ndcId)throw new Error("need [data-ndc-id]");this.app.requireLogin(_("Sign in to join this Amino."),{eventLabel:this.dataset.eventLabel,source:this.dataset.source,referal:ServerData.inviteCode?"Invite Code":void 0}).then(function(t){t&&e.app.sendGa(Object.assign({eventCategory:"Join"},e.dataset,{eventAction:"auto",nonInteraction:!0})),e.join()}).catch(s.e)},e.prototype.join=function(){var t=this;this.emit("loggedin"),ServerData.isMember&&(this.root.textContent=_("Loading")+"..."),this.startRequest();var e=ServerData.inviteCode;return!e&&this.storedInviteCode&&(e=this.storedInviteCode),Object(r.f)(this.dataset.ndcId,e).then(function(e){return ServerData.isMember=!0,t.emit("joined",{ndcId:t.dataset.ndcId}),t.app.sendGa(Object.assign({eventCategory:"Join"},t.dataset,{eventAction:"succeed",nonInteraction:!0})),collectTEA("joins_a_community",{type:"join",source:t.dataset.source,template:ServerData.community.templateId,listing_status:{2:"Listed",1:"Unlisted"}[ServerData.community.listedStatus]}),t.requestFinish().then(function(t){return e.userProfile})},function(e){throw t.app.sendGa(Object.assign({eventCategory:"Join"},t.dataset,{eventAction:"failed",nonInteraction:!0})),e}).then(function(e){t.emit("success",e),"successRedirect"in t.dataset&&Object(s.p)(t.dataset.successRedirect)}).catch(this.app.globalCatcher).catch(function(e){return t.app.showToast(e.response&&e.response.message||"Unknown Error"),t.requestFinish().then(function(e){return t.reset()})})},Object.defineProperty(e.prototype,"storedInviteCode",{get:function(){var t=this.app.inviteStorage.get();return t&&t.ndcId===ServerData.community.ndcId?t.code:null},enumerable:!0,configurable:!0}),e}(i.default);e.default=a},function(t,e){t.exports=function(t,e,o,n){var i,r=0;return"boolean"!=typeof e&&(n=o,o=e,e=void 0),function(){var s=this,a=Number(new Date)-r,c=arguments;function l(){r=Number(new Date),o.apply(s,c)}n&&!i&&l(),i&&clearTimeout(i),void 0===n&&a>t?l():!0!==e&&(i=setTimeout(n?function(){i=void 0}:l,void 0===n?t-a:t))}}},function(t,e,o){var n,i,r;!function(o,s){"use strict";i=[],void 0===(r="function"==typeof(n=function(){var t={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};function e(t){this.callback=t,this.ticking=!1}function o(t,e){var n;e=function t(e){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var o,n,i=e||{};for(n=1;n<arguments.length;n++){var r=arguments[n]||{};for(o in r)"object"==typeof i[o]&&(!(s=i[o])||"undefined"==typeof window||s!==window&&!s.nodeType)?i[o]=t(i[o],r[o]):i[o]=i[o]||r[o]}var s;return i}(e,o.options),this.lastKnownScrollY=0,this.elem=t,this.tolerance=(n=e.tolerance)===Object(n)?n:{down:n,up:n},this.classes=e.classes,this.offset=e.offset,this.scroller=e.scroller,this.initialised=!1,this.onPin=e.onPin,this.onUnpin=e.onUnpin,this.onTop=e.onTop,this.onNotTop=e.onNotTop,this.onBottom=e.onBottom,this.onNotBottom=e.onNotBottom}return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,e.prototype={constructor:e,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},o.prototype={constructor:o,init:function(){if(o.cutsTheMustard)return this.debouncer=new e(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var t=this.classes;for(var e in this.initialised=!1,t)t.hasOwnProperty(e)&&this.elem.classList.remove(t[e]);this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var t=this.elem.classList,e=this.classes;!t.contains(e.pinned)&&t.contains(e.unpinned)||(t.add(e.unpinned),t.remove(e.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var t=this.elem.classList,e=this.classes;t.contains(e.unpinned)&&(t.remove(e.unpinned),t.add(e.pinned),this.onPin&&this.onPin.call(this))},top:function(){var t=this.elem.classList,e=this.classes;t.contains(e.top)||(t.add(e.top),t.remove(e.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notTop)||(t.add(e.notTop),t.remove(e.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var t=this.elem.classList,e=this.classes;t.contains(e.bottom)||(t.add(e.bottom),t.remove(e.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notBottom)||(t.add(e.notBottom),t.remove(e.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(t){return Math.max(t.offsetHeight,t.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)},getElementHeight:function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(t){var e=t<0,o=t+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return e||o},toleranceExceeded:function(t,e){return Math.abs(t-this.lastKnownScrollY)>=this.tolerance[e]},shouldUnpin:function(t,e){var o=t>this.lastKnownScrollY,n=t>=this.offset;return o&&n&&e},shouldPin:function(t,e){var o=t<this.lastKnownScrollY,n=t<=this.offset;return o&&e||n},update:function(){var t=this.getScrollY(),e=t>this.lastKnownScrollY?"down":"up",o=this.toleranceExceeded(t,e);this.isOutOfBounds(t)||(t<=this.offset?this.top():this.notTop(),t+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(t,o)?this.unpin():this.shouldPin(t,o)&&this.pin(),this.lastKnownScrollY=t)}},o.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},o.cutsTheMustard=void 0!==t&&t.rAF&&t.bind&&t.classList,o})?n.apply(e,i):n)||(t.exports=r)}()},,,function(t,e){t.exports=function(t){var e,o,n="undefined"!=typeof _encodeHTML?_encodeHTML:(e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},o=/&(?!#?\w+;)|<|>|"|'|\//g,function(t){return t?t.toString().replace(o,function(t){return e[t]||t}):""}),i='<li class="comment pointer"> <img src="'+t.avatar+'" class="avatar"> <div class="message"> <span class="content">'+n(t.text)+"</span> ";return t.media&&(i+=' <img src="'+t.media+'" class="media img-cover"> '),i+=" </div></li>"}},function(t,e,o){"use strict";o.r(e),o.p=function(){try{var t=document.currentScript,e=t.src;return e.replace(/js\/main.js.*/,"")}catch(t){}return"/static/dist/"}();var n=o(18);o(327);Object(n.a)(function(){var t=o(19).VComponent;t.loader=function(t){return o(324)("./"+t).default},ServerData.isLogin?o(15).import_user().then(function(){t.create(document.body)}):t.create(document.body)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t){return'<iframe class="content" width="100%" height="100%" src="//www.youtube.com/embed/'+t.id+"?modestbranding=1&autohide=1&showinfo=0&controls=1&autoplay="+t.autoplay+'" style="background: url(//img.youtube.com/vi/'+t.id+'/default.jpg) center/cover no-repeat" frameborder="0" allowfullscreen></iframe>'}},function(t,e){t.exports=function(t){var e='<span class="online-mark"></span>\x3c!----\x3e<span class="num">\x3c!--这里fontsize很敏感，用注释来去除whitespace ',o=t.oldCount;if(o)for(var n=-1,i=o.length-1;n<i;)e+=' --\x3e<span class="digit digit-'+o[n+=1]+'">x</span>\x3c!-- ';return e+=' --\x3e</span>\x3c!----\x3e<span class="message">\x3c!----\x3e',1==t.count?e+="\x3c!-- --\x3e"+_("[member_count] member online")+"\x3c!----\x3e":e+="\x3c!----\x3e"+_("[member_count] members online")+"\x3c!----\x3e",e+="\x3c!----\x3e</span>"}},function(t,e){t.exports=function(t){return'<div class="newcoming"> <span class="message"> <span class="nickname"></span> </span></div>'}},function(t,e){t.exports=function(t){var e="",o=t;if(o)for(var n,i=-1,r=o.length-1;i<r;)e+="<a ",(n=o[i+=1]).href&&(e+='href="'+n.href+'" '),e+='class="block user-bubble"> <img src="'+(n.profile.icon||"/static/img/user-icon-placeholder.png")+'" class="avatar img-cover"></a>';return e}},function(t,e){!function(t,e,o){function n(t,e){return typeof t===e}function i(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):_?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function r(t,e){return!!~(""+t).indexOf(e)}function s(t,o,n,r){var s,a,c,l,u="modernizr",h=i("div"),p=function(){var t=e.body;return t||((t=i(_?"svg":"body")).fake=!0),t}();if(parseInt(n,10))for(;n--;)(c=i("div")).id=r?r[n]:u+(n+1),h.appendChild(c);return(s=i("style")).type="text/css",s.id="s"+u,(p.fake?p:h).appendChild(s),p.appendChild(h),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(e.createTextNode(t)),h.id=u,p.fake&&(p.style.background="",p.style.overflow="hidden",l=y.style.overflow,y.style.overflow="hidden",y.appendChild(p)),a=o(h,t),p.fake?(p.parentNode.removeChild(p),y.style.overflow=l,y.offsetHeight):h.parentNode.removeChild(h),!!a}function a(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function c(e,o,n){var i;if("getComputedStyle"in t){i=getComputedStyle.call(t,e,o);var r=t.console;if(null!==i)n&&(i=i.getPropertyValue(n));else if(r){r[r.error?"error":"log"].call(r,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else i=!o&&e.currentStyle&&e.currentStyle[n];return i}function l(e,n){var i=e.length;if("CSS"in t&&"supports"in t.CSS){for(;i--;)if(t.CSS.supports(a(e[i]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var r=[];i--;)r.push("("+a(e[i])+":"+n+")");return s("@supports ("+(r=r.join(" or "))+") { #modernizr { position: absolute; } }",function(t){return"absolute"==c(t,null,"position")})}return o}function u(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,o){return e+o.toUpperCase()}).replace(/^-/,"")}function h(t,e,s,a){function c(){p&&(delete E.style,delete E.modElem)}if(a=!n(a,"undefined")&&a,!n(s,"undefined")){var h=l(t,s);if(!n(h,"undefined"))return h}for(var p,d,f,m,g,v=["modernizr","tspan","samp"];!E.style&&v.length;)p=!0,E.modElem=i(v.shift()),E.style=E.modElem.style;for(f=t.length,d=0;f>d;d++)if(m=t[d],g=E.style[m],r(m,"-")&&(m=u(m)),E.style[m]!==o){if(a||n(s,"undefined"))return c(),"pfx"!=e||m;try{E.style[m]=s}catch(t){}if(E.style[m]!=g)return c(),"pfx"!=e||m}return c(),!1}function p(t,e){return function(){return t.apply(e,arguments)}}function d(t,e,o,i,r){var s=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+C.join(s+" ")+s).split(" ");return n(e,"string")||n(e,"undefined")?h(a,e,i,r):function(t,e,o){var i;for(var r in t)if(t[r]in e)return!1===o?t[r]:n(i=e[t[r]],"function")?p(i,o||e):i;return!1}(a=(t+" "+x.join(s+" ")+s).split(" "),e,o)}function f(t,e,n){return d(t,o,o,e,n)}var m=[],g={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var o=this;setTimeout(function(){e(o[t])},0)},addTest:function(t,e,o){m.push({name:t,fn:e,options:o})},addAsyncTest:function(t){m.push({name:null,fn:t})}},v=function(){};v.prototype=g,v=new v;var b=[],y=e.documentElement,_="svg"===y.nodeName.toLowerCase(),w=g._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];g._prefixes=w;var k="Moz O ms Webkit",C=g._config.usePrefixes?k.split(" "):[];g._cssomPrefixes=C;var L={elem:i("modernizr")};v._q.push(function(){delete L.elem});var E={style:L.elem.style};v._q.unshift(function(){delete E.style});var x=g._config.usePrefixes?k.toLowerCase().split(" "):[];g._domPrefixes=x,g.testAllProps=d,g.testAllProps=f;var T="CSS"in t&&"supports"in t.CSS,O="supportsCSS"in t;v.addTest("supports",T||O),v.addTest("cssfilters",function(){if(v.supports)return f("filter","blur(2px)");var t=i("a");return t.style.cssText=w.join("filter:blur(2px); "),!!t.style.length&&(e.documentMode===o||e.documentMode>9)});var P=function(e){var n,i=w.length,r=t.CSSRule;if(void 0===r)return o;if(!e)return!1;if((n=(e=e.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in r)return"@"+e;for(var s=0;i>s;s++){var a=w[s];if(a.toUpperCase()+"_"+n in r)return"@-"+a.toLowerCase()+"-"+e}return!1};g.atRule=P;var S=g.prefixed=function(t,e,o){return 0===t.indexOf("@")?P(t):(-1!=t.indexOf("-")&&(t=u(t)),e?d(t,e,o):d(t,"pfx"))};v.addTest("objectfit",!!S("objectFit"),{aliases:["object-fit"]}),function(){var t,e,o,i,r,s;for(var a in m)if(m.hasOwnProperty(a)){if(t=[],(e=m[a]).name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(o=0;o<e.options.aliases.length;o++)t.push(e.options.aliases[o].toLowerCase());for(i=n(e.fn,"function")?e.fn():e.fn,r=0;r<t.length;r++)1===(s=t[r].split(".")).length?v[s[0]]=i:(!v[s[0]]||v[s[0]]instanceof Boolean||(v[s[0]]=new Boolean(v[s[0]])),v[s[0]][s[1]]=i),b.push((i?"":"no-")+s.join("-"))}}(),function(t){var e=y.className,o=v._config.classPrefix||"";if(_&&(e=e.baseVal),v._config.enableJSClass){var n=new RegExp("(^|\\s)"+o+"no-js(\\s|$)");e=e.replace(n,"$1"+o+"js$2")}v._config.enableClasses&&(e+=" "+o+t.join(" "+o),_?y.className.baseVal=e:y.className=e)}(b),delete g.addTest,delete g.addAsyncTest;for(var j=0;j<v._q.length;j++)v._q[j]();t.Modernizr=v}(window,document)},function(t,e){t.exports=function(t){var e="";return t.loading?e+=' <span class="page loading"> <i class="fa fa-spin fa-spinner fa-2x"></i> </span>':t.pageToken?e+=' <a class="page" href="'+t.base+"?page_token="+t.pageToken+'" data-event-category="Listview" data-event-action="Go next"> <i class="fa fa-forward"></i> Next Page </a>':(e+=" ",t.cur_page<t.max_page&&(e+=" ",t.cur_page>1&&(e+=' <a class="page" href="'+t.base+'?page=1" data-event-category="Listview" data-event-action="Go back"> <i class="fa fa-fast-backward"></i> Go Back </a> '),e+=' <a class="page" href="'+t.base+"?page="+(t.cur_page+1)+'" data-event-category="Listview" data-event-action="Go next"> <i class="fa fa-forward"></i> Next Page </a> ')),e}},function(t,e,o){var n=o(164);t.exports=function(t,e,o){return void 0===o?n(t,e,!1):n(t,o,!1!==e)}},function(t,e,o){var n={"./abstract-list-loader":16,"./abstract-list-loader.ts":16,"./body":120,"./body.ts":120,"./btn-join-community":163,"./btn-join-community.ts":163,"./btn-like":103,"./btn-like-comment":162,"./btn-like-comment.ts":162,"./btn-like.ts":103,"./btn-load-comments":161,"./btn-load-comments.ts":161,"./btn-poll-join":160,"./btn-poll-join.ts":160,"./btn-popup":159,"./btn-popup.ts":159,"./btn-progress":104,"./btn-progress.ts":104,"./call2action-interest-anchor":158,"./call2action-interest-anchor.ts":158,"./carousel":157,"./carousel-img":156,"./carousel-img.ts":156,"./carousel.ts":157,"./click-expand":155,"./click-expand.ts":155,"./clipboard":101,"./clipboard.ts":101,"./collapse-comment":154,"./collapse-comment.ts":154,"./comment-area":153,"./comment-area.ts":153,"./comment-input-bar":152,"./comment-input-bar.ts":152,"./community-nav":151,"./community-nav.ts":151,"./deeplink":150,"./deeplink.ts":150,"./dismiss":149,"./dismiss.ts":149,"./download-guide":148,"./download-guide.ts":148,"./fade-image-switcher":147,"./fade-image-switcher.ts":147,"./fading-media":146,"./fading-media.ts":146,"./featured-list":145,"./featured-list.ts":145,"./headroom":144,"./headroom.ts":144,"./image":102,"./image.ts":102,"./join-community":143,"./join-community.ts":143,"./join-fan-club":142,"./join-fan-club.ts":142,"./joinlink":141,"./joinlink.ts":141,"./lazy-blog-like":140,"./lazy-blog-like.ts":140,"./lightbox-container":139,"./lightbox-container.ts":139,"./list":138,"./list-token":137,"./list-token.ts":137,"./list.ts":138,"./live-comment":136,"./live-comment.ts":136,"./locale-picker":135,"./locale-picker.ts":135,"./member-list":134,"./member-list.ts":134,"./next-page-loader":133,"./next-page-loader.ts":133,"./overflow-aware":23,"./overflow-aware.ts":23,"./page-aside":132,"./page-aside.ts":132,"./pre-login-btn":131,"./pre-login-btn.ts":131,"./rich-content":130,"./rich-content.ts":130,"./shared-folder":129,"./shared-folder.ts":129,"./sidebar-chat-list":128,"./sidebar-chat-list.ts":128,"./sidebar-community":127,"./sidebar-community.ts":127,"./sidebar-site":126,"./sidebar-site.ts":126,"./sticky":125,"./sticky.ts":125,"./tab":124,"./tab.ts":124,"./toast":123,"./toast.ts":123,"./toggle-content":122,"./toggle-content.ts":122,"./video-player":121,"./video-player.ts":121};function i(t){var e=r(t);return o(e)}function r(t){var e=n[t];if(!(e+1)){var o=new Error('Cannot find module "'+t+'".');throw o.code="MODULE_NOT_FOUND",o}return e}i.keys=function(){return Object.keys(n)},i.resolve=r,t.exports=i,i.id=324},,,function(t,e,o){}]);