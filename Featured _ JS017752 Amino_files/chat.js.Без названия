!function(e){function t(t){for(var r,a,o=t[0],c=t[1],u=t[2],d=0,h=[];d<o.length;d++)a=o[d],i[a]&&h.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);h.length;)h.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={24:0};var s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=i[e]=[t,r]});t.push(n[2]=r);var s=document.getElementsByTagName("head")[0],o=document.createElement("script");o.charset="utf-8",o.timeout=120,o.crossOrigin="anonymous",a.nc&&o.setAttribute("nonce",a.nc),o.src=function(e){return a.p+"js/"+({2:"vendors~fine-uploader",3:"dnd"}[e]||e)+".js?v="+{2:"edd9534ceb89",3:"0f65e6f62f23"}[e]}(e);var c=setTimeout(function(){u({type:"timeout",target:o})},12e4);function u(t){o.onerror=o.onload=null,clearTimeout(c);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+r+": "+s+")");a.type=r,a.request=s,n[1](a)}i[e]=void 0}}o.onerror=o.onload=u,s.appendChild(o)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/static/dist/",a.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([316,14]),n()}([function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return a}),n.d(t,"c",function(){return o});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function o(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}},function(e,t,n){"use strict";function r(e,t,n,r,i,s,a,o){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),s&&(u._scopeId="data-v-"+s),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,"a",function(){return r})},,,function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"g",function(){return h}),n.d(t,"f",function(){return f}),n.d(t,"b",function(){return m});var r,i=n(7),s=new i.default,a=new i.default,o=new i.default;n.e(2).then(function(){var e=n(166);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}).then(function(e){var t=e.default;return t}).then(function(e){var t=e.FineUploaderBasic,r=e.supportedFeatures,i=e.Identify;r.fileDrop&&n.e(3).then(function(){var e=n(167);return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})}).then(function(e){var t=e.default.DragAndDrop;return function(e){new e({dropZoneElements:[document.body],allowMultipleItems:window.UPLOADER_MULTIPLE_DROP||!1,classes:{dropActive:"drag-drop-enter"},callbacks:{processingDroppedFiles:function(){o.$emit("processing")},processingDroppedFilesComplete:function(e,t){1===e.length?o.$emit("dropped",e[0]):o.$emit("multiDropped",e)},dropError:function(e){"tooManyFilesError"===e&&o.$emit("error",_("Please upload one image at a time."))}}})}(t)});try{delete i.prototype.PREVIEWABLE_MIME_TYPES["image/gif"];var c=e.PasteSupport;c&&(e.PasteSupport=function(e){c.call(this,e),this.reset=function(){}})}catch(e){}var h=new t({autoUpload:!1,debug:!1,request:{endpoint:"/api/upload-image",inputName:"avatar"},retry:{enableAuto:!1},scaling:{includeExif:!0,sendOriginal:!1,defaultQuality:100,sizes:[{name:"avatar",maxSize:2048}]},multiple:!0,paste:{targetElement:document},callbacks:{onComplete:function(e,t,n){n&&200===n.code?(l[e](n.result),h.removeFileRef(e)):d[e](n),l[e]=null,d[e]=null},onSubmit:function(e,t){u(e)},onError:function(e,t,n){d[e](n)},onPasteReceived:function(e){a.$emit("paste",e)},onProgress:function(e,t,n,r){s.$emit("progress-"+e,{uploadedBytes:n,totalBytes:r})}}});return h}).then(function(e){r=e});var c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},u=c,l={},d={};function h(e,t){var n=new Promise(function(t,n){l[e]=function(n){n.id=e,t(n)},d[e]=function(t){t.id=e,n(t)}});return t.retry(e),n}function f(e,t){if(e instanceof window.File&&!/^image/.test(e.type))return Promise.reject(_("Sorry, only JPG, PNG and GIF files are allowed."));var n=new Promise(function(e,n){u=function(r){u=c;var i=t.getFile(r);i?i.size>6e6?n(_("That's a great pic, but it's a bit too big... Please keep it under 6MB.")):e(r):n()}});return t.addFiles([e]),n}function m(e,t,n){if("function"!=typeof File)return n.drawThumbnail(t,e);try{var r=function(e){var t="";try{e&&e instanceof File&&(t=URL.createObjectURL(e).toString())}catch(e){}return t}(n.getFile(t));if(r)return e.src=r,Promise.resolve()}catch(e){}return n.drawThumbnail(t,e)}},function(e,t,n){"use strict";n.d(t,"g",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"j",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"m",function(){return l}),n.d(t,"l",function(){return d}),n.d(t,"k",function(){return h}),n.d(t,"i",function(){return f}),n.d(t,"c",function(){return m}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return v}),n.d(t,"h",function(){return g}),n.d(t,"e",function(){return _});var r=new URL("/api/",ServerData.hostUrl||location.origin),i="__response",s="__original";function a(e){return g("pick-locale",{locale:e})}function o(e,t){return g("join",{ndcId:e,inviteCode:t})}function c(e,t){return g("request_join",{ndcId:e,message:t})}function u(e,t,n){return void 0===n&&(n=!1),v((n?"g":ServerData.community.ndcId)+"/"+e+"/"+t+"/votes")}function l(e){return g("vote",e)}function d(e){return g("unvote",e)}function h(e){return g("submit_comment",{ndcId:e.ndcId,postType:e.postType,postId:e.postId,content:e.content,commentId:e.commentId})}function f(e){return g("remove_comment",{ndcId:e.ndcId,postType:e.postType,postId:e.postId,commentId:e.commentId})}function m(){return v(ServerData.community.ndcId+"/online-members")}function p(e){return b("GET",e).then(function(e){if(e.status>=200&&e.status<300)return e.text();var t=new Error(e.statusText);throw t.response=e,t})}function v(e,t){return b("GET",e,t).then(T)}function g(e,t){return b("POST",e,t).then(T)}function _(e,t,n){return void 0===n&&(n="GET"),b(n,e,t).then(function(e){return 200!==e.status?Promise.reject(e):e.text()})}function b(e,t,n){var i,s=t instanceof URL?t:new URL(t,r),a={"X-Requested-With":"xmlhttprequest"};if("GET"===e.toUpperCase())for(var o in n)s.searchParams.set(o,n[o]);else i=JSON.stringify(n),a["Content-Type"]="application/json";return fetch(s.href,{method:e,headers:a,body:i,credentials:"same-origin",redirect:"follow"})}function T(e){return Promise.all([e,e.json()]).then(function(e){var t=e[0],n=e[1];return 200===n.code&&n.result?Promise.resolve(new E(t,n)):Promise.reject({message:n.message||"bad response",response:n})})}var E=function(){function e(e,t){Object.assign(this,t.result),Array.isArray(t.result)&&(this.length=t.result.length),this[i]=e,this[s]=t.result}return Object.defineProperty(e.prototype,"httpResponse",{get:function(){return this[i]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalResult",{get:function(){return this[s]},enumerable:!0,configurable:!0}),e}()},,,function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),i=r.isInBrowser,s=n(2),a=new s(i?document.body:null);a.setStateFromDOM(null),a.listenToDOM(),i&&(window.scrollMonitor=a),e.exports=a},function(e,t){"use strict";t.VISIBILITYCHANGE="visibilityChange",t.ENTERVIEWPORT="enterViewport",t.FULLYENTERVIEWPORT="fullyEnterViewport",t.EXITVIEWPORT="exitViewport",t.PARTIALLYEXITVIEWPORT="partiallyExitViewport",t.LOCATIONCHANGE="locationChange",t.STATECHANGE="stateChange",t.eventTypes=[t.VISIBILITYCHANGE,t.ENTERVIEWPORT,t.FULLYENTERVIEWPORT,t.EXITVIEWPORT,t.PARTIALLYEXITVIEWPORT,t.LOCATIONCHANGE,t.STATECHANGE],t.isOnServer="undefined"==typeof window,t.isInBrowser=!t.isOnServer,t.defaultOffsets={top:0,bottom:0}},function(e,t,n){"use strict";function r(e){return o?0:e===document.body?window.innerHeight||document.documentElement.clientHeight:e.clientHeight}function i(e){return o?0:e===document.body?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight):e.scrollHeight}function s(e){return o?0:e===document.body?window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop}var a=n(1),o=a.isOnServer,c=a.isInBrowser,u=a.eventTypes,l=n(3),d=!1;if(c)try{var h=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("test",null,h)}catch(e){}var f=!!d&&{capture:!1,passive:!0},m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a,o,c,l=this;this.item=t,this.watchers=[],this.viewportTop=null,this.viewportBottom=null,this.documentHeight=i(t),this.viewportHeight=r(t),this.DOMListener=function(){e.prototype.DOMListener.apply(l,arguments)},this.eventTypes=u,n&&(this.containerWatcher=n.create(t)),this.update=function(){(function(){if(l.viewportTop=s(t),l.viewportBottom=l.viewportTop+l.viewportHeight,l.documentHeight=i(t),l.documentHeight!==a){for(o=l.watchers.length;o--;)l.watchers[o].recalculateLocation();a=l.documentHeight}})(),function(){for(c=l.watchers.length;c--;)l.watchers[c].update();for(c=l.watchers.length;c--;)l.watchers[c].triggerCallbacks()}()},this.recalculateLocations=function(){this.documentHeight=0,this.update()}}return e.prototype.listenToDOM=function(){c&&(window.addEventListener?(this.item===document.body?window.addEventListener("scroll",this.DOMListener,f):this.item.addEventListener("scroll",this.DOMListener,f),window.addEventListener("resize",this.DOMListener)):(this.item===document.body?window.attachEvent("onscroll",this.DOMListener):this.item.attachEvent("onscroll",this.DOMListener),window.attachEvent("onresize",this.DOMListener)),this.destroy=function(){window.addEventListener?(this.item===document.body?(window.removeEventListener("scroll",this.DOMListener,f),this.containerWatcher.destroy()):this.item.removeEventListener("scroll",this.DOMListener,f),window.removeEventListener("resize",this.DOMListener)):(this.item===document.body?(window.detachEvent("onscroll",this.DOMListener),this.containerWatcher.destroy()):this.item.detachEvent("onscroll",this.DOMListener),window.detachEvent("onresize",this.DOMListener))})},e.prototype.destroy=function(){},e.prototype.DOMListener=function(e){this.setStateFromDOM(e)},e.prototype.setStateFromDOM=function(e){var t=s(this.item),n=r(this.item),a=i(this.item);this.setState(t,n,a,e)},e.prototype.setState=function(e,t,n,r){var i=t!==this.viewportHeight||n!==this.contentHeight;if(this.latestEvent=r,this.viewportTop=e,this.viewportHeight=t,this.viewportBottom=e+t,this.contentHeight=n,i)for(var s=this.watchers.length;s--;)this.watchers[s].recalculateLocation();this.updateAndTriggerWatchers(r)},e.prototype.updateAndTriggerWatchers=function(e){for(var t=this.watchers.length;t--;)this.watchers[t].update();for(t=this.watchers.length;t--;)this.watchers[t].triggerCallbacks(e)},e.prototype.createCustomContainer=function(){return new e},e.prototype.createContainer=function(t){"string"==typeof t?t=document.querySelector(t):t&&t.length>0&&(t=t[0]);var n=new e(t,this);return n.setStateFromDOM(),n.listenToDOM(),n},e.prototype.create=function(e,t){"string"==typeof e?e=document.querySelector(e):e&&e.length>0&&(e=e[0]);var n=new l(this,e,t);return this.watchers.push(n),n},e.prototype.beget=function(e,t){return this.create(e,t)},e}();e.exports=m},function(e,t,n){"use strict";function r(e,t,n){function r(e,t){if(0!==e.length)for(g=e.length;g--;)(_=e[g]).callback.call(b,t,b),_.isOne&&e.splice(g,1)}var i,m,p,v,g,_,b=this;this.watchItem=t,this.container=e,this.offsets=n?n===+n?{top:n,bottom:n}:{top:n.top||f.top,bottom:n.bottom||f.bottom}:f,this.callbacks={};for(var T=0,E=h.length;T<E;T++)b.callbacks[h[T]]=[];this.locked=!1,this.triggerCallbacks=function(e){switch(this.isInViewport&&!i&&r(this.callbacks[a],e),this.isFullyInViewport&&!m&&r(this.callbacks[o],e),this.isAboveViewport!==p&&this.isBelowViewport!==v&&(r(this.callbacks[s],e),m||this.isFullyInViewport||(r(this.callbacks[o],e),r(this.callbacks[u],e)),i||this.isInViewport||(r(this.callbacks[a],e),r(this.callbacks[c],e))),!this.isFullyInViewport&&m&&r(this.callbacks[u],e),!this.isInViewport&&i&&r(this.callbacks[c],e),this.isInViewport!==i&&r(this.callbacks[s],e),!0){case i!==this.isInViewport:case m!==this.isFullyInViewport:case p!==this.isAboveViewport:case v!==this.isBelowViewport:r(this.callbacks[d],e)}i=this.isInViewport,m=this.isFullyInViewport,p=this.isAboveViewport,v=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var e=this.top,t=this.bottom;if(this.watchItem.nodeName){var n=this.watchItem.style.display;"none"===n&&(this.watchItem.style.display="");for(var i=0,s=this.container;s.containerWatcher;)i+=s.containerWatcher.top-s.containerWatcher.container.viewportTop,s=s.containerWatcher.container;var a=this.watchItem.getBoundingClientRect();this.top=a.top+this.container.viewportTop-i,this.bottom=a.bottom+this.container.viewportTop-i,"none"===n&&(this.watchItem.style.display=n)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=this.container.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===e&&void 0===t||this.top===e&&this.bottom===t||r(this.callbacks[l],null)}},this.recalculateLocation(),this.update(),i=this.isInViewport,m=this.isFullyInViewport,p=this.isAboveViewport,v=this.isBelowViewport}var i=n(1),s=i.VISIBILITYCHANGE,a=i.ENTERVIEWPORT,o=i.FULLYENTERVIEWPORT,c=i.EXITVIEWPORT,u=i.PARTIALLYEXITVIEWPORT,l=i.LOCATIONCHANGE,d=i.STATECHANGE,h=i.eventTypes,f=i.defaultOffsets;r.prototype={on:function(e,t,n){switch(!0){case e===s&&!this.isInViewport&&this.isAboveViewport:case e===a&&this.isInViewport:case e===o&&this.isFullyInViewport:case e===c&&this.isAboveViewport&&!this.isInViewport:case e===u&&this.isInViewport&&this.isAboveViewport:if(t.call(this,this.container.latestEvent,this),n)return}if(!this.callbacks[e])throw new Error("Tried to add a scroll monitor listener of type "+e+". Your options are: "+h.join(", "));this.callbacks[e].push({callback:t,isOne:n||!1})},off:function(e,t){if(!this.callbacks[e])throw new Error("Tried to remove a scroll monitor listener of type "+e+". Your options are: "+h.join(", "));for(var n,r=0;n=this.callbacks[e][r];r++)if(n.callback===t){this.callbacks[e].splice(r,1);break}},one:function(e,t){this.on(e,t,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<this.container.viewportTop,this.isBelowViewport=this.bottom>this.container.viewportBottom,this.isInViewport=this.top<this.container.viewportBottom&&this.bottom>this.container.viewportTop,this.isFullyInViewport=this.top>=this.container.viewportTop&&this.bottom<=this.container.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var e=this.container.watchers.indexOf(this);this.container.watchers.splice(e,1);for(var t=0,n=h.length;t<n;t++)this.callbacks[h[t]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var m=function(e){return function(t,n){this.on.call(this,e,t,n)}},p=0,v=h.length;p<v;p++){var g=h[p];r.prototype[g]=m(g)}e.exports=r}])},function(e,t,n){"use strict";function r(e){return e.replace("x","")}function i(e,t){var n=function(n){for(var r=n.target;r;){if(r===e)return;r=r.parentNode}t(n)};return document.body.addEventListener("click",n),function(){document.body.removeEventListener("click",n)}}function s(e,t){t=t||function(e){return e};var n=Object.assign({hitType:"event",hitCallback:t,eventAction:"Click",eventLabel:ServerData.eventLabel},e);"undefined"==typeof ga?(console.error("ga unavailable",n),t()):(ga("send",n),ga("sampling.send",n),navigator.sendBeacon&&setTimeout(t))}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return s})},,function(e,t,n){"use strict";function r(e,t){for(var n={},r=[],i=0,s=e;i<s.length;i++){var a=s[i],o=t(a);n[o]||(r.push(a),n[o]=1)}return r}function i(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return n;return-1}function s(e,t,n){var r;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(void 0,i)},t),a&&e.apply(void 0,i)}}n.d(t,"d",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return o});var a="function"==typeof Object.freeze;function o(e){return a&&Object.freeze(e),e}},function(e,t,n){},function(e,t,n){},,,,function(e,t){e.exports=function(e,t){var n,r,i=window.navigator,s=(e=window._buorgres=e||{}).l||(i.languages?i.languages[0]:null)||i.language||i.browserLanguage||i.userLanguage||document.documentElement.getAttribute("lang")||"en";e.ll=s=s.replace("_","-").toLowerCase().substr(0,2),e.apiver=e.api||e.c||-1;var a={i:12,f:54,o:46,s:10.1,n:20,c:59,y:17.04,v:1.1,uc:11.3},o={i:-2,f:-4,o:-4,s:-1.7,n:12,c:-4,a:534,y:-.02,v:-.02,uc:-.03};r=e.apiver<4?{i:9,f:10,o:20,s:7}:{i:8,f:5,o:12.5,s:6.2};e.vs;var c=e.vs||o;for(n in o)c[n]||(c[n]=o[n]),a[n]&&c[n]>=a[n]&&(c[n]=a[n]-.2),a[n]&&c[n]<0&&(c[n]=a[n]+c[n]),r[n]&&c[n]<r[n]&&(c[n]=r[n]);e.vsf=c,e.reminder<.1||0===e.reminder?e.reminder=0:e.reminder=e.reminder||24,e.reminderClosed=e.reminderClosed||168,e.onshow=e.onshow||function(e){},e.onclick=e.onclick||function(e){},e.onclose=e.onclose||function(e){},e.pageurl=e.pageurl||location.hostname||"x",e.newwindow=!1!==e.newwindow,e.test=t||e.test||"#test-bu"===location.hash||"#test-bu-beta"===location.hash||!1;var u=function(e){var t,n=e||navigator.userAgent,r=!1,i={i:"Internet Explorer",e:"Edge",f:"Firefox",o:"Opera",s:"Safari",n:"Netscape",c:"Chrome",a:"Android Browser",y:"Yandex Browser",v:"Vivaldi",uc:"UC Browser",x:"Other"};function s(e,t){if(RegExp(t,"i").test(n))return e}var a=s("bot","bot|spider|archiver|transcoder|crawl|checker|monitoring|screenshot|python-|php|uptime|validator|fetcher|facebook|slurp|google|yahoo|microsoft|node|mail.ru|github|cloudflare|addthis|thumb|proxy|feed|fetch|favicon|link|http|scrape|seo|page|search console|AOLBuild|Teoma|Gecko Expeditor")||s("discontinued browser","camino|flot|k-meleon|fennec|galeon|chromeframe|coolnovo")||s("complicated device browser","SMART-TV|SmartTV")||s("niche browser","Dorado|Whale|SamsungBrowser|MIDP|wii|Chromium|Puffin|Opera Mini|maxthon|maxton|dolfin|dolphin|seamonkey|opera mini|netfront|moblin|maemo|arora|kazehakase|epiphany|konqueror|rekonq|symbian|webos|PaleMoon|QupZilla|Otter|Midori|qutebrowser")||s("mobile without upgrade path or landing page","kindle|silk|blackberry|bb10|RIM|PlayBook|meego|nokia|ucweb|ZuneWP7|537.85.10")||s("android(chrome) web view","; wv"),o=/iphone|ipod|ipad|android|mobile|phone|ios|iemobile/i.test(n);if(a)return{n:"x",v:0,t:"other browser",donotnotify:a};for(var c=[["CriOS.VV","c"],["FxiOS.VV","f"],["Trident.*rv:VV","i"],["Trident.VV","io"],["UCBrowser.VV","uc"],["MSIE.VV","i"],["Edge.VV","e"],["Vivaldi.VV","v"],["OPR.VV","o"],["YaBrowser.VV","y"],["Chrome.VV","c"],["Firefox.VV","f"],["Version.VV.*Safari","s"],["Safari.VV","so"],["Opera.*Version.VV","o"],["Opera.VV","o"],["Netscape.VV","n"]],u=0;u<c.length;u++)if(n.match(new RegExp(c[u][0].replace("VV","(\\d+\\.?\\d+)"),"i"))){t=c[u][1];break}if("v"===t||"y"===t||"uc"===t)var l=RegExp.$1.split("."),d=l[0]+"."+("00".substring(0,2-l[1].length)+l[1]);else d=Math.round(10*parseFloat(RegExp.$1))/10;if(!t)return{n:"x",v:0,t:i[t],mobile:o};if(/windows.nt.5.0|windows.nt.4.0|windows.95|windows.98|os x 10.2|os x 10.3|os x 10.4|os x 10.5|os x 10.6|os x 10.7/i.test(n)&&(r="oldOS"),/iphone|ipod|ipad|ios/i.test(n))return n.replace("_",".").match(new RegExp("OS.(\\d+\\.?\\d?)","i")),t="iOS",d=parseFloat(RegExp.$1),Math.max(window.screen.height,window.screen.width)<=480||window.devicePixelRatio<2?{n:"s",v:d,t:"iOS "+d,donotnotify:"iOS without upgrade path",mobile:o}:{n:"s",v:d,t:"iOS "+d,donotnotify:!1,mobile:o};if(n.indexOf("Android")>-1&&"s"===t){var h=parseInt((/WebKit\/([0-9]+)/i.exec(n)||0)[1],10)||2e3;if(h<=534)return{n:"a",v:h,t:i.a,mob:!0,donotnotify:r,mobile:o}}return"f"!=t||45!=Math.round(d)&&52!=Math.round(d)||(r="ESR"),"so"==t&&(d=4,t="s"),"i"==t&&7==d&&window.XDomainRequest&&(d=8),"io"==t&&(t="i",d=d>6?11:d>5?10:d>4?9:d>3.1?8:d>3?7:9),"e"==t?{n:"i",v:d,t:i[t]+" "+d,donotnotify:r,mobile:o}:{n:t,v:d,t:i[t]+" "+d,donotnotify:r,mobile:o}}();if(!e.test){if(!u||!u.n||"x"===u.n||!1!==u.donotnotify||document.cookie.indexOf("browserupdateorg=pause")>-1&&e.reminder>0)return;if(u.v>c[u.n]||u.mobile&&!1===e.mobile)return}if(e.setCookie=function(e){document.cookie="browserupdateorg=pause; expires="+new Date((new Date).getTime()+36e5*e).toGMTString()+"; path=/"},e.reminder>0&&e.setCookie(e.reminder),e.nomessage)e.onshow(e);else{var l=document.createElement("script");l.src=e.jsshowurl||/file:/.test(location.href)&&"http://browser-update.org/update.show.min.js"||"//browser-update.org/update.show.min.js",document.body.appendChild(l)}}},function(e,t,n){"use strict";var r=n(17),i=n.n(r),s=[];function a(e){return e&&s.push(e),{start:function e(t){if(0===s.length)return t();setTimeout(function(){return function(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){t()},n.onerror=function(){t(new Error("Failed to load polyfill script "+e))},document.head.appendChild(n)}(s.shift(),function(n){return n?t(n):e(t)})})}}}function o(e){function t(){ga?(ga("send",{hitType:"event",eventCategory:"Browser Update Popup",eventAction:e,eventLabel:ServerData?ServerData.eventLabel:"",nonInteraction:!0}),ga("sampling.send",{hitType:"event",eventCategory:"Browser Update Popup",eventAction:e,eventLabel:ServerData?ServerData.eventLabel:"",nonInteraction:!0})):console.error("ga unavailable")}return function(){setTimeout(t,20)}}t.a=function(e){i()({notify:{i:11,c:"-12m",f:-4,s:-2,o:-4},unsecure:!0,api:5,onshow:o("Show"),onclick:o("Click"),onclose:o("Close")}),window.Proxy||a("https://unpkg.com/proxy-polyfill@0.1.7/proxy.min.js");for(var t=[],n=0,r=[{scope:window,feats:["Promise","fetch","URL","URLSearchParams","Map","localStorage","requestAnimationFrame"]},{scope:Element.prototype,prefix:"Element.prototype.",feats:["after","before","closest","remove","matches"]},{scope:Array,prefix:"Array.",feats:["from"]},{scope:Node.prototype,prefix:"Node.prototype.",feats:["contains"]},{scope:String.prototype,prefix:"String.prototype.",feats:["startsWith"]}];n<r.length;n++)for(var s=r[n],c=s.scope,u=s.feats,l=s.prefix,d=void 0===l?"":l,h=0,f=u;h<f.length;h++){var m=f[h];m in c||t.push(d+m)}window.URL&&!window.URL.prototype.hasOwnProperty("href")&&t.push("URL"),t.length&&a("https://cdn.polyfill.io/v2/polyfill.min.js?unknown=polyfill&flags=gated,always&features=default,"+t.join(",")),window.NodeList.prototype.forEach||(window.NodeList.prototype.forEach=Array.prototype.forEach),a().start(function(t){if(t)throw t;e()})}},,,function(e,t,n){"use strict";var r,i;n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),function(e){e[e.USER=0]="USER",e[e.BLOG=1]="BLOG",e[e.ITEM=2]="ITEM",e[e.COMMENT=3]="COMMENT",e[e.BLOG_CATEGORY=4]="BLOG_CATEGORY",e[e.BLOG_CATEGORY_ITEM_TAG=5]="BLOG_CATEGORY_ITEM_TAG",e[e.FEATURED_ITEM=6]="FEATURED_ITEM",e[e.CHAT_MESSAGE=7]="CHAT_MESSAGE",e[e.REPUTATIONLOG_ITEM=10]="REPUTATIONLOG_ITEM",e[e.POLL_OPTION=11]="POLL_OPTION",e[e.CHAT_THREAD=12]="CHAT_THREAD",e[e.IMAGE=100]="IMAGE",e[e.MUSIC=101]="MUSIC",e[e.VIDEO=102]="VIDEO",e[e.YOUTUBE=103]="YOUTUBE",e[e.SHARED_FOLDER=106]="SHARED_FOLDER",e[e.SHARED_FOLDER_FILE=109]="SHARED_FOLDER_FILE",e[e.VOICE=110]="VOICE",e[e.MODERATION_TASK=111]="MODERATION_TASK",e[e.SCREENSHOT=112]="SCREENSHOT",e[e.STICKER=113]="STICKER",e[e.STICKER_COLLECTION=114]="STICKER_COLLECTION",e[e.PROP=115]="PROP",e[e.CHAT_BUBBLE=116]="CHAT_BUBBLE",e[e.VIDEO_FILTER=117]="VIDEO_FILTER",e[e.ORDER=118]="ORDER",e[e.PRODUCT_SHARE_REQUEST=119]="PRODUCT_SHARE_REQUEST",e[e.VV_CHAT=120]="VV_CHAT",e[e.P2A=121]="P2A",e[e.AMINO_VIDEO=123]="AMINO_VIDEO"}(r||(r={})),function(e){e[e.FANS_STATUS_NONE=0]="FANS_STATUS_NONE",e[e.FANS_STATUS_ACTIVE=1]="FANS_STATUS_ACTIVE"}(i||(i={}))},,,function(e,t,n){var r,i,s;i=[e,n(116),n(114),n(113)],void 0===(s="function"==typeof(r=function(e,t,n,r){"use strict";var i=o(t),s=o(n),a=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===c(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,a.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return d("action",e)}},{key:"defaultTarget",value:function(e){var t=d("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return d("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(s.default);function d(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=l})?r.apply(t,i):r)||(e.exports=s)},,function(e,t,n){"use strict";var r={time:3e3},i={data:function(){return{active:!1,content:"",type:"show"}},methods:{show:function(e,t){void 0===t&&(t=r),e&&(this.active=!0,this.content=e,this.type="show",t.time&&this.delayClose(t.time))},delayClose:function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(e){t.active=!1},e)},warn:function(e,t){void 0===t&&(t=r),this.show(e,t),this.type="warn"},success:function(e,t){void 0===t&&(t=r),this.show(e,t),this.type="success"}},computed:{classBind:function(){return{active:this.active,"toast-warn":"warn"===this.type,"toast-success":"success"===this.type}}}},s=(n(107),n(1)),a=Object(s.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"global-toast",class:this.classBind},[t("div",{staticClass:"content"},[this._v("\n        "+this._s(this.content)+"\n    ")])])},[],!1,null,null,null);t.a=a.exports},function(e,t,n){"use strict";var r={},i=(n(109),n(1)),s=Object(i.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"hover-hint"},[this._t("default")],2)},[],!1,null,null,null);t.a=s.exports},function(e,t,n){"use strict";t.a={render:function(e){return e("span",{staticClass:"svg-icon-container",class:"lock",domProps:{innerHTML:'<svg viewBox="0 0 12 16" xmlns="http://www.w3.org/2000/svg"><path d="M2.1 3.946v2.125h-.9c-.663 0-1.2.544-1.2 1.215v6.071c0 .671.537 1.214 1.2 1.214h9.6c.663 0 1.2-.543 1.2-1.214V7.286c0-.671-.537-1.215-1.2-1.215h-.9V3.946C9.9 1.766 8.154 0 6 0S2.1 1.767 2.1 3.946zm1.5 2.125V3.946c0-1.341 1.074-2.428 2.4-2.428 1.326 0 2.4 1.087 2.4 2.428v2.125H3.6zm1.2 3.34c0-.671.537-1.215 1.2-1.215.663 0 1.2.544 1.2 1.215 0 .428-.22.804-.549 1.02 0 0 .117.716.249 1.56a.452.452 0 0 1-.45.455h-.9a.452.452 0 0 1-.45-.455l.249-1.56A1.216 1.216 0 0 1 4.8 9.41z" fill-rule="evenodd"/></svg>'}})}}},function(e,t,n){"use strict";t.a={render:function(e){return e("span",{staticClass:"svg-icon-container",class:"img-upload",domProps:{innerHTML:'<svg viewBox="0 0 20 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 0h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm1 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H3zm1.102 8.976l2.17-3.528a1 1 0 0 1 1.654-.074l.398.535a1 1 0 0 0 1.623-.026l1.284-1.847a1 1 0 0 1 1.675.049l2.992 4.893a1 1 0 0 1-.853 1.522H4.955a1 1 0 0 1-.853-1.524z"/></svg>'}})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){"use strict";function r(e,t){try{return sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}}function i(e){try{return JSON.parse(sessionStorage.getItem(e))}catch(e){}}function s(e){try{return sessionStorage.removeItem(e)}catch(e){}}n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s})},,function(e,t,n){"use strict";var r=n(12);n.n(r).a},,function(e,t,n){"use strict";var r=n(13);n.n(r).a},function(e,t){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function(e,t){for(;e&&e.nodeType!==n;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},function(e,t,n){var r=n(110);e.exports=function(e,t,n,i,s){var a=function(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}.apply(this,arguments);return e.addEventListener(n,a,s),{destroy:function(){e.removeEventListener(n,a,s)}}}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=n(112),i=n(111);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}(e,t,n);if(r.string(e))return function(e,t,n){return i(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var s=0,a=r.length;s<a;s++)r[s].fn!==t&&r[s].fn._!==t&&i.push(r[s]);return i.length?n[e]=i:delete n[e],this}},e.exports=n},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(e),r.removeAllRanges(),r.addRange(i),t=r.toString()}return t}},function(e,t,n){var r,i,s;i=[e,n(115)],void 0===(s="function"==typeof(r=function(e,t){"use strict";var n,r=(n=t)&&n.__esModule?n:{default:n},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return s(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=a})?r.apply(t,i):r)||(e.exports=s)},,,function(e,t,n){"use strict";(function(e){for(var n="undefined"!=typeof window&&"undefined"!=typeof document,r=["Edge","Trident","Firefox"],i=0,s=0;s<r.length;s+=1)if(n&&navigator.userAgent.indexOf(r[s])>=0){i=1;break}var a=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},i))}};function o(e){return e&&"[object Function]"==={}.toString.call(e)}function c(e,t){if(1!==e.nodeType)return[];var n=getComputedStyle(e,null);return t?n[t]:n}function u(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function l(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=c(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?e:l(u(e))}var d=n&&!(!window.MSInputMethodContext||!document.documentMode),h=n&&/MSIE 10/.test(navigator.userAgent);function f(e){return 11===e?d:10===e?h:d||h}function m(e){if(!e)return document.documentElement;for(var t=f(10)?document.body:null,n=e.offsetParent;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TD","TABLE"].indexOf(n.nodeName)&&"static"===c(n,"position")?m(n):n:e?e.ownerDocument.documentElement:document.documentElement}function p(e){return null!==e.parentNode?p(e.parentNode):e}function v(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,s=document.createRange();s.setStart(r,0),s.setEnd(i,0);var a,o,c=s.commonAncestorContainer;if(e!==c&&t!==c||r.contains(i))return"BODY"===(o=(a=c).nodeName)||"HTML"!==o&&m(a.firstElementChild)!==a?m(c):c;var u=p(e);return u.host?v(u.host,t):v(e,p(t).host)}function g(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function _(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function b(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],f(10)?n["offset"+e]+r["margin"+("Height"===e?"Top":"Left")]+r["margin"+("Height"===e?"Bottom":"Right")]:0)}function T(){var e=document.body,t=document.documentElement,n=f(10)&&getComputedStyle(t);return{height:b("Height",e,t,n),width:b("Width",e,t,n)}}var E=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function I(e){return C({},e,{right:e.left+e.width,bottom:e.top+e.height})}function S(e){var t={};try{if(f(10)){t=e.getBoundingClientRect();var n=g(e,"top"),r=g(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var i={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},s="HTML"===e.nodeName?T():{},a=s.width||e.clientWidth||i.right-i.left,o=s.height||e.clientHeight||i.bottom-i.top,u=e.offsetWidth-a,l=e.offsetHeight-o;if(u||l){var d=c(e);u-=_(d,"x"),l-=_(d,"y"),i.width-=u,i.height-=l}return I(i)}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=f(10),i="HTML"===t.nodeName,s=S(e),a=S(t),o=l(e),u=c(t),d=parseFloat(u.borderTopWidth,10),h=parseFloat(u.borderLeftWidth,10);n&&"HTML"===t.nodeName&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var m=I({top:s.top-a.top-d,left:s.left-a.left-h,width:s.width,height:s.height});if(m.marginTop=0,m.marginLeft=0,!r&&i){var p=parseFloat(u.marginTop,10),v=parseFloat(u.marginLeft,10);m.top-=d-p,m.bottom-=d-p,m.left-=h-v,m.right-=h-v,m.marginTop=p,m.marginLeft=v}return(r&&!n?t.contains(o):t===o&&"BODY"!==o.nodeName)&&(m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=g(t,"top"),i=g(t,"left"),s=n?-1:1;return e.top+=r*s,e.bottom+=r*s,e.left+=i*s,e.right+=i*s,e}(m,t)),m}function A(e){if(!e||!e.parentElement||f())return document.documentElement;for(var t=e.parentElement;t&&"none"===c(t,"transform");)t=t.parentElement;return t||document.documentElement}function L(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},a=i?A(e):v(e,t);if("viewport"===r)s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=O(e,n),i=Math.max(n.clientWidth,window.innerWidth||0),s=Math.max(n.clientHeight,window.innerHeight||0),a=t?0:g(n),o=t?0:g(n,"left");return I({top:a-r.top+r.marginTop,left:o-r.left+r.marginLeft,width:i,height:s})}(a,i);else{var o=void 0;"scrollParent"===r?"BODY"===(o=l(u(t))).nodeName&&(o=e.ownerDocument.documentElement):o="window"===r?e.ownerDocument.documentElement:r;var d=O(o,a,i);if("HTML"!==o.nodeName||function e(t){var n=t.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===c(t,"position")||e(u(t)))}(a))s=d;else{var h=T(),f=h.height,m=h.width;s.top+=d.top-d.marginTop,s.bottom=f+d.top,s.left+=d.left-d.marginLeft,s.right=m+d.left}}return s.left+=n,s.top+=n,s.right-=n,s.bottom-=n,s}function M(e,t,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=L(n,r,s,i),o={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},c=Object.keys(o).map(function(e){return C({key:e},o[e],{area:(t=o[e],t.width*t.height)});var t}).sort(function(e,t){return t.area-e.area}),u=c.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),l=u.length>0?u[0].key:c[0].key,d=e.split("-")[1];return l+(d?"-"+d:"")}function N(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return O(n,r?A(t):v(t,n),r)}function k(e){var t=getComputedStyle(e),n=parseFloat(t.marginTop)+parseFloat(t.marginBottom),r=parseFloat(t.marginLeft)+parseFloat(t.marginRight);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function R(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function x(e,t,n){n=n.split("-")[0];var r=k(e),i={width:r.width,height:r.height},s=-1!==["right","left"].indexOf(n),a=s?"top":"left",o=s?"left":"top",c=s?"height":"width",u=s?"width":"height";return i[a]=t[a]+t[c]/2-r[c]/2,i[o]=n===o?t[o]-r[u]:t[R(o)],i}function D(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function P(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=D(e,function(e){return e[t]===n});return e.indexOf(r)}(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&o(n)&&(t.offsets.popper=I(t.offsets.popper),t.offsets.reference=I(t.offsets.reference),t=n(t,e))}),t}function F(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function j(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],s=i?""+i+n:e;if(void 0!==document.body.style[s])return s}return null}function U(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e,t,n,r){n.updateBound=r,U(e).addEventListener("resize",n.updateBound,{passive:!0});var i=l(e);return function e(t,n,r,i){var s="BODY"===t.nodeName,a=s?t.ownerDocument.defaultView:t;a.addEventListener(n,r,{passive:!0}),s||e(l(a.parentNode),n,r,i),i.push(a)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function V(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,U(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function $(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function B(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&$(t[n])&&(r="px"),e.style[n]=t[n]+r})}function z(e,t,n){var r=D(e,function(e){return e.name===t}),i=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!i){var s="`"+t+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return i}var G=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],W=G.slice(3);function Y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=W.indexOf(e),r=W.slice(n+1).concat(W.slice(0,n));return t?r.reverse():r}var q={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function J(e,t,n,r){var i=[0,0],s=-1!==["right","left"].indexOf(r),a=e.split(/(\+|\-)/).map(function(e){return e.trim()}),o=a.indexOf(D(a,function(e){return-1!==e.search(/,|\s/)}));a[o]&&-1===a[o].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,u=-1!==o?[a.slice(0,o).concat([a[o].split(c)[0]]),[a[o].split(c)[1]].concat(a.slice(o+1))]:[a];return(u=u.map(function(e,r){var i=(1===r?!s:s)?"height":"width",a=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,a=!0,e):a?(e[e.length-1]+=t,a=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+i[1],a=i[2];if(!s)return e;if(0===a.indexOf("%")){var o=void 0;switch(a){case"%p":o=n;break;case"%":case"%r":default:o=r}return I(o)[t]/100*s}if("vh"===a||"vw"===a)return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*s;return s}(e,i,t,n)})})).forEach(function(e,t){e.forEach(function(n,r){$(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))})}),i}var K={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,s=i.reference,a=i.popper,o=-1!==["bottom","top"].indexOf(n),c=o?"left":"top",u=o?"width":"height",l={start:y({},c,s[c]),end:y({},c,s[c]+s[u]-a[u])};e.offsets.popper=C({},a,l[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,i=e.offsets,s=i.popper,a=i.reference,o=r.split("-")[0],c=void 0;return c=$(+n)?[+n,0]:J(n,s,a,o),"left"===o?(s.top+=c[0],s.left-=c[1]):"right"===o?(s.top+=c[0],s.left+=c[1]):"top"===o?(s.left+=c[0],s.top-=c[1]):"bottom"===o&&(s.left+=c[0],s.top+=c[1]),e.popper=s,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||m(e.instance.popper);e.instance.reference===n&&(n=m(n));var r=j("transform"),i=e.instance.popper.style,s=i.top,a=i.left,o=i[r];i.top="",i.left="",i[r]="";var c=L(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=s,i.left=a,i[r]=o,t.boundaries=c;var u=t.priority,l=e.offsets.popper,d={primary:function(e){var n=l[e];return l[e]<c[e]&&!t.escapeWithReference&&(n=Math.max(l[e],c[e])),y({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=l[n];return l[e]>c[e]&&!t.escapeWithReference&&(r=Math.min(l[n],c[e]-("right"===e?l.width:l.height))),y({},n,r)}};return u.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";l=C({},l,d[t](e))}),e.offsets.popper=l,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],s=Math.floor,a=-1!==["top","bottom"].indexOf(i),o=a?"right":"bottom",c=a?"left":"top",u=a?"width":"height";return n[o]<s(r[c])&&(e.offsets.popper[c]=s(r[c])-n[u]),n[c]>s(r[o])&&(e.offsets.popper[c]=s(r[o])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!z(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var i=e.placement.split("-")[0],s=e.offsets,a=s.popper,o=s.reference,u=-1!==["left","right"].indexOf(i),l=u?"height":"width",d=u?"Top":"Left",h=d.toLowerCase(),f=u?"left":"top",m=u?"bottom":"right",p=k(r)[l];o[m]-p<a[h]&&(e.offsets.popper[h]-=a[h]-(o[m]-p)),o[h]+p>a[m]&&(e.offsets.popper[h]+=o[h]+p-a[m]),e.offsets.popper=I(e.offsets.popper);var v=o[h]+o[l]/2-p/2,g=c(e.instance.popper),_=parseFloat(g["margin"+d],10),b=parseFloat(g["border"+d+"Width"],10),T=v-e.offsets.popper[h]-_-b;return T=Math.max(Math.min(a[l]-p,T),0),e.arrowElement=r,e.offsets.arrow=(y(n={},h,Math.round(T)),y(n,f,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(F(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=L(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=R(r),s=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case q.FLIP:a=[r,i];break;case q.CLOCKWISE:a=Y(r);break;case q.COUNTERCLOCKWISE:a=Y(r,!0);break;default:a=t.behavior}return a.forEach(function(o,c){if(r!==o||a.length===c+1)return e;r=e.placement.split("-")[0],i=R(r);var u=e.offsets.popper,l=e.offsets.reference,d=Math.floor,h="left"===r&&d(u.right)>d(l.left)||"right"===r&&d(u.left)<d(l.right)||"top"===r&&d(u.bottom)>d(l.top)||"bottom"===r&&d(u.top)<d(l.bottom),f=d(u.left)<d(n.left),m=d(u.right)>d(n.right),p=d(u.top)<d(n.top),v=d(u.bottom)>d(n.bottom),g="left"===r&&f||"right"===r&&m||"top"===r&&p||"bottom"===r&&v,_=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(_&&"start"===s&&f||_&&"end"===s&&m||!_&&"start"===s&&p||!_&&"end"===s&&v);(h||g||b)&&(e.flipped=!0,(h||g)&&(r=a[c+1]),b&&(s=function(e){return"end"===e?"start":"start"===e?"end":e}(s)),e.placement=r+(s?"-"+s:""),e.offsets.popper=C({},e.offsets.popper,x(e.instance.popper,e.offsets.reference,e.placement)),e=P(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,s=r.reference,a=-1!==["left","right"].indexOf(n),o=-1===["top","left"].indexOf(n);return i[a?"left":"top"]=s[n]-(o?i[a?"width":"height"]:0),e.placement=R(t),e.offsets.popper=I(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!z(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=D(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,i=e.offsets.popper,s=D(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==s?s:t.gpuAcceleration,o=S(m(e.instance.popper)),c={position:i.position},u={left:Math.floor(i.left),top:Math.round(i.top),bottom:Math.round(i.bottom),right:Math.floor(i.right)},l="bottom"===n?"top":"bottom",d="right"===r?"left":"right",h=j("transform"),f=void 0,p=void 0;if(p="bottom"===l?-o.height+u.bottom:u.top,f="right"===d?-o.width+u.right:u.left,a&&h)c[h]="translate3d("+f+"px, "+p+"px, 0)",c[l]=0,c[d]=0,c.willChange="transform";else{var v="bottom"===l?-1:1,g="right"===d?-1:1;c[l]=p*v,c[d]=f*g,c.willChange=l+", "+d}var _={"x-placement":e.placement};return e.attributes=C({},_,e.attributes),e.styles=C({},c,e.styles),e.arrowStyles=C({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return B(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach(function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&B(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var s=N(i,t,e,n.positionFixed),a=M(n.placement,s,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",a),B(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},X=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};E(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=a(this.update.bind(this)),this.options=C({},e.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(C({},e.Defaults.modifiers,i.modifiers)).forEach(function(t){r.options.modifiers[t]=C({},e.Defaults.modifiers[t]||{},i.modifiers?i.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return C({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&o(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return w(e,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=N(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=M(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=x(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=P(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,F(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[j("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=H(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return V.call(this)}}]),e}();X.Utils=("undefined"!=typeof window?window:e).PopperUtils,X.placements=G,X.Defaults=K,t.a=X}).call(this,n(31))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"OBJECT_TYPE",function(){return l.b}),n.d(r,"FANS_STATUS",function(){return l.a}),n.d(r,"CHAT_MESSAGE_TYPE",function(){return a}),n.d(r,"FLAG_TYPE",function(){return o}),n.d(r,"FLAG_TYPE_NAME_MAP",function(){return m}),n.d(r,"FLAG_TYPE_NAME_FULL",function(){return p}),n.d(r,"CHAT_THREAD_TYPE",function(){return d}),n.d(r,"CHAT_MEMBERSHIP_STATUS",function(){return h}),n.d(r,"CHAT_THREAD_CONDITION",function(){return f}),n.d(r,"OBJECT_STATUS_DISABLED",function(){return g}),n.d(r,"CHANGE_SOURCE",function(){return v}),n.d(r,"USER_ROLE_SYSTEM_NEWSFEED",function(){return T}),n.d(r,"USER_ROLE_SYSTEM",function(){return E}),n.d(r,"CHAT_ALERT_OPTION",function(){return b}),n.d(r,"ACCOUNT_MEMBERSHIP_STATUS_NONE",function(){return w}),n.d(r,"ACCOUNT_MEMBERSHIP_STATUS_AMINO_PLUS",function(){return y});var i,s,a,o,c=n(7),u=n(6),l=n(21);!function(e){e[e.USER_GENERAL=0]="USER_GENERAL",e[e.USER_STRIKE=1]="USER_STRIKE",e[e.USER_VOICE_NOTE=2]="USER_VOICE_NOTE",e[e.USER_STICKER=3]="USER_STICKER",e[e.USER_VIDEO=4]="USER_VIDEO",e[e.USER_SHARE_EXTURL=50]="USER_SHARE_EXTURL",e[e.USER_SHARE_OBJECT=51]="USER_SHARE_OBJECT",e[e.USER_CALL_NO_ANSWERED=52]="USER_CALL_NO_ANSWERED",e[e.USER_CALL_CANCELLED=53]="USER_CALL_CANCELLED",e[e.USER_CALL_DECLINED=54]="USER_CALL_DECLINED",e[e.USER_VIDEO_CALL_NO_ANSWERED=55]="USER_VIDEO_CALL_NO_ANSWERED",e[e.USER_VIDEO_CALL_CANCELLED=56]="USER_VIDEO_CALL_CANCELLED",e[e.USER_VIDEO_CALL_DECLINED=57]="USER_VIDEO_CALL_DECLINED",e[e.USER_AVATAR_CALL_NO_ANSWERED=58]="USER_AVATAR_CALL_NO_ANSWERED",e[e.USER_AVATAR_CALL_CANCELLED=59]="USER_AVATAR_CALL_CANCELLED",e[e.USER_AVATAR_CALL_DECLINED=60]="USER_AVATAR_CALL_DECLINED",e[e.INFO_DELETED=100]="INFO_DELETED",e[e.INFO_MEMBER_BECOME_ACTIVE=101]="INFO_MEMBER_BECOME_ACTIVE",e[e.INFO_MEMBER_QUIT=102]="INFO_MEMBER_QUIT",e[e.INFO_SESSION_INIT=103]="INFO_SESSION_INIT",e[e.INFO_BACKGROUND_CHANGE=104]="INFO_BACKGROUND_CHANGE",e[e.INFO_TITLE_CHANGE=105]="INFO_TITLE_CHANGE",e[e.INFO_ICON_CHANGE=106]="INFO_ICON_CHANGE",e[e.INFO_START_AUDIO_CHAT=107]="INFO_START_AUDIO_CHAT",e[e.INFO_START_VIDEO_CHAT=108]="INFO_START_VIDEO_CHAT",e[e.INFO_START_AVATAR_CHAT=109]="INFO_START_AVATAR_CHAT",e[e.INFO_END_AUDIO_CHAT=110]="INFO_END_AUDIO_CHAT",e[e.INFO_END_VIDEO_CHAT=111]="INFO_END_VIDEO_CHAT",e[e.INFO_END_AVATAR_CHAT=112]="INFO_END_AVATAR_CHAT",e[e.INFO_CONTENT_CHANGE=113]="INFO_CONTENT_CHANGE",e[e.INFO_START_SCREENING_ROOM=114]="INFO_START_SCREENING_ROOM",e[e.INFO_END_SCREENING_ROOM=115]="INFO_END_SCREENING_ROOM",e[e.INFO_ORGANIZER_TRANSFERRED=116]="INFO_ORGANIZER_TRANSFERRED",e[e.CLIENT_WELCOME=65281]="CLIENT_WELCOME"}(a||(a={})),function(e){e[e.BULLYING=0]="BULLYING",e[e.INAPPROPRIATE_CONTENT=1]="INAPPROPRIATE_CONTENT",e[e.SPAM=2]="SPAM",e[e.ART_THEFT=3]="ART_THEFT",e[e.OFF_TOPIC=4]="OFF_TOPIC",e[e.TROLLING=5]="TROLLING",e[e.SEXUALLY_EXPLICIT=100]="SEXUALLY_EXPLICIT",e[e.VIOLENT_CONTENT=101]="VIOLENT_CONTENT",e[e.INAPPROPRIATE_REQUESTS=102]="INAPPROPRIATE_REQUESTS",e[e.REPORT_PROBLEM_TO_LEADER=103]="REPORT_PROBLEM_TO_LEADER",e[e.USER_IN_AUDIO_CHAT=104]="USER_IN_AUDIO_CHAT",e[e.USER_IN_VIDEO_CHAT=105]="USER_IN_VIDEO_CHAT",e[e.OTHERS=200]="OTHERS",e[e.OTHERS_VVCHAT=201]="OTHERS_VVCHAT"}(o||(o={}));var d,h,f,m=((i={})[o.BULLYING]=_("Bullying"),i[o.SEXUALLY_EXPLICIT]=_("Sexually Explicit"),i[o.INAPPROPRIATE_REQUESTS]=_("Inappropriate Requests"),i[o.VIOLENT_CONTENT]=_("Extreme Violence"),i[o.SPAM]=_("Spam"),i[o.OTHERS]=_("Other Reason"),i),p=((s={})[o.BULLYING]=_("Report Bullying"),s[o.SEXUALLY_EXPLICIT]=_("Report Sexually Explicit"),s[o.INAPPROPRIATE_REQUESTS]=_("Report Inappropriate Requests"),s[o.VIOLENT_CONTENT]=_("Report Extreme Violence"),s[o.SPAM]=_("Report Spam"),s[o.OTHERS]=_("Report Other Reason"),s);!function(e){e[e.SINGLE=0]="SINGLE",e[e.GROUP=1]="GROUP",e[e.PUBLIC=2]="PUBLIC"}(d||(d={})),function(e){e[e.NONE=0]="NONE",e[e.ACTIVE=1]="ACTIVE",e[e.INVITE_SENT=2]="INVITE_SENT",e[e.JOIN_REQUESTED=3]="JOIN_REQUESTED"}(h||(h={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.PUBLIC_OPEN=1]="PUBLIC_OPEN",e[e.AUTHORABSENT=2]="AUTHORABSENT"}(f||(f={}));var v,g=9;!function(e){e[e.LOAD_OLD=0]="LOAD_OLD",e[e.LOOP_NEW=1]="LOOP_NEW",e[e.SELF_ADD=2]="SELF_ADD",e[e.INITIAL_LOAD=3]="INITIAL_LOAD"}(v||(v={}));var b,T=253,E=254;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.SILENT=2]="SILENT"}(b||(b={}));var w=0,y=1;var C={inserted:function(e,t){var n=parseInt(t.value||40,10);if(e.classList.add("scroll-self"),!getComputedStyle(e).overscrollBehavior){var r=function(e,t){return function(n){var r=-n.deltaY||-n.detail;e.scrollTop+=(r<0?1:-1)*t,n.preventDefault()}}(e,n);!function(e,t){e.__scroll_listener__=t}(e,r),e.addEventListener("wheel",r)}},unbind:function(e){e.classList.remove("scroll-self");var t=function(e){var t=e.__scroll_listener__;return e.__scroll_listener__=null,t}(e);t&&e.removeEventListener("wheel",t)}};var I=n(11),S=ServerData.community.ndcId,O=window.top===window;function A(e){if(!e)return null;var t=ServerData.userInfo.uid;if(e.author&&e.author.uid!==t)return e.author;var n=e.membersSummary.filter(function(e){return e.uid!==t});return n?n[0]:e.membersSummary[1]}function L(e){var t=e.membershipStatus;return e.type===d.SINGLE&&t===h.INVITE_SENT}function M(e){return e&&e.type===a.USER_GENERAL&&e.mediaType===l.b.IMAGE}function N(e){return e.type===a.INFO_MEMBER_BECOME_ACTIVE&&e.author.uid===ServerData.userInfo.uid}var k=document.createElement("div");function R(e){if(!e)return"";var t=function(e){e=e.trim();var t=x.exec(e);if(!t)return[e,""];for(var n=[],r=0,i=t[1].toUpperCase().split("");r<i.length;r++){var s=i[r];n.push(D[s])}return[e.replace(x,""),n.join(" ")]}(e),n=t[0],r=t[1];return"<p"+(r?' class="'+r+'"':"")+">"+(n=function(e){return e.replace(/https?:\/\/[a-zA-Z0-9;,/?:@&=+$_.!~*#-]+/g,function(e){var t=0===e.indexOf(location.origin)?'target="_parent"':' target="_blank" rel="nofollow noreferrer noopener"';return'<a href="'+e+'"'+t+">"+e+"</a>"})}(n))+"</p>"}var x=/\[([BICUS]+)\]/i,D={B:"bolder",I:"italic",C:"center",U:"underline",S:"strike"};function P(e){var t={target:"",width:"",height:"",uhq:"",dateNo:"",hash:"",extension:"",size:""};if("string"!=typeof e)return t;var n=e.split("/"),r=n.length;if(r<2)return t;t.dateNo=n[r-2];var i=n[r-1].split(/r\d+-/);if(2===i.length){t.hash=i[0],t.target=/r\d+/.exec(n[r-1])[0];var s=/^(\d+)-(\d+)(v2)?_([^.]+)\.([^.]+)$/.exec(i[1]);t.width=s[1],t.height=s[2],t.uhq=s[3]||"",t.size=s[4],t.extension=s[5]}else if(1===i.length){var a=i[0].split(/_|\./),o=a[0],c=a[1],u=a[2];t.hash=o,t.size=c,t.extension=u}return t}function F(e){return e.role===T?"Newsfeed":e.role===E?"Team Amino":e.nickname}var j=n(105),U=ServerData.userInfo&&ServerData.userInfo.uid,H="CHAT_DRAFT_KEY-"+U;var V=new c.default;function $(){try{return localStorage.getItem("chat-window-minimized")}catch(e){return!1}}var B=ServerData.userInfo,z={};function G(){return(new Date).toISOString()}var W=9e5,Y=[a.USER_GENERAL,a.USER_VOICE_NOTE,a.USER_STICKER,a.INFO_DELETED,a.INFO_MEMBER_BECOME_ACTIVE,a.INFO_MEMBER_QUIT,a.INFO_TITLE_CHANGE,a.INFO_ICON_CHANGE,a.INFO_CONTENT_CHANGE,a.INFO_SESSION_INIT];function q(e,t,n){for(var r=0,i=e;r<i.length;r++){i[r].index+=n}var s=e[0];s||(s={index:t.length-1,time:Date.now()},e.unshift(s));for(var a=n-1;a>=0;a--){var o=t[a];if(-1!==Y.indexOf(o.type)&&o.author.status!==g){var c=+new Date(o.createdTime);s.time-c>W&&(s={index:a,time:c},e.unshift(s))}}}function J(e,t){if(Boolean(e.isPinned)!==Boolean(t.isPinned))return e.isPinned?-1:1;var n=+(e.membershipStatus===h.NONE);return 0==(n^+(t.membershipStatus===h.NONE))?function(e,t){var n=K(e),r=K(t);return n>r?-1:n<r?1:0}(e,t):n?-1:1}function K(e){return e.latestActivityTime||e.lastMessageSummary&&e.lastMessageSummary.createdTime||e.createdTime}function X(e,t,n){var r=e.messages;e.messageChangeSource=v.LOOP_NEW;var i=e.addedMessageCount=function(e,t,n){for(var r=e.messages,i=r.slice(-n),s=i.length,a=0;a<t.length;a++)i.push(t[a]);var o=(i=Object(I.d)(i,function(e){return e.messageId})).length,c=e.currentThread;if(c&&c.type!==d.SINGLE)for(a=s;a<o;a++)r.push(Object(I.c)(i[a])),Q(e,i[a]),V.$emit("msg",i[a]);else for(a=s;a<o;a++)r.push(Object(I.c)(i[a])),V.$emit("msg",i[a]);return o-s}(e,t,n);if(function(e,t,n){var r=e[e.length-1];r||(r={index:0,time:a=t[0]?+new Date(t[0].createdTime):Date.now()},e.push(r));for(var i=t.length,s=i-n;s<i;s++){var a,o=t[s];-1!==Y.indexOf(o.type)&&(a=+new Date(o.createdTime))-r.time>W&&(r={index:s,time:a},e.push(r))}}(e.timestamps,r,i),t.length){var s=t[t.length-1];if(s.messageId===e.currentThread.lastMessageSummary.messageId)return;e.currentThread.lastMessageSummary=s,e.currentThread.latestActivityTime=s.createdTime,e.currentThread.lastReadTime=s.createdTime}}function Q(e,t){var n=e.currentThread;N(t)&&(e.messages.push({author:n.author,content:n.content,type:a.CLIENT_WELCOME,createdTime:t.createdTime,threadId:n.threadId}),e.messageChangeSource=v.SELF_ADD)}function Z(e,t){if(e.currentThread){var n=e.currentThread,r=G();n.lastReadTime=r>n.latestActivityTime?r:n.latestActivityTime,function(e,t){if(e.lastMessageSummary&&!e.lastMessageSummary.messageId){for(var n,r=t.length-1;r>=0;r--)t[r].messageId&&(n=t[r]);n?e.lastMessageSummary=n:console.error("unexpected empty lastMessage!")}}(n,e.messages)}e.currentThread=t,t&&(t.lastReadTime=G()),e.showRightSidebar=!1}function ee(e,t){var n=e.messages,r=Object(I.b)(n,function(e){return!e.messageId&&e.clientRefId===t.clientRefId});r>=0&&n.splice(r,1),e.pendingMessageNumber-=1,e.pendingMessageNumber=Math.max(0,e.pendingMessageNumber)}var te={mergeMessages:function(e,t){var n=t.msgs,r=t.size,i=e.messages;e.messageChangeSource=v.LOAD_OLD;var s=e.addedMessageCount=function(e,t,n){for(var r=e.slice(0,n),i=r.length,s=t.length-1;s>=0;s--)r.unshift(t[s]);var a=(r=Object(I.d)(r,function(e){return e.messageId})).length-i;for(s=a-1;s>=0;s--)e.unshift(Object(I.c)(r[s]));return a}(i,n,r);q(e.timestamps,i,s)},mergeThreads:function(e,t){e.addedThreadCount=function(e,t,n){for(var r=0,i=0,s=n.length;i<s;i++){var a=n[i],o=t[a.threadId];if(void 0!==o)for(var u=0,l=Object.keys(a);u<l.length;u++){var d=l[u];c.default.set(o,d,a[d])}else e.push(a),t[a.threadId]=a,r++}return e.sort(J),r}(e.threadList,e.threadMap,t)},addOneThread:function(e,t){var n=t.thread,r=n.threadId;e.threadMap[r]||(e.threadMap[r]=n,e.threadList.unshift(n),e.threadList.sort(J))},updateThreads:function(e,t){!function(e,t,n,r){for(var i=0,s=n;i<s.length;i++){var a=s[i],o=a[0],c=a[1],u=a[2],l=a[3],d=t[o];d&&(d.latestActivityTime<c&&(d.latestActivityTime=c),d.lastReadTime<u&&(d.lastReadTime=u),d.alertOption=l)}e.sort(J)}(e.threadList,e.threadMap,t,e.currentThread)},setThread:function(e,t){Z(e,t),e.loadingMessage=!0},joinThread:function(e,t){var n=e.threadMap[t];n&&(n.membershipStatus=h.ACTIVE),e.showRightSidebar=!1},setThreadAlert:function(e,t){var n=t.threadId,r=t.alertOption;e.currentThread&&e.currentThread.threadId===n&&(e.currentThread.alertOption=r)},toggleRightSidebar:function(e,t){e.showRightSidebar=t},leaveThread:function(e,t){var n=t.threadId,r=Object(I.b)(e.threadList,function(e){return e.threadId===n});r>=0&&(e.threadList.splice(r,1),c.default.delete(e.threadMap,n))},setMessages:function(e,t){e.messages=t,e.messageChangeSource=v.INITIAL_LOAD,e.timestamps=[],q(e.timestamps,t,t.length),e.loadingMessage=!1},mergeLoopMessages:function(e,t){X(e,t.newMsgs,t.size+e.pendingMessageNumber)},addPendingMessage:function(e,t){var n=e.currentThread.threadId,r=z[n]||0;t.clientRefId=r,t.author=B,t.createdTime=G(),z[n]=r+1,e.messages.push(t),e.messageChangeSource=v.SELF_ADD,e.currentThread.lastMessageSummary=t,e.pendingMessageNumber+=1},deleteSending:function(e,t){e.currentThread&&ee(e,t)},confirmSendMessage:function(e,t){if(e.currentThread&&e.currentThread.threadId===t.threadId){ee(e,t);var n=e.messages;e.currentThread.threadId===t.threadId&&-1===Object(I.b)(n,function(e){return e.messageId===t.messageId})&&(t.author.webURL=B.webURL,!function(e){if(e.length<=0)return!1;var t=e[e.length-1];return M(t)&&!/^http/.test(t.mediaValue)}(n)?n.push(t):n.splice(n.length-1,0,t)),e.currentThread.latestActivityTime=G(),e.threadList.sort(J)}},setSingleChatPartner:function(e,t){var n=A(e.currentThread);(!t||n&&n.uid===t.uid)&&(e.singleChatPartner=t,t&&(n.icon=t.icon))},toggleFollowStatus:function(e,t){var n=e.singleChatPartner;n&&n.uid===t&&(n.membershipStatus^=1,1&n.membershipStatus?n.membersCount+=1:n.membersCount-=1)},toggleMinimize:function(e){e.isMinimizedView=!e.isMinimizedView},startDragFile:function(e){var t=e.currentThread;if(t&&t.status!==g&&t.status!==f.AUTHORABSENT){var n=t.membershipStatus,r=n===h.INVITE_SENT;(n===h.ACTIVE||t.type===d.SINGLE&&r)&&(e.waitDragging=!0)}},endDragFile:function(e){e.waitDragging=!1},toggleHasMessageWhenMinimized:function(e,t){e.hasMessagesWhenMinimized=t},setDraft:function(e,t){var n,r=t.threadId,i=t.text;i?c.default.set(e.draftMessages,r,i):c.default.delete(e.draftMessages,r),n=e.draftMessages,U&&Object(j.c)(H,n)},setThreadForTracker:function(e,t){},openChatWindowForTrack:function(e){}};for(var ne={},re=0,ie=ServerData.threadList;re<ie.length;re++){var se=ie[re];ne[se.threadId]=se}var ae={threadList:ServerData.threadList,currentThread:null,messages:[],timestamps:[],emptyRun:0,threadMap:ne,singleChatPartner:null,messageChangeSource:null,showRightSidebar:!1,loadingMessage:!1,isMinimizedView:!1,hasMessagesWhenMinimized:!1,pendingMessageNumber:0,waitDragging:!1,addedMessageCount:0,addedThreadCount:0,draftMessages:U&&Object(j.a)(H)||{}},oe=n(5);function ce(e){var t=e.ndcId,n=e.threadId,r=e.stoptime,i=e.starttime,s=e.size,a=void 0===s?10:s;return Object(oe.h)("chat-thread-messages",{ndcId:t,threadId:n,stoptime:r,size:a,starttime:i}).then(function(e){return e.originalResult})}function ue(e){var t=e.ndcId,n=e.start,r=void 0===n?0:n,i=e.size,s=void 0===i?10:i;return Object(oe.b)("chat/live-threads",{ndcId:t,start:r,size:s})}function le(e){var t=e.ndcId,n=e.threadId;return Object(oe.h)("get-one-thread",{ndcId:t,threadId:n})}function de(e){var t=e.ndcId,n=e.userId;return Object(oe.h)("chat/get-user-profile",{ndcId:t,userId:n}).then(function(e){return e.userProfile})}function he(e){var t=e.ndcId,n=e.collectionId,r=t?{ndcId:t,collectionId:n}:{collectionId:n},i="collection-sticker:"+n,s=function(e){try{return JSON.parse(sessionStorage.getItem(e))}catch(e){}}(i);return s?Promise.resolve(s):Object(oe.h)("/api/chat-stickers",r).then(function(e){var t=e.stickerCollection;return function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}}(i,t),t})}var fe,me,pe,ve,ge=window.top!==window,_e=ServerData.community.ndcId,be={0:5e3,10:1e4,20:15e3,60:3e4,300:45e3},Te={0:5e3,10:1e4,20:15e3,60:3e4,300:45e3},Ee={0:3e4,10:61e4,20:615e3,60:63e4},we={0:65e3,10:61e4,20:615e3,60:63e4},ye=!1;function Ce(e){var t=e.hasWebSocket,n=e.hasThreadAlert;!0===t?(ye=!0,me=we):!1===t&&(ye=!1,fe=be,me=Te),!0===n?fe=ye?Ee:be:!1===n&&(fe=be)}Ce({hasWebSocket:!1,hasThreadAlert:!1});var Ie=0,Se=0;function Oe(){return ge||document.hidden}function Ae(e,t,n){!0===ge&&!1===t&&e.commit("openChatWindowForTrack",n),void 0!==t&&(ge=t),Oe()?(clearTimeout(pe),clearTimeout(ve),pe=void 0,ve=void 0):(Ie=0,Se=0,e.state.loadingMessage||(pe||xe(e,100),ve||De(e,100)))}function Le(e){return clearTimeout(pe),pe=void 0,Oe()?Promise.resolve():ke(e)}function Me(e){return clearTimeout(ve),ve=void 0,Oe()?Promise.resolve():Re(e)}function Ne(e){switch(e.type){case"setThread":case"confirmSendMessage":Ie=0}}function ke(e){var t=e.state,n=e.commit;if(t.currentThread){var r=t.currentThread.threadId,i=t.messages,s={ndcId:_e,threadId:r,size:25},a=i.length>0?i[i.length-1].createdTime:void 0;return a&&(s.starttime=a),ce(s).then(function(i){if(t.currentThread&&r===t.currentThread.threadId){n("mergeLoopMessages",{newMsgs:i,size:25});var s=Pe(Ie+=i.length>1?0:1,fe);t.currentThread&&r===t.currentThread.threadId&&xe(e,s)}}).catch(function(t){console.error(t);var n=Pe(Ie+=10,fe);xe(e,n)})}}function Re(e){var t,n;(t={ndcId:_e},n=t.ndcId,Object(oe.h)("thread-check",{ndcId:n})).then(function(t){!function(e,t){for(var n=t.state,r=t.commit,i=!1,s=n.threadMap,a=function(e){var t=s[e];t?t.needHidden||(i=!0,ce({ndcId:_e,threadId:e,size:1}).then(function(e){t.lastMessageSummary=e[0],V.$emit("msg",t.lastMessageSummary)})):le({ndcId:_e,threadId:e}).then(function(e){var t=e.thread;r("addOneThread",{thread:t}),V.$emit("msg",t.lastMessageSummary)})},o=0,c=e;o<c.length;o++){var u=c[o][0];a(u)}r("updateThreads",e);for(var l=n.currentThread,d=0,h=e;d<h.length;d++){var f=h[d],u=f[0],m=f[1];u===l.threadId&&l.lastReadTime<=m&&Le(t)}i?Se=0:Se++}(t.threadCheckResult,e);var n=Pe(Se,me);De(e,n)}).catch(function(t){console.error(t);var n=Pe(Se+=10,me);De(e,n)})}function xe(e,t){Oe()||(pe=setTimeout(function(){ke(e)},t))}function De(e,t){Oe()||(ve=setTimeout(function(){Re(e)},t))}function Pe(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];if(e<=+i)return t[i]}return 1926081788}function Fe(e,t){var n=window.top;n&&n!==window?("closeChatWindow"===e&&Ae(ri,!0),n.postMessage({type:e,payload:t,identity:"chat"},location.origin)):console.error("bad embedder!",e,t)}function je(e){return"chat-last-thread-"+e}var Ue=ServerData.community.ndcId,He=ServerData.userInfo;var Ve,$e,Be=null,ze=function(e){return e}({setThread:function(e,t){var n=e.state,r=e.commit,i=e.dispatch;if(!function(e,t){return e&&t&&t.threadId===e.threadId}(n.currentThread,t)&&(r("setThread",t),r("setSingleChatPartner",null),Be&&(clearTimeout(Be),Be=null),t))return new Promise(function(e){Be=setTimeout(function(){e(i("setThreadAux",t))},200)})},setThreadAux:function(e,t){var n,r,i=e.commit,s=e.state,a=e.dispatch,o=e.getters;t.type===d.SINGLE&&a("queryUserDetail",A(t));return t.membershipStatus===h.ACTIVE&&(n=Ue,r=t.threadId,localStorage.setItem(je(n),r)),o.threadAllRead&&Fe("threadAllRead",Ue.replace("x","")),Ce({hasThreadAlert:t.membershipStatus===h.ACTIVE&&void 0!=t.alertOption&&t.alertOption!==b.OFF}),ce({ndcId:Ue,threadId:t.threadId,size:25}).then(function(e){if(s.currentThread.threadId===t.threadId){var n=[].slice.call(e);i("setMessages",n)}}).catch(function(e){console.error(e),i("setMessages",[])})},addPendingMessage:function(e,t){var n=e.state,r=e.commit;n.currentThread&&r("addPendingMessage",t)},confirmSendMessage:function(e,t){var n=e.state,r=e.commit,i=e.dispatch,s=n.currentThread;if(s){var a=s.threadId,o=Promise.resolve();return L(s)&&(o=i("joinThread",a)),o.then(function(){return function(e){var t=e.ndcId,n=e.threadId,r=e.message;return Object(oe.h)("add-chat-message",{ndcId:t,threadId:n,message:r}).then(function(e){return e.originalResult})}({ndcId:Ue,message:t,threadId:a})}).then(function(n){n=Object.assign(t,n),r("confirmSendMessage",n),Le(e)})}},joinThread:function(e,t){return function(e){var t=e.ndcId,n=e.threadId;return Object(oe.h)("join-thread",{ndcId:t,threadId:n})}({ndcId:Ue,threadId:t}).then(function(n){e.commit("joinThread",t),Le(e)})},leaveThread:function(e,t){var n=e.state,r=e.dispatch,i=e.commit,s=n.threadMap[t],a=Promise.resolve();return s&&L(s)&&(a=r("joinThread",t)),a.then(function(){return function(e){var t=e.ndcId,n=e.threadId;return Object(oe.h)("leave-thread",{ndcId:t,threadId:n})}({ndcId:Ue,threadId:t})}).then(function(){var e,a=n.currentThread.threadId===t;if(i("leaveThread",s),e=Ue,localStorage.removeItem(je(e)),a){var o=n.threadList[0];r("setThread",o)}})},setThreadAlert:function(e,t){var n=e.state,r=e.commit;if(n.currentThread){var i={threadId:n.currentThread.threadId,alertOption:t};return function(e,t){var n=t.threadId,r=t.alertOption;return Object(oe.h)("/api/chat-thread/alert",{ndcId:e,threadId:n,alertOption:r})}(Ue,i).then(function(){r("setThreadAlert",i)})}},addOneThread:function(e,t){var n=e.state,r=e.commit,i=e.dispatch,s=t.threadId,a=t.source,o=t.action;r("setThreadForTracker",{threadId:s,source:a,action:o}),n.threadMap[s]?i("setThread",n.threadMap[s]):le({ndcId:Ue,threadId:s}).then(function(e){var t=e.thread;r("addOneThread",{thread:t,source:a}),i("setThread",t)})},receiveSingleChat:function(e,t){e.state;var n=e.commit,r=e.dispatch,i=t.thread,s=t.source,a=t.action;n("addOneThread",{thread:i,source:"profile_page"}),n("setThreadForTracker",{source:s,action:a,threadId:i.threadId}),r("setThread",i)},queryUserDetail:function(e,t){var n=e.commit;de({ndcId:Ue,userId:t.uid}).then(function(e){n("setSingleChatPartner",e)})},toggleFollow:function(e){var t=e.state,n=e.commit;if(!t.singleChatPartner)return Promise.resolve();var r=t.singleChatPartner.uid,i=t.singleChatPartner.membershipStatus,s={ndcId:Ue,followerId:He.uid,followeeId:r};return(1&i?function(e){var t=e.ndcId,n=e.followeeId,r=e.followerId;return Object(oe.h)("/api/unfollow-user",{ndcId:t,followee_id:n,follower_id:r})}(s):function(e){var t=e.ndcId,n=e.followeeId;return Object(oe.h)("/api/follow-user",{ndcId:t,followee_id:n})}(s)).then(function(){n("toggleFollowStatus",r)})},loadOldMessages:function(e,t){var n=e.state,r=(e.commit,n.currentThread.threadId),i=n.messages[0],s=i&&i.createdTime;return ce({ndcId:Ue,threadId:r,stoptime:s,size:t})},rotateThread:function(e,t){var n=e.state,r=e.dispatch,i=e.commit,s=n.threadList,a=s.indexOf(n.currentThread);if(!(a<0)){var o=a+t;o<0||o>=s.length||(i("setThreadForTracker",{threadId:s[o].threadId,source:"chat_thread_list",action:"click"}),r("setThread",s[o]))}},toggleMinimize:function(e){var t=e.state,n=e.commit;Fe("toggleMinimize",!t.isMinimizedView),t.isMinimizedView?(n("toggleHasMessageWhenMinimized",!1),setTimeout(function(){n("toggleMinimize")},300)):n("toggleMinimize")},webSocketPushMessage:($e=!1,function(e,t){if(Oe())return Fe("newMessageInNdc",t.ndcId),void Fe("sendNotification",t);if(Ve!==t.tid||!$e){var n=e.state;n.currentThread&&t.tid===n.currentThread.threadId?($e=!0,Ve=t.tid,Le(e).then(function(){$e=!1})):"x"+t.ndcId===Ue?(Me(e),Fe("newMessageInNdc",t.ndcId)):(Fe("newMessageInNdc",t.ndcId),Fe("sendNotification",t))}})});var Ge,We,Ye=function(){try{return JSON.parse(localStorage.getItem("global-block-"+ServerData.userInfo.uid)).obj}catch(e){return{blockedUidList:[],blockerUidList:[]}}}(),qe=ServerData.community&&ServerData.community.leaderId||"",Je=ServerData.userInfo&&ServerData.userInfo.uid,Ke=function(e){return e}({threadAllRead:function(e){return e.threadList.every(function(e){return e.latestActivityTime<=e.lastReadTime})},organizer:function(e){return e.currentThread&&e.currentThread.author},isSystemLike:function(e){if(!e.singleChatPartner)return!1;var t=e.singleChatPartner.role;return t===E||t===T},isPartnerBlocked:function(e){if(Je&&qe&&Je===qe)return!1;if(!e.singleChatPartner)return!1;var t=e.singleChatPartner.uid;return Ye.blockedUidList.indexOf(t)>-1},isBlockedByPartner:function(e){if(Je&&qe&&Je===qe)return!1;if(!e.singleChatPartner)return!1;var t=e.singleChatPartner.uid;return t!==qe&&Ye.blockerUidList.indexOf(t)>-1},isCurrentThreadSendable:function(e){var t=e.currentThread;if(!t||t.status===g||t.status===f.AUTHORABSENT)return!1;var n=t.membershipStatus,r=n===h.INVITE_SENT;return n===h.ACTIVE||t.type===d.SINGLE&&r},isCurrentThreadFanClubExpired:function(e){var t=e.currentThread,n=ServerData.userInfo;if(!(t&&t.author&&n&&n.fanClubList))return!1;var r=t.author.uid,i=n.fanClubList,s=Object(I.b)(i,function(e){return e.targetUid===r});return s>=0&&Date.now()>new Date(i[s].expiredTime).getTime()}}),Xe=n(9),Qe=((Ge={})[d.SINGLE]="1-1_chat",Ge[d.GROUP]="group_chat",Ge[d.PUBLIC]="public_chat",Ge),Ze=((We={})[d.SINGLE]="1-1",We[d.GROUP]="Group",We[d.PUBLIC]="Public",We),et={sidebar_public_chatrooms:"Sidebar Public Chat",suggested_public_chatrooms:"Suggested Public Chat",chat_thread_page:"Chat Thread Page",my_chats:"My Chats",sidebar_community_list:"Sidebar Community List",community_card:"Community Card",profile_page:"User Profile",chat_thread_list:"Chat Thread List",minimized_chat_window:"Minimized Chat Window"},tt=function(e){!function(e){var t=new URL(location.href),n=t.searchParams.get("source"),r=t.searchParams.get("action");n&&r&&e.state.currentThread&&rt({source:n,action:r},e)}(e);e.subscribe(function(t){return function(e,t){var n=t.type,r=t.payload,i=e.state,s=i.currentThread||{};switch(n){case"toggleRightSidebar":if(!i.showRightSidebar)break;var o=Qe[s.type];Object(Xe.c)({eventCategory:"Check Chat Info",eventAction:"click",eventLabel:o}),collectTEA("chat_info_page_opened",{type:Ze[s.type],source:"Chat Thread"});break;case"setThreadForTracker":(s.threadId!==r.threadId||st)&&(st=!1,rt({source:r.source,action:r.action},e));break;case"openChatWindowForTrack":r?(Object(Xe.c)({eventCategory:"Enter Chat Thread",eventLabel:r.source,eventAction:r.action}),m(r.source)):st=!0;break;case"addOneThread":var c=r.thread,u=r.source;it[c.threadId]=u;break;case"toggleFollowStatus":var d=i.singleChatPartner,h=1&d.membershipStatus?"Follow":"Unfollow",f=1&d.membershipStatus?"follow_user":"unfollow_user";Object(Xe.c)({eventCategory:h,eventAction:"submit",eventLabel:"chat_info"}),collectTEA(f,{source:"Chat Info"});break;case"leaveThread":var o=Qe[r.type];Object(Xe.c)({eventCategory:"Leave Conversation",eventAction:"click",eventLabel:o}),collectTEA("leave_conversation",{type:Ze[r.type],source:"Chat Info Page"});break;case"joinThread":var u=it[r]||"my_chats";Object(Xe.c)({eventCategory:"Join Group Chat",eventAction:"click",eventLabel:u});var c=i.currentThread;if(!c)return;collectTEA("join_chat_thread",{type:Ze[c.type],source:et[u]});break;case"toggleMinimize":i.isMinimizedView?(Object(Xe.c)({eventCategory:"Minimize Chat Window",eventAction:"click"}),collectTEA("minimize_chat_window")):(Object(Xe.c)({eventCategory:"Enter Chat Thread",eventAction:"click",eventLabel:"minimized_chat_window"}),m("minimized_chat_window"));break;case"confirmSendMessage":var c=i.currentThread;if(!c)return;collectTEA("chat_message_sent",{type:Ze[c.type],message_type:function(e){var t=e.type;return t===a.USER_STICKER||e.mediaType===l.b.STICKER?e.stickerType:t===a.USER_GENERAL?e.mediaType===l.b.IMAGE?"Photo":e.mediaType===l.b.YOUTUBE?"Youtube":"Text":t===a.USER_VOICE_NOTE?"Voice Note":"Other"}(r),source:"Chat Thread"})}function m(e){var t=i.currentThread;t&&collectTEA("enter_chat_thread",{type:Ze[t.type],gated:t.extensions&&t.extensions.fansOnly?"True":"False",source:et[e]})}}(e,t)})},nt=null;function rt(e,t){var n=e.source,r=e.action;null!==nt&&(clearTimeout(nt),nt=null),nt=setTimeout(function(){Object(Xe.c)({eventCategory:"Enter Chat Thread",eventAction:r,eventLabel:n});var e=t.state.currentThread;e&&collectTEA("enter_chat_thread",{type:Ze[e.type],gated:e.extensions&&e.extensions.fansOnly?"True":"False",source:et[n]}),nt=null},1e3)}var it={},st=!0;var at={PUSH_MESSAGE:10};function ot(e){var t=function(){var e=window.webSocketURL;if(e)try{var t=new ct;return t.setupWebSocket(e),t}catch(e){console.error(e)}}();return t?(t.registerHandler(at.PUSH_MESSAGE,function(t){var n=t.payload;n&&(Ce({hasWebSocket:!0}),e.dispatch("webSocketPushMessage",n))}),t.onAbjure=function(){Ce({hasWebSocket:!1}),Le(e),Me(e)},t):null}var ct=function(){function e(){this.handlerCollection={},this.failedNum=0,this.onAbjure=function(){}}return e.prototype.setupWebSocket=function(e){var t=this;this.websocket=new WebSocket(e),this.websocket.onmessage=this.receive.bind(this),this.websocket.onclose=function(e){t.failedNum++,1006===e.code&&t.failedNum<10?Object(oe.b)("chat/web-socket-url").then(function(e){var n=e.url;t.setupWebSocket(n)}).catch(function(){return t.onAbjure()}):(t.onAbjure(),console.error(e))}},e.prototype.send=function(e,t){var n=JSON.stringify({t:e,o:t});this.websocket.send(n)},e.prototype.receive=function(e){try{var t=e.data,n=JSON.parse(t),r=n.t,i=n.o,s=this.handlerCollection[r];if(!s)return;for(var a=0,o=s;a<o.length;a++){(0,o[a])(i)}}catch(e){console.error(e)}},e.prototype.registerHandler=function(e,t){var n=this.handlerCollection[e];n||(n=this.handlerCollection[e]=[]),n.push(t)},e.prototype.unregisterHandler=function(e,t){var n=this.handlerCollection[e];if(n){var r=n.indexOf(t);n.splice(r,1)}},e}();var ut=function(){return function(e,t){this.key=e,this.getter=t}}(),lt=function(){function e(e){void 0===e&&(e={}),this._options=e}return e.prototype.props=function(e){return this._options.props=e,this},e.prototype.data=function(e){return this._options.data=e,this},e.prototype.computed=function(e){for(var t=this._options.computed=this._options.computed||{},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t[i]=e[i]}return this},e.prototype.methods=function(e){for(var t=this._options.methods=this._options.methods||{},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t[i]=e[i]}return this},e.prototype.components=function(e){return this._options.components=e,this},e.prototype.inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._options.inject=e.map(function(e){return e.key}),this},e.prototype.render=function(e){return this._options.render=e,this},e.prototype.watch=function(e){for(var t=this._options.watch=this._options.watch||{},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t[i]=e[i]}return this},e.prototype.provide=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._options.provide=function(){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];t[i.key]=i.getter.bind(this)}return t},this},e.prototype.lifecycle=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this._options[r]=e[r]}return this},e.prototype.done=function(e){return this._options},e}();function dt(){return new lt}function ht(e){return Object(u.mapState)(e)}var ft=dt().computed(ht(["currentThread","showRightSidebar"])).methods({toggle:function(){this.$store.commit("toggleRightSidebar",!this.showRightSidebar)},closeWindow:function(){Fe("closeChatWindow")},minimizeWindow:function(){this.$store.dispatch("toggleMinimize")}}).done(),mt=(n(312),n(1)),pt=Object(mt.a)(ft,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-actions"},[e.currentThread?n("i",{staticClass:"hoverable amino-icon amino-icon-splat",class:{active:e.showRightSidebar},on:{click:e.toggle}}):e._e(),e._v(" "),n("i",{staticClass:"hoverable close amino-icon amino-icon-upward",on:{click:e.minimizeWindow}}),e._v(" "),n("i",{staticClass:"hoverable close amino-icon amino-icon-x",on:{click:e.closeWindow}})])},[],!1,null,null,null).exports,vt=n(0),gt=n(4),_t=dt().data(function(e){return{isSendable:!1,uploadId:void 0}}).methods({chooseFile:function(){gt.c&&this.$refs.fileInput.click()},drawPreview:function(e){var t=this;this.uploadId=e,Object(gt.b)(this.$refs.imagePreview,e,gt.c).then(function(){t.isSendable=!0,t.$emit("image-submitted")})},emptyFileInput:function(){var e=this.$refs.fileInput;e.setAttribute("value",""),e.value=""},drawAminoURL:function(e){this.uploadId=-1,this.$refs.imagePreview.src=e,this.isSendable=!0,this.$emit("image-submitted")}}).methods({addMessage:function(){this.isSendable&&(this.$store.dispatch("addPendingMessage",{content:null,mediaType:l.b.IMAGE,mediaValue:this.$refs.imagePreview.src,type:a.USER_GENERAL,uploadId:this.uploadId,sendFailed:!1}),this.isSendable=!1,this.uploadId=void 0,this.emptyFileInput())},deleteImage:function(){this.emptyFileInput(),gt.c.removeFileRef(this.uploadId),this.isSendable=!1,this.uploadId=void 0,this.$refs.imagePreview.src="",this.$emit("image-deleted")},onNewFile:function(e){e&&Object(gt.f)(e,gt.c).then(this.drawPreview).catch(this.$toast.warn)}}).methods({imageChosen:function(){this.onNewFile(this.$refs.fileInput)}}).lifecycle({mounted:function(){gt.d.$on("paste",this.onNewFile),gt.a.$on("dropped",this.onNewFile),gt.a.$on("error",this.$toast.warn),gt.a.$on("dropURL",this.drawAminoURL)},beforeDestroy:function(){gt.d.$off("paste",this.onNewFile),gt.d.$off("dropped",this.onNewFile),gt.a.$off("error",this.$toast.warn),gt.a.$off("dropURL",this.drawAminoURL)}}).done(),bt=(n(310),Object(mt.a)(_t,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image-preview-container"},[t("input",{ref:"fileInput",staticClass:"upload-hidden",attrs:{type:"file",accept:"image/gif, image/jpg, image/jpeg, image/png"},on:{change:this.imageChosen}}),this._v(" "),t("img",{ref:"imagePreview",staticClass:"image-preview img-cover",class:{"upload-hidden":!this.isSendable}}),this._v(" "),t("i",{staticClass:"fa fa-trash",on:{click:this.deleteImage}})])},[],!1,null,null,null).exports);function Tt(e,t){if(!e||e.indexOf("img.youtube.com")>=0)return e||"/static/img/user-icon-placeholder.png";var n=e.split("_"),r=n[0],i=n[1];return i?r+"_"+t+"."+i.split(".")[1]:e}c.default.filter("prettyDate",function(e){var t=new Date(e),n=(Date.now()-+t)/1e3;if(n<5*Et)return _("Now");if(n<wt){var r=""+Math.floor(n/Et);return"{{time}}m".replace("{{time}}",r)}if(n<yt){var i=""+Math.floor(n/wt);return"{{time}}h".replace("{{time}}",i)}if(n<2*Ct){var s=""+Math.floor(n/yt);return"{{time}}d".replace("{{time}}",s)}if(n<6*Ct){var a=""+Math.floor(n/Ct);return"{{time}}mo".replace("{{time}}",a)}return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()}),c.default.filter("resizeImage",Tt),c.default.filter("prettyTimestamp",function(e){var t=new Date(e),n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),i=(+n-+e)/1e3;if(n.toLocaleDateString()===t.toLocaleDateString())return It(t);if(i<(+n-+r)/1e3+86400)return _("Yesterday")+" "+It(t);if(i<12*Ct)return t.getMonth()+1+"/"+t.getDate()+" "+It(t);return t.toLocaleDateString()+" "+It(t)}),c.default.filter("postToHTML",function(e,t){var n=void 0===t?{}:t;if(n.skipLink,n.contenImages,!e||"string"!=typeof e)return e;var r,i="";r=e,k.textContent=r;for(var s=0,a=(e=k.innerHTML).split("\n");s<a.length;s++)i+=R(a[s]);return i}),c.default.filter("userAvatar",function(e,t){return Tt(function(e,t){return e.role===T?"/static/img/ic-amino.png":e.role===E?"/static/img/ic-amino.png":e.icon}(e),t)}),c.default.filter("userNickname",F);var Et=60,wt=60*Et,yt=24*wt,Ct=30*yt;function It(e){return e.toLocaleTimeString().replace(/:\d\d /," ")}var St=ServerData.userInfo;function Ot(e){return e.membersSummary.slice(0,4)}function At(e){return e.type===d.SINGLE?F(Lt(e)):e.title||function(e){return Ot(e).map(function(e){return e.nickname}).join(", ")}(e)}function Lt(e){return A(e)}function Mt(e){return e.latestActivityTime||e.lastMessageSummary&&e.lastMessageSummary.createdTime||e.createdTime}function Nt(e){var t=e.lastMessageSummary;if(!t)return"";var n=function(e){var t=e.lastMessageSummary;if(!t)return"";var n="uid"in t&&t.uid;if(n&&n!==St.uid)for(var r=0,i=e.membersSummary;r<i.length;r++){var s=i[r];if(s.uid===n)return s.nickname+": "}var a=t.author;return a&&a.uid!==St.uid?a.nickname+": ":""}(e);switch(t.mediaType){case l.b.IMAGE:return n+_("[Image]");case l.b.YOUTUBE:return n+_("[Video]");case l.b.VOICE:return n+_("[Voice Note]");case l.b.STICKER:return n+_("[Sticker]");case 0:case null:return t.content?n+t.content:""}}var kt=dt().data(function(e){return{isSendable:!1,threadId:"",setIsSendable:Object(I.a)(function(){e.isSendable=!!e.$refs.textarea.value},50)}}).computed(ht(["currentThread","draftMessages","loadingMessage"])).methods({trySend:function(){this.$parent.$refs.sendButton.trySend()}}).methods({handleKeyDown:function(e){if(this.isSendable||8!==e.keyCode&&46!==e.keyCode){if(13===e.keyCode||"Enter"===e.key)return e.ctrlKey||e.metaKey||e.altKey?(e.preventDefault(),void function(e,t){if(document.selection)e.focus(),document.selection.createRange().text=t;else if(e.selectionStart||0===e.selectionStart){var n=e.selectionStart,r=e.selectionEnd;e.value=e.value.substring(0,n)+t+e.value.substring(r,e.value.length),e.selectionStart=n+t.length,e.selectionEnd=n+t.length}else e.value+=t}(e.target,"\n")):void(e.shiftKey||e.isComposing||(e.preventDefault(),this.trySend()))}else this.$emit("over-delete")},addMessage:function(){var e=this.$refs.textarea.value;e&&(this.$refs.textarea.value="",this.isSendable=!1,this.$store.dispatch("addPendingMessage",{content:e,mediaType:0,type:a.USER_GENERAL,sendFailed:!1}))},focusText:function(){this.$refs.textarea&&this.$refs.textarea.focus()},suppressImageFilename:function(e){e.clipboardData&&e.clipboardData.items&&Array.prototype.forEach.call(e.clipboardData.items,function(t){/^image\//.test(t.type)&&e.preventDefault()})},saveDraft:function(){var e=this.$refs.textarea;this.threadId&&this.$store.commit("setDraft",{threadId:this.threadId,text:e.value})}}).lifecycle({mounted:function(){this.focusText(),this.threadId=this.currentThread.threadId,window.addEventListener("beforeunload",this.saveDraft)},beforeDestroy:function(){this.saveDraft(),window.removeEventListener("beforeunload",this.saveDraft)}}).watch({currentThread:function(){this.saveDraft()},loadingMessage:function(e){!e&&this.currentThread&&(this.focusText(),this.threadId=this.currentThread.threadId,this.$refs.textarea.value=this.draftMessages[this.threadId]||"")}}).done(),Rt=(n(308),Object(mt.a)(kt,function(){var e=this.$createElement;return(this._self._c||e)("textarea",{directives:[{name:"scroll-self",rawName:"v-scroll-self",value:15,expression:"15"}],ref:"textarea",staticClass:"text-input",attrs:{placeholder:this._("Send a message...")},on:{input:this.setIsSendable,paste:this.suppressImageFilename,keydown:this.handleKeyDown}})},[],!1,null,null,null).exports),xt={render:function(e){return e("span",{staticClass:"svg-icon-container",class:"send",domProps:{innerHTML:'<svg viewBox="0 0 18 15" xmlns="http://www.w3.org/2000/svg"><path d="M.008 15L17.5 7.5.008 0 0 5.833 12.5 7.5 0 9.167z" fill-rule="nonzero"/></svg>'}})}},Dt=n(27).a,Pt=Object(mt.a)(Dt,void 0,void 0,!1,null,null,null).exports,Ft=new ut("messageSender",function(){return[this.$refs.plainText,this.$refs.uploadImage]}),jt={1:1,10:8,30:20},Ut=dt().components({SendIcon:xt,HoverHint:Pt}).inject(Ft).data(function(){return{messages:0,messageCounts:[]}}).computed({isSendTooQuick:function(){for(var e=0,t=Object.keys(jt);e<t.length;e++){var n=t[e],r=+n,i=this.messageCounts.slice(0,r).reduce(function(e,t){return e+t},0);if(jt[n]<=i)return!0}return!1},isSendable:function(){return this.messageSender().some(function(e){return e.isSendable})}}).computed({canSend:function(){return!this.isSendTooQuick&&this.isSendable}}).methods({trySend:function(){this.isSendable&&(this.isSendTooQuick?this.$toast.warn("Slow down please.",{time:1e3}):(this.messages+=1,this.messageSender().filter(function(e){return e.isSendable}).forEach(function(e){return e.addMessage()}),this.$emit("new-message")))}}).lifecycle({mounted:function(){var e=this;this.checkInterval=setInterval(function(){for(e.messageCounts.unshift(e.messages);e.messageCounts.length>30;)e.messageCounts.pop();e.messages=0},1e3)},beforeDestroy:function(){clearInterval(this.checkInterval)}}).done(),Ht=(n(306),Object(mt.a)(Ut,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"send-button",class:{"can-send":this.canSend},on:{click:this.trySend}},[t("SendIcon"),this._v(" "),t("HoverHint",{staticClass:"top align-right"},[this._v("\n        "+this._s(this._("Press Enter to send"))+"\n    ")])],1)},[],!1,null,null,null).exports),Vt=window.MoodSticker,$t={data:function(){return{collections:[Vt],scrollStatus:{leftMost:!0,rightMost:!0},activeCollectionId:Vt.collectionId}},methods:{clickCollection:function(e){var t=e.currentTarget;this.activeCollectionId=t.dataset.id,this.$emit("collection-selected",t.dataset.id)},startHover:function(e){var t=e.currentTarget,n=t.getBoundingClientRect();this.$emit("collection-starthover",{text:t.dataset.text,top:n.top,left:n.left+15})},endHover:function(e){this.$emit("collection-endhover")},toggleOverflowHint:function(){var e=this.$refs.scroller,t=e.offsetWidth,n=e.scrollWidth,r=e.scrollLeft;this.scrollStatus.leftMost=r<=5,this.scrollStatus.rightMost=r+t>=n-5},scrollToLeft:function(){this.$refs.scroller.scrollLeft-=300},scrollToRight:function(){this.$refs.scroller.scrollLeft+=300},setupCollection:function(e){var t=e.stickerCollectionList;t=t.filter(function(e){return e.status!==g}),t=Object(I.c)(t),this.collections=this.collections.concat(t)}},mounted:function(){var e,t,n;(this.$emit("collection-selected",Vt.collectionId),ServerData.userInfo.accountMembershipStatus===this.constants.ACCOUNT_MEMBERSHIP_STATUS_AMINO_PLUS)&&(e={ndcId:S},t=e.ndcId,n=t?{ndcId:t}:{},Object(oe.h)("/api/chat-sticker-collection/active",n)).then(this.setupCollection)}},Bt=(n(304),1),zt=2,Gt=3;var Wt,Yt,qt,Jt={data:function(){return{hoverText:"",stickers:[],tipClass:{active:!1,top:!1,bottom:!1},stickerType:""}},methods:{sendSticker:function(e){var t=e.currentTarget;this.$store.dispatch("addPendingMessage",{type:a.USER_STICKER,stickerId:t.dataset.id,mediaValue:t.dataset.media,stickerType:this.stickerType,sendFailed:!1}),this.closeSticker()},loadCollection:function(e){var t=this;he({ndcId:S,collectionId:e}).then(function(e){var n,r=e.stickerList,i=e.collectionType,s=e.collectionId;r=r.filter(function(e){return e.status!==g}),t.stickers=Object(I.c)(r),t.stickerType=(n=i)===Bt?"Sticker Sets":n==zt?"Custom Sticker":n==Gt?"Shared Sticker Pack Sticker":"mood"===s?"Emoji Sticker":void 0}).catch(function(e){t.$toast.warn(e&&e.message)})},enterSticker:function(e){var t=e.target,n=t.getBoundingClientRect();this.startHover({text:t.dataset.text,top:n.top,left:n.left+38})},startHover:function(e){if(e.text){this.hoverText=e.text;var t=this.$refs.hoverHint.$el.style;t.top=e.top+"px",t.left=e.left+"px",this.tipClass.active=!0,this.tipClass.top=!0,this.tipClass.bottom=!1}},endHover:function(){this.tipClass.active=!1},closeSticker:function(){this.$emit("close-sticker"),this.endHover(),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},open:function(){var e=this;this.$nextTick(function(){e.unsubscribe=Object(Xe.a)(e.$el,e.closeSticker),e.$refs.collection.toggleOverflowHint()})}},components:{StickerCollection:Object(mt.a)($t,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sticker-collection-container scroll-clipper"},[n("div",{directives:[{name:"scroll-self",rawName:"v-scroll-self"}],ref:"scroller",staticClass:"scroller-x",on:{scroll:e.toggleOverflowHint}},[n("ul",{staticClass:"sticker-collections"},e._l(e.collections,function(t){return n("li",{key:t.collectionId,staticClass:"sticker-collection",class:{active:t.collectionId===e.activeCollectionId},attrs:{"data-text":t.name,"data-id":t.collectionId},on:{mouseenter:e.startHover,mouseleave:e.endHover,click:e.clickCollection}},[n("img",{attrs:{src:e._f("resizeImage")(t.icon,68),alt:t.name}})])}))]),e._v(" "),e.scrollStatus.rightMost?e._e():n("i",{staticClass:"amino-icon amino-icon-rightward overflow-hint",on:{click:e.scrollToRight}}),e._v(" "),e.scrollStatus.leftMost?e._e():n("i",{staticClass:"amino-icon amino-icon-leftward overflow-hint",on:{click:e.scrollToLeft}})])},[],!1,null,null,null).exports,HoverHint:Pt}},Kt=(n(302),Object(mt.a)(Jt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sticker-panel"},[n("ul",{directives:[{name:"scroll-self",rawName:"v-scroll-self"}],staticClass:"sticker-list"},e._l(e.stickers,function(t){return n("li",{key:t.stickerId,staticClass:"sticker",attrs:{"data-text":t.name,"data-id":t.stickerId,"data-media":t.icon},on:{click:e.sendSticker,mouseenter:e.enterSticker,mouseleave:e.endHover}},[n("img",{staticClass:"img-cover sticker-img",attrs:{src:t.icon,draggable:"false"}})])})),e._v(" "),n("StickerCollection",{ref:"collection",on:{"collection-selected":e.loadCollection,"collection-starthover":e.startHover,"collection-endhover":e.endHover}}),e._v(" "),n("HoverHint",{ref:"hoverHint",staticClass:"align-center",class:e.tipClass},[e._v("\n        "+e._s(e.hoverText)+"\n    ")])],1)},[],!1,null,null,null).exports),Xt=n(29),Qt={render:function(e){return e("span",{staticClass:"svg-icon-container",class:"sticker",domProps:{innerHTML:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 1a9 9 0 1 1 0 18 9 9 0 0 1 0-18zm0 16.65a7.65 7.65 0 1 0 0-15.3 7.65 7.65 0 0 0 0 15.3zm2.732-4.977v-.018a.675.675 0 1 1 .963.945 5.17 5.17 0 0 1-7.295.09.675.675 0 0 1 .932-.963 3.825 3.825 0 0 0 5.4-.054zM6.85 9.995a1.35 1.35 0 1 1 0-2.7 1.35 1.35 0 0 1 0 2.7zm6.3 0a1.35 1.35 0 1 1 0-2.7 1.35 1.35 0 0 1 0 2.7z" fill-rule="nonzero" stroke="#666" stroke-width=".4"/></svg>'}})}},Zt=dt().components({UploadImage:bt,PlainText:Rt,SendButton:Ht,Stickers:Kt,ImgUploadIcon:Xt.a,StickerIcon:Qt}).data(function(){return{stickerShown:!1}}).methods({chooseImage:function(){this.$refs.uploadImage.chooseFile()},focusText:function(){this.$refs.plainText.focusText()},deleteImage:function(){this.$refs.uploadImage.deleteImage()},showSticker:function(){this.stickerShown||(this.stickerShown=!0,this.$refs.sticker.open())},closeSticker:function(){this.stickerShown=!1}}).provide(Ft).done(),en=(n(300),Object(mt.a)(Zt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-input-area"},[n("div",{staticClass:"image-wrapper"},[n("UploadImage",{ref:"uploadImage",on:{"image-submitted":e.focusText,"image-deleted":e.focusText}})],1),e._v(" "),n("div",{staticClass:"main-input-wrapper"},[n("PlainText",{ref:"plainText",on:{"over-delete":e.deleteImage}}),e._v(" "),n("div",{staticClass:"send-icons"},[n("ImgUploadIcon",{staticClass:"icon",nativeOn:{click:function(t){return e.chooseImage(t)}}}),e._v(" "),n("StickerIcon",{staticClass:"icon smile-face",class:{active:e.stickerShown},nativeOn:{click:function(t){return e.showSticker(t)}}}),e._v(" "),n("Stickers",{directives:[{name:"show",rawName:"v-show",value:e.stickerShown,expression:"stickerShown"}],ref:"sticker",on:{"close-sticker":e.closeSticker}}),e._v(" "),n("SendButton",e._g({ref:"sendButton",staticClass:"pull-right"},e.$listeners))],1)],1)])},[],!1,null,null,null).exports),tn={props:{reason:String,thread:Object},computed:{fanclubText:function(){var e=this.thread;return e&&e.author?_("Join {{owner}}'s Fan Club on the Amino app to chat.").replace("{{owner}}",F(e.author)):_("This chat is fan club member only.")}}},nn=(n(298),Object(mt.a)(tn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unavailable-chat"},["DISABLED"===e.reason?[n("i",{staticClass:"amino-icon amino-icon-warn"}),e._v(" "),n("p",[e._v("\n        "+e._s(e._("This chat has been disabled."))+"\n        ")])]:"AUTHOR_ABSENT"===e.reason?[n("i",{staticClass:"amino-icon amino-icon-minus-rev"}),e._v(" "),n("p",[e._v("\n            "+e._s(e._("The organizer has left the conversation."))),n("br"),e._v("\n            "+e._s(e._("No further messages can be sent."))+"\n        ")])]:"FANCLUB_ONLY"===e.reason?[n("i",{staticClass:"amino-icon amino-icon-lock"}),e._v(" "),n("p",[e._v(e._s(e.fanclubText))])]:"ROOM_FULL"===e.reason?[e._m(0),e._v(" "),n("p",[e._v("\n        "+e._s(e._("Sorry, this session is full, but you can still observe the conversation."))+"\n        ")])]:e._e()],2)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"icon-combination"},[t("i",{staticClass:"amino-icon amino-icon-user-triple"}),this._v(" "),t("i",{staticClass:"amino-icon amino-icon-minus-rev amino-icon-small"})])}],!1,null,null,null).exports),rn={methods:{joinThread:function(){var e=this,t=this.$store.state.currentThread.threadId;this.$store.dispatch("joinThread",t).catch(function(t){e.$toast.warn(t&&t.message||"Ooops, cannot join thread")})}}},sn=(n(296),Object(mt.a)(rn,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chat-join"},[t("button",{staticClass:"join chat-community-bg",on:{click:this.joinThread}},[this._v(this._s(this._("Join this chat")))])])},[],!1,null,null,null).exports),an={functional:!0,props:{thread:{type:Object,required:!0}},render:function(e,t){return e("div",{attrs:{class:"chat-interaction"}},[function(e,t){var n=t.props,r=t.listeners,i=n.thread;if(!i)return e("");var s=i.membershipStatus;if(i.needHidden)return e(nn,{props:{reason:"FANCLUB_ONLY",thread:i}});if(i.status===g)return e(nn,on(Wt||(Wt=vt.c(["DISABLED"],["DISABLED"]))));if(i.status===f.AUTHORABSENT)return e(nn,on(Yt||(Yt=vt.c(["AUTHOR_ABSENT"],["AUTHOR_ABSENT"]))));var a=s===h.INVITE_SENT;if(s===h.ACTIVE||i.type===d.SINGLE&&a)return e(en,{on:r});if(a)return e(sn);if(i.membersCount>=i.membersQuota)return e(nn,on(qt||(qt=vt.c(["ROOM_FULL"],["ROOM_FULL"]))));if(s===h.NONE)return e(sn)}(e,t)])}};function on(e){return{props:{reason:e[0]}}}var cn=dt().props({isTransparent:Boolean}).data(function(e){return{overflowing:!1}}).computed(ht(["currentThread"])).computed({threadName:function(){return this.currentThread?At(this.currentThread):""}}).methods({tweakOverflow:function(){var e=this.$refs.summary;e&&(this.overflowing=e.clientHeight<e.scrollHeight)},expand:function(){this.$store.commit("toggleRightSidebar",!0)}}).lifecycle({mounted:function(){this.tweakOverflow()},updated:function(){this.$nextTick(this.tweakOverflow)}}).done(),un=(n(294),Object(mt.a)(cn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group-card"},[n("h3",{staticClass:"transparent-thread-title",class:{shadowed:e.isTransparent}},[n("span",{staticClass:"title-text"},[e._v(e._s(e.threadName))]),e._v(" "),n("span",{staticClass:"member-count"},[e._v("("+e._s(e.currentThread.membersCount)+")")]),e._v(" "),n("span",{staticClass:"chat-community-bg transition"})]),e._v(" "),n("div",{staticClass:"bg-cover chat-community-bg"},[e.currentThread.icon?n("img",{staticClass:"img-cover",attrs:{src:e.currentThread.icon}}):e._e()]),e._v(" "),n("p",{ref:"summary",staticClass:"group-summary"},[e.overflowing?n("span",{staticClass:"spacer"}):e._e(),e._v(" "),e.overflowing?n("span",{staticClass:"see-all",on:{click:e.expand}},[e._v("\n            "+e._s(e._("See all"))+"\n        ")]):e._e(),e._v("\n        "+e._s(e.currentThread.content)+"\n    ")]),e._v(" "),n("div",{staticClass:"organizer-info"},[e._v("\n        "+e._s(e._("Organizer"))+":\n        "),n("a",{staticClass:"organizer-link",attrs:{target:"_parent",href:e.currentThread.author.webURL}},[n("img",{staticClass:"avatar",attrs:{src:e._f("userAvatar")(e.currentThread.author,68)}}),e._v("\n            "+e._s(e._f("userNickname")(e.currentThread.author))+"\n        ")]),e._v(" "),e.currentThread.author.influencerInfo?n("span",{staticClass:"influencer-badge"}):e._e()])])},[],!1,null,null,null).exports),ln=n(119),dn={props:{placement:{type:String,default:"bottom-end"},iconClass:{type:String,default:"amino-icon amino-icon-splat"}},data:function(){return{open:!1}},computed:{rootClass:function(){var e;return(e={open:this.open})[this.placement]=!0,e}},methods:{toggle:function(){this.open?this.closeMenu():this.openMenu()},openMenu:function(){this.open=!0,this.$nextTick(this.initPopper),this.unsub=Object(Xe.a)(this.$el,this.closeMenu)},closeMenu:function(){this.open=!1,this.popper&&(this.popper.destroy(),this.popper=null),this.unsub&&(this.unsub(),this.unsub=null)},initPopper:function(){this.popper=new ln.a(this.$refs.icon,this.$refs.container,{placement:this.placement})}},beforeDestroy:function(){this.popper&&this.popper.destroy()}},hn=(n(292),Object(mt.a)(dn,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"action-show-menu",class:this.rootClass,on:{click:this.toggle}},[t("i",{ref:"icon",class:this.iconClass}),this._v(" "),this.open?t("div",{ref:"container",staticClass:"popup-container"},[this._t("default")],2):this._e()])},[],!1,null,null,null).exports),fn={components:{ActionMenu:hn},props:{message:Object},data:function(){return{progressValue:0}},mounted:function(){pn(this,this.message)},computed:{isImageMessage:function(){return M(this.message)}},methods:{resend:function(){pn(this,this.message)},deleteSending:function(){return this.$store.commit("deleteSending",this.message)},progress:function(e){var t=e.totalBytes,n=e.uploadedBytes;this.progressValue=n/t*100}}},mn=[a.USER_GENERAL,a.USER_STICKER];function pn(e,t){if(mn.indexOf(t.type)<0)console.error("Cannot send unsupported message type!",t.type);else{t.sendFailed=!1;var n=Promise.resolve();if(e.isImageMessage&&!t.mediaValue.startsWith("http")){var r="progress-"+t.uploadId;n=Object(gt.g)(t.uploadId,gt.c).then(function(n){t.mediaValue=n.mediaValue,gt.e.$off(r,e.progress)}),gt.e.$on(r,e.progress)}n.then(function(){return e.$store.dispatch("confirmSendMessage",t)}).catch(function(n){n&&n.response&&n.response.api_status_code&&e.$toast.warn(n.message),t.sendFailed=!0})}}var vn=fn,gn=(n(290),{components:{ActionMenu:hn,SendingStatus:Object(mt.a)(vn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.message.sendFailed?n("ActionMenu",{staticClass:"send-failed",attrs:{placement:"bottom-start",iconClass:"sending-failed fa fa-exclamation-circle"}},[n("ul",{staticClass:"menu flag-menu"},[n("li",{staticClass:"menu-item pointer",on:{click:e.resend}},[n("i",{staticClass:"amino-icon amino-icon-reload"}),e._v("\n            "+e._s(e._("Retry"))+"\n        ")]),e._v(" "),n("li",{staticClass:"menu-item pointer",on:{click:e.deleteSending}},[n("i",{staticClass:"fa fa-trash"}),e._v("\n            "+e._s(e._("Delete"))+"\n        ")])])]):e.isImageMessage?n("div",{staticClass:"sending-image progress-bar"},[n("div",{staticClass:"progress-bar"},[n("div",{staticClass:"progress-bar-content",style:{width:e.progressValue+"%"}})]),e._v(" "),n("p",{staticClass:"progress-text"},[e._v("\n    "+e._s(e._("Sending..."))+"\n    ")])]):n("span",{staticClass:"sending-message fa fa-spin fa-circle-o-notch"})},[],!1,null,null,null).exports},props:{message:Object},methods:{startFlag:function(){this.$flagReview.flagMessage(this.message)}},computed:{fromMe:function(){return ServerData.userInfo.uid===this.message.author.uid}}}),_n=(n(288),Object(mt.a)(gn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"chat-message user-message",class:{"from-me":e.fromMe}},[n("a",{staticClass:"message-author cover-img",attrs:{href:e.message.author.webURL,target:"_parent"}},[n("img",{staticClass:"avatar",attrs:{src:e._f("userAvatar")(e.message.author,68),alt:""}})]),e._v(" "),n("div",{staticClass:"message-body"},[e.fromMe?e._e():n("p",{staticClass:"author-name"},[e._v("\n            "+e._s(e._f("userNickname")(e.message.author))+"\n            "),e.message.author.influencerInfo?n("i",{staticClass:"influencer-badge"}):n("i",{staticClass:"level-badge",class:"level-badge-"+e.message.author.level})]),e._v(" "),n("div",{staticClass:"message-content"},[e._t("default"),e._v(" "),e.fromMe?e.message.messageId?e._e():n("SendingStatus",{attrs:{message:e.message}}):n("ActionMenu",[n("ul",{staticClass:"menu flag-menu"},[n("li",{staticClass:"menu-item pointer action-flag",on:{click:e.startFlag}},[n("i",{staticClass:"amino-icon amino-icon-flag"}),e._v("\n                        "+e._s(e._("Flag for Review"))+"\n                    ")])])])],2)])])},[],!1,null,null,null).exports),bn={render:function(e){return e("span",{staticClass:"svg-icon-container",class:"play-button",domProps:{innerHTML:'<svg viewBox="0 0 14 18" xmlns="http://www.w3.org/2000/svg"><path d="M3.087 17.003l9.773-6.324a2 2 0 0 0 0-3.358L3.087.997A2 2 0 0 0 0 2.677v12.647a2 2 0 0 0 3.087 1.679z" fill-rule="nonzero"/></svg>'}})}},Tn={props:{message:Object},components:{UserWrapper:_n,Icon:bn},methods:{showYoutube:function(e){Fe("showMedia",{type:"youtube",youtubeId:e,autoplay:1})}},computed:{youtubeID:function(){return 0===this.message.mediaType?/v=(\w+)/.exec(this.message.content)[1]:this.message.mediaValue.substring(6)}}},En=(n(286),Object(mt.a)(Tn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ytb-msg",on:{click:function(t){e.showYoutube(e.youtubeID)}}},[n("div",{staticClass:"youtube-preview"},[n("img",{staticClass:"img-cover",attrs:{src:"//img.youtube.com/vi/"+e.youtubeID+"/hqdefault.jpg",alt:"youtube cover"}}),e._v(" "),n("Icon",{staticClass:"play-button"})],1),e._v(" "),n("div",{staticClass:"youtube-info"},[n("h3",{staticClass:"ytb-title"},[e._v(e._s(e.message.content))]),e._v(" "),n("small",{staticClass:"source-name"},[e._v("youtube.com")])])])},[],!1,null,null,null).exports);function wn(e){return e>=10?""+e:"0"+e}function yn(e){if((e=Math.floor(e))<60)return"00:"+wn(e);var t=Math.floor(e/60),n=Math.floor(e%60);return wn(t)+":"+wn(n)}var Cn={props:{message:Object},components:{UserWrapper:_n,Icon:bn},methods:{showVideo:function(){Fe("showMedia",{type:"video",videoSrc:this.message.mediaValue,source:"Chat Thread",autoplay:1})}},computed:{videoExt:function(){var e=this.message.extensions;return e&&e.videoExtensions},coverImage:function(){return this.videoExt.coverImage},duration:function(){return yn(this.videoExt.duration)}}},In=(n(284),Object(mt.a)(Cn,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"video-msg",on:{click:this.showVideo}},[t("div",{staticClass:"youtube-preview"},[t("img",{staticClass:"img-cover",attrs:{src:this.coverImage}}),this._v(" "),t("Icon",{staticClass:"play-button"}),this._v(" "),t("small",{staticClass:"source-name"},[this._v(this._s(this.duration))])],1)])},[],!1,null,null,null).exports),Sn=Math.min(window.innerWidth-200-114,270),On={props:{message:Object},components:{UserWrapper:_n,Youtube:En,Video:In},methods:{showImage:function(e){Fe("showMedia",{type:"img",preview:e,src:Tt(e,"hq")})},imageDisplaySize:function(e){var t=P(e);if(!t.width||!t.height)return{};var n=+t.width,r=+t.height;return n/r>Sn/160?{width:Math.min(Sn,n)+"px",height:Math.floor(Sn/n*r)+"px"}:{width:Math.floor(160/r*n)+"px",height:Math.min(r,160)+"px"}}},computed:{isYoutubeMessage:function(){var e=this.message.mediaType;return e===l.b.YOUTUBE||0===e&&/^https:\/\/www.youtube.com\/watch\?v=\w+$/.test(this.message.content)},isVideoMessage:function(){return this.message.mediaType===l.b.AMINO_VIDEO}}},An=(n(282),Object(mt.a)(On,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("UserWrapper",{attrs:{message:e.message}},[e.isYoutubeMessage?n("Youtube",{attrs:{message:e.message}}):e.isVideoMessage?n("Video",{attrs:{message:e.message}}):0===e.message.mediaType?n("div",{staticClass:"text-msg rich-content",domProps:{innerHTML:e._s(e.$options.filters.postToHTML(e.message.content))}}):e.message.mediaType===e.constants.OBJECT_TYPE.IMAGE?n("div",{staticClass:"img-msg",class:{uploading:!e.message.messageId},on:{click:function(t){e.showImage(e.message.mediaValue)}}},[n("img",{staticClass:"img-cover",style:e.imageDisplaySize(e.message.mediaValue),attrs:{src:e.message.mediaValue}})]):e._e()],1)},[],!1,null,null,null).exports),Ln={props:{message:Object},components:{UserWrapper:_n},data:function(){return{style:this.imageDisplaySize(this.message.mediaValue,"128px")}},methods:{imageDisplaySize:function(e,t){var n=P(e);if(!n.width||!n.height)return{minHeight:t};var r=+n.width,i=+n.height;return{height:Math.floor(128/r*i)+"px"}},resetStyle:function(){this.style=this.imageDisplaySize(this.message.mediaValue,"")}}},Mn=(n(280),Object(mt.a)(Ln,function(){var e=this.$createElement,t=this._self._c||e;return t("UserWrapper",{attrs:{message:this.message}},[t("div",{staticClass:"sticker-message"},[t("img",{staticClass:"sticker-img",style:this.style,attrs:{src:this.message.mediaValue},on:{load:this.resetStyle}})])])},[],!1,null,null,null).exports);var Nn={props:{message:Object},components:{UserWrapper:_n,AudioPlay:{render:function(e){return e("span",{staticClass:"svg-icon-container",class:"audio-play",domProps:{innerHTML:'<svg viewBox="0 0 12 14" xmlns="http://www.w3.org/2000/svg"><path d="M11.044 7.861L1.508 13.49A1 1 0 0 1 0 12.629V1.37a1 1 0 0 1 1.508-.86l9.536 5.628a1 1 0 0 1 0 1.722z" fill-rule="evenodd"/></svg>'}})}},AudioPause:{render:function(e){return e("span",{staticClass:"svg-icon-container",class:"audio-pause",domProps:{innerHTML:'<svg viewBox="0 0 12 14" xmlns="http://www.w3.org/2000/svg"><path d="M2 0a2 2 0 0 1 2 2v10a2 2 0 1 1-4 0V2a2 2 0 0 1 2-2zm8 0a2 2 0 0 1 2 2v10a2 2 0 1 1-4 0V2a2 2 0 0 1 2-2z" fill-rule="evenodd"/></svg>'}})}}},data:function(){return{isPlaying:!1,duration:"",width:"",progress:0}},methods:{toggleMedia:function(){this.isPlaying?this.$refs.audio.pause():(document.querySelectorAll(".voice-message-container audio").forEach(function(e){e.pause()}),this.$refs.audio.play()),this.isPlaying=!this.isPlaying},metadata:function(){var e,t=this.$refs.audio;this.duration=yn(t.duration),this.width=(e=t.duration,e=Math.min(e,60),Math.floor(e/60*125+115))},onPause:function(){this.isPlaying=!1},ended:function(){this.isPlaying=!1,this.progress=0,this.duration=yn(this.$refs.audio.duration)},timeupdate:function(){var e=this.$refs.audio;this.progress=e.currentTime/e.duration*100,this.duration=yn(e.duration-e.currentTime)}},mounted:function(){var e=this.$refs.audio;e.addEventListener("loadedmetadata",this.metadata),e.addEventListener("ended",this.ended),e.addEventListener("timeupdate",this.timeupdate),e.addEventListener("pause",this.onPause)},beforeDestroy:function(){var e=this.$refs.audio;e.removeEventListener("loadedmetadata",this.metadata),e.removeEventListener("ended",this.ended),e.removeEventListener("timeupdate",this.timeupdate),e.addEventListener("pause",this.onPause)}},kn=(n(278),Object(mt.a)(Nn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("UserWrapper",{attrs:{message:e.message}},[n("div",{staticClass:"voice-message-container",style:{width:e.width}},[n("button",{staticClass:"play-button",on:{click:e.toggleMedia}},[e.isPlaying?n("AudioPause"):n("AudioPlay")],1),e._v(" "),n("div",{staticClass:"voice-progress"},[n("div",{staticClass:"progress",style:{width:e.progress+"%"}})]),e._v(" "),n("time",{staticClass:"voice-time"},[e._v("\n            "+e._s(e.duration)+"\n        ")]),e._v(" "),n("audio",{ref:"audio",attrs:{src:e.message.mediaValue}},[n("p",[e._v("Your browser doens't support this message!")])])])])},[],!1,null,null,null).exports),Rn={props:{message:Object},computed:{infoString:function(){return function(e){switch(e){case a.INFO_DELETED:return _("deleted a message.");case a.INFO_MEMBER_BECOME_ACTIVE:return _("has joined the conversation.");case a.INFO_MEMBER_QUIT:return _("has left the conversation.");case a.INFO_TITLE_CHANGE:return _("changed the title.");case a.INFO_ICON_CHANGE:return _("changed the cover image.");case a.INFO_SESSION_INIT:return _("started the conversation.");case a.INFO_CONTENT_CHANGE:return _("changed the welcome message.")}}(this.message.type)},isMeJoin:function(){return N(this.message)}},mounted:function(){var e=this;N(this.message)&&this.$store.state.messageChangeSource===v.SELF_ADD&&requestAnimationFrame(function(){var t=e.$el;t.parentNode.scrollTop=t.offsetTop-10})}},xn=(n(276),Object(mt.a)(Rn,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"chat-message info-message"},[e.isMeJoin?[e._v("\n        "+e._s(e._("You've joined the conversation."))+"\n    ")]:[n("a",{staticClass:"linkblue",attrs:{href:e.message.author.webURL,target:"_parent"}},[e._v("\n            "+e._s(e._f("userNickname")(e.message.author))+"\n        ")]),e._v("\n        "+e._s(e.infoString)+"\n    ")]],2)}],!1,null,null,null).exports),Dn={computed:vt.a({},Object(u.mapGetters)(["organizer"])),props:{message:Object}},Pn=(n(274),Object(mt.a)(Dn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"chat-message welcome-message"},[n("div",{staticClass:"organizer-info"},[n("a",{attrs:{target:"_parent",href:e.organizer.webURL}},[n("img",{staticClass:"avatar",attrs:{src:e._f("userAvatar")(e.organizer,68)}}),e._v(" "),e.organizer.influencerInfo?n("i",{staticClass:"influencer-badge"}):e._e()]),e._v(" "),n("div",{staticClass:"desc-line"},[e._v("\n            "+e._s(e._("Organizer"))+":\n            "),n("a",{staticClass:"organizer-link",attrs:{target:"_parent",href:e.organizer.webURL}},[e._v("\n                "+e._s(e._f("userNickname")(e.organizer))+"\n            ")])])]),e._v(" "),n("div",{staticClass:"message-body rich-content",domProps:{innerHTML:e._s(e.$options.filters.postToHTML(e.message.content))}})])},[],!1,null,null,null).exports),Fn={functional:!0,render:function(e,t){var n=t.props.message;if(n.author.status===g)return e("");var r={props:{message:n},key:t.data.key};switch(n.type){case a.USER_GENERAL:return e(An,r);case a.USER_VOICE_NOTE:return e(kn,r);case a.USER_STICKER:return e(Mn,r);case a.USER_VIDEO:return e(_n,r,[e(In,r)]);case a.INFO_DELETED:case a.INFO_MEMBER_BECOME_ACTIVE:case a.INFO_MEMBER_QUIT:case a.INFO_TITLE_CHANGE:case a.INFO_ICON_CHANGE:case a.INFO_CONTENT_CHANGE:return e(xn,r);case a.INFO_SESSION_INIT:return n.content?e(An,r):e(xn,r);case a.CLIENT_WELCOME:return e(Pn,r);default:return e("")}}},jn={props:["time"]},Un=(n(272),Object(mt.a)(jn,function(e,t){return(0,t._c)("li",{staticClass:"timestamp"},[t._v("\n    "+t._s(t._f("prettyTimestamp")(t.props.time))+"\n")])},[],!0,null,null,null).exports),Hn={functional:!0,render:function(e,t){for(var n=t.props,r=n.messages,i=n.timestamps,s=[],a=0,o=i[a],c=0;c<r.length;c++){var u=r[c];o&&o.index===c&&(s.push(e(Un,{props:{time:o.time}})),o=i[a+=1]),s.push(e(Fn,{props:{message:u},key:u.messageId}))}return s}},Vn=n(8),$n=n.n(Vn),Bn=document.defaultView.getComputedStyle;function zn(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=Bn(t).overflowY;if("scroll"===n||"auto"===n||"overlay"===n)return t;t=t.parentNode}return window}var Gn="Apple Computer, Inc."===navigator.vendor;var Wn={render:function(e){return e("div",this.$slots.default)},mounted:function(){var e=this,t=zn(this.$el),n=$n.a.createContainer(t),r=t.clientHeight>>1;this.monitor=n.create(this.$el,r),this.monitor.enterViewport(function(){e.$emit("enter-view")})},beforeDestroy:function(){this.monitor.destroy()},methods:{isInViewport:function(){for(var e=this.monitor.container;e.containerWatcher;)e.containerWatcher.recalculateLocation(),e=e.containerWatcher.container;return this.monitor.recalculateLocation(),this.monitor.update(),this.monitor.isInViewport},scrollBack:function(){var e=this.monitor.container.item,t=e.scrollHeight,n=e.scrollTop;this.$nextTick(function(){var r=e.scrollHeight;e.scrollTop=n+(r-t)})}}},Yn=dt().components({MessageDispatcher:Fn,Messages:Hn,ScrollLoader:Wn}).data(function(e){return{hasMore:!0}}).computed(ht(["currentThread","messages","timestamps","messageChangeSource","loadingMessage"])).methods({loadMore:function(){var e=this;if(this.hasMore&&!this.loading){this.loading=!0;var t=this.$refs.loader;this.$store.dispatch("loadOldMessages",25).then(function(n){e.$store.commit("mergeMessages",{msgs:n,size:25}),e.hasMore=n.length>1,e.loading=!1,t.scrollBack(),e.hasMore&&t.isInViewport()&&e.loadMore()}).catch(function(){e.errorCount=e.errorCount||0,e.errorCount+=1,e.errorCount>10||setTimeout(function(){e.loading=!1,t&&t.isInViewport()&&e.loadMore()},3e3)})}},scrollToBottom:function(){var e=this.$refs.list;e.scrollTop=e.scrollHeight},isScrolledToBottom:function(){var e=this.$refs.list,t=e.clientHeight+e.scrollTop+10;return e.scrollHeight<=t}}).lifecycle({mounted:function(){this.scrollToBottom()},activated:function(){this.scrollToBottom()}}).watch({currentThread:function(){var e=this;this.hasMore=!0,this.errorCount=0,this.$nextTick(function(){e.scrollToBottom()})},messages:function(){var e=this,t=this.messageChangeSource;t!==v.LOAD_OLD&&(t===v.INITIAL_LOAD||t===v.SELF_ADD||this.isScrolledToBottom())&&this.$nextTick(function(){e.scrollToBottom()})}}).done(),qn=(n(270),Object(mt.a)(Yn,function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{directives:[{name:"scroll-self",rawName:"v-scroll-self"}],ref:"list",staticClass:"message-list"},[this.hasMore&&!this.loadingMessage?t("li",{staticClass:"nosize"},[t("ScrollLoader",{ref:"loader",on:{"enter-view":this.loadMore}})],1):this._e(),this._v(" "),t("Messages",{attrs:{timestamps:this.timestamps,messages:this.messages}})],1)},[],!1,null,null,null).exports),Jn=ServerData.community.ndcId,Kn={props:{threadId:String},components:{ScrollLoader:Wn},data:function(){return{memberList:[],start:0,hasMore:!0}},methods:{loadMore:function(){var e=this;if(!this.loading){this.loading=!0;var t,n,r,i,s,a=this.$refs.loader;return this.hash=this.hash||{},(t={ndcId:Jn,threadId:this.threadId,start:this.start,size:24},n=t.ndcId,r=t.threadId,i=t.start,s=t.size,Object(oe.h)("members-in-thread",{ndcId:n,threadId:r,type:"default",start:i,size:s})).then(function(e){return e.memberList}).then(function(t){for(var n=t.length,r=0,i=t;r<i.length;r++){var s=i[r];e.hash[s.uid]||(e.hash[s.uid]=!0,e.memberList.push(s))}e.start+=n,e.hasMore=t.length>=24,e.loading=!1,e.hasMore&&a&&a.isInViewport&&e.loadMore()})}}}},Xn=(n(268),Object(mt.a)(Kn,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"member-list"},[e._l(e.memberList,function(t){return t.status!==e.constants.OBJECT_STATUS_DISABLED?n("li",{key:t.uid,staticClass:"member-item"},[n("a",{staticClass:"block",attrs:{href:t.webURL,target:"_parent"}},[n("div",{staticClass:"member-icon"},[n("img",{staticClass:"avatar",attrs:{src:e._f("userAvatar")(t,68),alt:""}}),e._v(" "),t.influencerInfo?n("i",{staticClass:"influencer-badge"}):n("i",{staticClass:"level-badge",class:"level-badge-"+t.level})]),e._v(" "),n("span",{staticClass:"member-name"},[e._v("\n                "+e._s(e._f("userNickname")(t))+"\n            ")])])]):e._e()}),e._v(" "),e.hasMore?n("li",{staticClass:"nosize"},[n("ScrollLoader",{ref:"loader",on:{"enter-view":e.loadMore}})],1):e._e()],2)},[],!1,null,null,null).exports),Qn=n(24),Zn=n.n(Qn),er={components:{BellOn:{render:function(e){return e("span",{staticClass:"svg-icon-container",class:"bell-on",domProps:{innerHTML:'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M1.489 11.37l-.037.037C1.988 10.22 2.83 8.038 3.06 5.55c0-1.467.878-2.763 2.206-3.518.227-.138.475-.252.73-.342.117-.044.235-.084.356-.12a3.5 3.5 0 0 1 .536-.269c-.039-.076-.039-.191-.039-.268A1.03 1.03 0 0 1 7.93 0c.573 0 1.033.46 1.033 1.033 0 .077 0 .192-.039.268a3.5 3.5 0 0 1 .536.268c.121.037.24.077.356.12.255.09.503.205.73.343 1.328.755 2.206 2.051 2.206 3.518.23 2.488 1.072 4.67 1.608 5.857l-.036-.037c.283.62.488.98.488.994 0 .344-2.335 1.684-5.206 2.105C9.49 15.349 8.802 16 7.921 16a1.781 1.781 0 0 1-.031 0c-.88 0-1.57-.65-1.684-1.531C3.335 14.048 1 12.709 1 12.364c0-.013.205-.374.489-.994z"/></svg>'}})}},BellMuted:{render:function(e){return e("span",{staticClass:"svg-icon-container",class:"bell-muted",domProps:{innerHTML:'<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M13.818 13.13l1.531 1.569a.74.74 0 0 1 0 1.071.74.74 0 0 1-1.071 0l-1.99-1.99c-.805.306-1.685.536-2.68.689-.115.88-.804 1.531-1.685 1.531-.88 0-1.569-.65-1.684-1.531-2.87-.421-5.206-1.76-5.206-2.105 0-.039 1.761-3.063 2.106-6.852 0-.268.076-.536.115-.804L.23 1.684a.74.74 0 0 1 0-1.072.74.74 0 0 1 1.071 0l2.642 2.642c0-.039 0-.039.038-.077l9.914 9.914s-.039.038-.077.038zM5.13 2.143c.383-.268.842-.46 1.302-.575.191-.076.382-.191.536-.268-.039-.076-.039-.153-.039-.268C6.928.46 7.388 0 7.962 0c.574 0 1.033.46 1.033 1.033 0 .077 0 .192-.038.268a3.5 3.5 0 0 1 .536.268c1.914.575 3.292 2.144 3.292 3.981.23 2.488 1.071 4.67 1.607 5.857L5.13 2.144z"/></svg>'}})}},HoverHint:Pt},computed:vt.a({},Object(u.mapState)(["currentThread"]),{isDontDisturbOff:function(){return this.currentThread.alertOption===b.ON},hoverText:function(){var e=this.isDontDisturbOff?_("OFF"):_("ON");return _("Do not disturb: ")+e}}),methods:{toggleAlert:function(){var e=this.currentThread.alertOption===b.ON?b.SILENT:b.ON;this.$store.dispatch("setThreadAlert",e).catch(this.$toast.warn)}}},tr=(n(266),Object(mt.a)(er,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"do-not-disturb"},[e.isDontDisturbOff?n("BellOn",{nativeOn:{click:function(t){return e.toggleAlert(t)}}}):n("BellMuted",{nativeOn:{click:function(t){return e.toggleAlert(t)}}}),e._v(" "),n("HoverHint",{staticClass:"bottom align-right"},[e._v("\n        "+e._s(e.hoverText)+"\n    ")])],1)},[],!1,null,null,null).exports),nr={components:{ActionMenu:hn,DoNotDisturb:tr},computed:vt.a({},Object(u.mapState)(["currentThread"]),{isMyThread:function(){return this.currentThread.author.uid===ServerData.userInfo.uid},memberCount:function(){return _("{{number}} members").replace("{{number}}",this.currentThread.membersCount)},isPublicActive:function(){return this.currentThread.type===d.PUBLIC&&this.currentThread.status!==g}}),methods:{threadName:At,startFlag:function(){this.$flagReview.flagThread(this.currentThread)}},mounted:function(){var e=this,t=this.$refs.copyLink;t&&(this.clipboard=new Zn.a(t),this.clipboard.on("success",function(){e.$toast.success(_("Copied")),Object(Xe.c)({eventCategory:"Copy Chat Link",eventAction:"click"})}))},beforeDestroy:function(){this.clipboard&&this.clipboard.destroy()}},rr=(n(264),Object(mt.a)(nr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group-header"},[n("h3",{staticClass:"group-thread-title"},[n("p",{staticClass:"name"},[e._v("\n            "+e._s(e.threadName(e.currentThread))+"\n        ")]),e._v(" "),n("div",{staticClass:"bg-cover chat-community-bg"},[e.currentThread.icon?n("img",{staticClass:"img-cover",attrs:{src:e.currentThread.icon}}):e._e()])]),e._v(" "),n("div",{staticClass:"organizer-info"},[n("a",{attrs:{target:"_parent",href:e.currentThread.author.webURL}},[n("img",{staticClass:"avatar",attrs:{src:e._f("userAvatar")(e.currentThread.author,68)}}),e._v(" "),e.currentThread.author.influencerInfo?n("span",{staticClass:"influencer-badge"}):e._e()]),e._v(" "),n("div",{staticClass:"desc-line"},[e._v("\n            "+e._s(e._("Organizer"))+":\n            "),n("a",{staticClass:"organizer-link",attrs:{target:"_parent",href:e.currentThread.author.webURL}},[e._v("\n                "+e._s(e._f("userNickname")(e.currentThread.author))+"\n            ")])]),e._v(" "),e.isMyThread?e._e():n("ActionMenu",{staticClass:"flag-button"},[n("ul",{staticClass:"menu flag-menu"},[n("li",{staticClass:"menu-item pointer action-flag",on:{click:e.startFlag}},[n("i",{staticClass:"amino-icon amino-icon-flag"}),e._v("\n                    "+e._s(e._("Flag for Review"))+"\n                ")])])]),e._v(" "),n("DoNotDisturb")],1),e._v(" "),n("p",{staticClass:"group-summary rich-content",domProps:{innerHTML:e._s(e.$options.filters.postToHTML(e.currentThread.content))}}),e._v(" "),e.isPublicActive?n("button",{ref:"copyLink",staticClass:"copy-link button",attrs:{"data-clipboard-text":e.currentThread.webURL}},[n("i",{staticClass:"amino-icon amino-icon-link"}),e._v("\n        "+e._s(e._("Copy Link"))+"\n    ")]):e._e(),e._v(" "),n("p",{staticClass:"member-count"},[e._v(e._s(e.memberCount))])])},[],!1,null,null,null).exports),ir={computed:vt.a({isActive:function(){return this.currentThread.membershipStatus===h.ACTIVE||L(this.currentThread)},isJoinable:function(){return e=this.currentThread,t=e.needHidden,n=9===e.status,r=e.status===f.AUTHORABSENT,i=e.membershipStatus===h.ACTIVE,!t&&!n&&!r&&!i&&(e.status===h.INVITE_SENT||e.membersCount<e.membersQuota);var e,t,n,r,i}},Object(u.mapState)(["currentThread"])),methods:{leaveThread:function(){var e=this;this.$confirm({message:_("Are you sure you want to leave?"),action:_("Yep, I'm done here"),cancel:_("No, take me back")}).then(function(){e.$store.dispatch("leaveThread",e.currentThread.threadId)})},joinThread:function(){this.isJoinable&&this.$store.dispatch("joinThread",this.currentThread.threadId)}}},sr=(n(262),Object(mt.a)(ir,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"thread-manage-card"},[e._t("default"),e._v(" "),e.isActive?n("div",{staticClass:"leave-btn button",on:{click:e.leaveThread}},[e._v("\n        "+e._s(e._("Leave Conversation"))+"\n    ")]):e.isJoinable?n("div",{staticClass:"join-btn button",on:{click:e.joinThread}},[e._v("\n        "+e._s(e._("Join Conversation"))+"\n    ")]):e._e()],2)},[],!1,null,null,null).exports),ar={components:{Sidebar:sr,MemberList:Xn,GroupHeader:rr},computed:vt.a({},Object(u.mapState)(["currentThread"]))},or=(n(260),Object(mt.a)(ar,function(){var e=this.$createElement,t=this._self._c||e;return t("Sidebar",[t("div",{directives:[{name:"scroll-self",rawName:"v-scroll-self"}],staticClass:"group-wrapper"},[t("div",{staticClass:"scroll-wrapper"},[t("GroupHeader"),this._v(" "),t("MemberList",{attrs:{threadId:this.currentThread.threadId}})],1)])])},[],!1,null,null,null).exports),cr={components:{Sidebar:sr},computed:vt.a({user:function(){return this.singleChatPartner},progressStlye:function(){return{width:116*this.user.rankingProgress+20+"px"}},cover:function(){var e=this.user.covers[0];return e&&e.href}},Object(u.mapState)(["singleChatPartner"]),Object(u.mapGetters)(["isBlockedByPartner"]))},ur=(n(258),Object(mt.a)(cr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-cover"},[n("div",{staticClass:"user-header chat-community-bg"},[e.cover&&!e.isBlockedByPartner?n("img",{staticClass:"img-cover",attrs:{src:e.cover,alt:"user selected cover"}}):e._e()]),e._v(" "),n("a",{staticClass:"user-link",attrs:{href:e.user.webURL,target:"_parent"}},[n("img",{staticClass:"avatar",attrs:{src:e._f("userAvatar")(e.user,128)}})]),e._v(" "),n("p",{staticClass:"user-name"},[n("a",{staticClass:"user-link",attrs:{href:e.user.webURL,target:"_parent"}},[e._v("\n            "+e._s(e._f("userNickname")(e.user))+"\n            "),e.user.influencerInfo?n("span",{staticClass:"influencer-badge"}):e._e()])]),e._v(" "),e.user.rankingTitle?n("div",{staticClass:"user-ranking"},[n("i",{staticClass:"level-badge",class:"level-badge-"+e.user.level}),e._v(" "),n("div",{staticClass:"reputation-bar"},[e._v("\n            "+e._s(e.user.rankingTitle)+"\n            "),n("span",{staticClass:"rank-progress",style:e.progressStlye})])]):e._e(),e._v(" "),e.isBlockedByPartner?e._e():n("div",{staticClass:"counter-info"},[n("div",{staticClass:"counter rep"},[n("div",{staticClass:"number"},[e._v(e._s(e.user.reputation))]),e._v(" "),n("div",{staticClass:"label"},[e._v(e._s(e._("Reputation")))])]),e._v(" "),n("div",{staticClass:"counter following"},[n("div",{staticClass:"number"},[e._v(e._s(e.user.joinedCount))]),e._v(" "),n("div",{staticClass:"label"},[e._v(e._s(e._("Following")))])]),e._v(" "),n("div",{staticClass:"counter followers"},[n("div",{staticClass:"number j-followee-number-target"},[e._v(e._s(e.user.membersCount))]),e._v(" "),n("div",{staticClass:"label"},[e._v(e._s(e._("Followers")))])])]),e._v(" "),e.isBlockedByPartner?e._e():n("div",{staticClass:"counter-info-backdrop"})])},[],!1,null,null,null).exports),lr=0,dr=1,hr=2,fr=3;var mr,pr={computed:vt.a({btnClass:function(){return function(e){switch(e.membershipStatus){case lr:return"status-stranger";case dr:return"status-forward";case hr:return"status-backward";case fr:return"status-mutual"}}(this.singleChatPartner)},btnText:function(){var e=this.hover;return function(e,t){switch(e.membershipStatus){case lr:case hr:return _("Follow");case dr:return t?_("Unfollow"):_("Following");case fr:return t?_("Unfollow"):_("Friends")}}(this.singleChatPartner,e)}},Object(u.mapState)(["singleChatPartner"]),Object(u.mapGetters)(["isBlockedByPartner","isPartnerBlocked","isSystemLike"])),data:function(){return{loading:!1,hover:!1}},methods:{toggleFollow:function(){var e=this;this.loading=!0,this.$store.dispatch("toggleFollow").then(function(){return e.loading=!1}).catch(function(t){e.$toast.warn(t&&t.message),e.loading=!1})}}},vr=(n(256),{components:{Sidebar:sr,UserCover:ur,UserButtons:Object(mt.a)(pr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isBlockedByPartner||e.isPartnerBlocked?e.isBlockedByPartner?n("div",{staticClass:"user-buttons blocked"},[n("i",{staticClass:"fa fa-ban"}),e._v("\n    "+e._s(e._("You are blocked from following this user."))+"\n")]):n("div",{staticClass:"user-buttons"},[e.isPartnerBlocked?n("button",{key:"3",staticClass:"button block-button",class:e.btnClass},[e._v("\n        "+e._s(e._("Blocked"))+"\n    ")]):e._e()]):n("div",{staticClass:"user-buttons"},[e.isSystemLike?e._e():[e.loading?n("button",{key:"2",staticClass:"button follow-button",class:e.btnClass},[n("i",{staticClass:"fa fa-circle-o-notch fa-spin"})]):n("button",{key:"1",staticClass:"button follow-button",class:e.btnClass,on:{click:e.toggleFollow,mouseenter:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}}},[n("i",{staticClass:"fa fa-plus"}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:!e.hover,expression:"!hover"}],staticClass:"follow-icon"}),e._v("\n            "+e._s(e.btnText)+"\n        ")])],e._v(" "),n("a",{staticClass:"button profile-button",attrs:{href:e.singleChatPartner.webURL,target:"_parent"}},[n("i",{staticClass:"amino-icon amino-icon-user-rev"}),e._v("\n        "+e._s(e._("Profile"))+"\n    ")])],2)},[],!1,null,null,null).exports,DoNotDisturb:tr},computed:Object(u.mapState)(["singleChatPartner"])}),gr=(n(254),{components:{Group:or,Single:Object(mt.a)(vr,function(){var e=this.$createElement,t=this._self._c||e;return t("Sidebar",[this.singleChatPartner?t("div",{staticClass:"user-profile"},[t("UserCover"),this._v(" "),t("DoNotDisturb",{staticClass:"do-not-disturb"}),this._v(" "),t("UserButtons")],1):t("div",{staticClass:"user-profile loading"},[t("div",{staticClass:"loading-overlay"},[t("i",{staticClass:"fa fa-spin fa-circle-o-notch community-color"})])])])},[],!1,null,null,null).exports},methods:{watchClose:function(){var e=this;this.unsubscribe=Object(Xe.a)(this.$refs.sidebar.$el,function(){return e.$store.commit("toggleRightSidebar",!1)})},toggle:function(){this.$store.commit("toggleRightSidebar",!this.showRightSidebar)}},computed:vt.a({isSingle:function(){return this.currentThread&&this.currentThread.type===d.SINGLE},isGroup:function(){return this.currentThread&&this.currentThread.type!==d.SINGLE}},Object(u.mapState)(["currentThread","showRightSidebar"])),watch:{showRightSidebar:function(){!this.showRightSidebar&&this.unsubscribe?(this.unsubscribe(),this.unsubscribe=null):this.showRightSidebar&&!this.unsubscribe&&this.$nextTick(this.watchClose)}}}),_r=(n(252),Object(mt.a)(gr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",[e.isGroup&&e.showRightSidebar?n("Group",{ref:"sidebar",on:{"click-outside":e.toggle}}):e._e(),e._v(" "),e.isSingle&&e.showRightSidebar?n("Single",{ref:"sidebar",on:{"click-outside":e.toggle}}):e._e()],1)},[],!1,null,null,null).exports),br=n(28),Tr=dt().components({ChatMessages:qn,ChatInteraction:an,GroupDetail:un,ChatActions:pt,ThreadCard:_r,Lock:br.a}).computed(ht(["currentThread","singleChatPartner","showRightSidebar","loadingMessage"])).computed((mr=["isCurrentThreadFanClubExpired"],Object(u.mapGetters)(mr))).computed({shouldShowTitle:function(){return function(e){if(!e)return!1;if(e.needHidden)return!1;var t=e.type===d.SINGLE,n=e.membershipStatus===h.ACTIVE;if(t||n)return!0;var r=e.status===f.AUTHORABSENT,i=9===e.status;return!r&&!i&&n}(this.currentThread)},joinClubTip:function(){var e=this.currentThread;return e&&e.needHidden?_("This chat is for {{member}}'s fan club members only.").replace("{{member}}",e.author.nickname):""}}).methods({threadName:At,scrollToBottom:function(){var e=this;this.$nextTick(function(){e.$refs.messages.scrollToBottom()})},requestJoinVip:function(){var e=this.isCurrentThreadFanClubExpired?["Chat Renew Club","renew"]:["Chat Join Club","join"],t=e[0],n=e[1];collectTEA("download_popup",{source:t}),Object(Xe.c)({eventCategory:"Popup Join",eventLabel:"chat",eventAction:n}),Fe("requestJoinVip",{influencer:this.currentThread.author,motivation:t})}}).done(),Er=(n(250),Object(mt.a)(Tr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"main-chat"},[e.shouldShowTitle?n("header",{staticClass:"thread-title chat-community-bg"},[e._v("\n        "+e._s(e.threadName(e.currentThread))+"\n        "),e.singleChatPartner&&1===e.singleChatPartner.onlineStatus?n("div",{staticClass:"online-indicator"}):e._e()]):n("GroupDetail",{attrs:{"is-transparent":!e.showRightSidebar}}),e._v(" "),e.currentThread.needHidden?n("div",{staticClass:"chat-vip-mask"},[n("Lock",{staticClass:"lock-icon"}),e._v(" "),n("p",{staticClass:"chat-vip-tip"},[e._v(e._s(e.joinClubTip))]),e._v(" "),n("button",{staticClass:"btn btn-round btn-vip",on:{click:e.requestJoinVip}},[e._v(e._s(e.isCurrentThreadFanClubExpired?e._("Renew"):e._("Join Fan Club")))])],1):n("div",{staticClass:"chat-detail-area"},[n("ChatMessages",{ref:"messages"}),e._v(" "),n("ChatInteraction",{attrs:{thread:e.currentThread},on:{"new-message":e.scrollToBottom}}),e._v(" "),n("transition",[e.loadingMessage?n("div",{staticClass:"loading-overlay"},[n("i",{staticClass:"fa-spin fa fa-circle-o-notch community-color"})]):e._e()])],1),e._v(" "),n("ChatActions"),e._v(" "),n("ThreadCard")],1)},[],!1,null,null,null).exports),wr=ServerData.community.ndcId,yr=dt().props({thread:Object}).computed({displayUser:function(){return Lt(this.thread)},displayUsers:function(){return Ot(this.thread)},isSingle:function(){return this.thread.type===d.SINGLE}}).methods({imageLoadFail:function(){var e=this;de({ndcId:wr,userId:this.displayUser.uid}).then(function(t){e.displayUser.icon=t.icon})}}).done(),Cr=(n(248),Object(mt.a)(yr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isSingle?n("div",{staticClass:"thread-icon cover-img round-cover"},[n("img",{staticClass:"avatar",attrs:{src:e._f("userAvatar")(e.displayUser,"68")},on:{error:e.imageLoadFail}})]):e.thread.icon||e.thread.type!==e.constants.CHAT_THREAD_TYPE.GROUP?n("div",{staticClass:"thread-icon cover-img"},[n("img",{staticClass:"img-cover",attrs:{src:e._f("resizeImage")(e.thread.icon,"128")}})]):n("div",{staticClass:"thread-icon cover-img round-cover multi-user-cover"},e._l(e.displayUsers,function(t,r){return n("img",{key:r,staticClass:"multi-avatar img-cover",attrs:{src:e._f("userAvatar")(t,"68")}})}))},[],!1,null,null,null).exports),Ir={components:{ThreadIcon:Cr},computed:vt.a({},Object(u.mapState)(["currentThread","threadMap"]),{threadName:function(){return At(this.currentThread)},className:function(){return{"has-incoming-msg":this.incomingMsgs.length>0}},currentMsg:function(){return this.incomingMsgs[0]},messageExceprt:function(){return function(e){var t=e.author.uid===St.uid?"You: ":e.author.nickname+": ";switch(e.mediaType){case l.b.IMAGE:return t+_("[Image]");case l.b.YOUTUBE:return t+_("[Video]");case l.b.VOICE:return t+_("[Voice Note]");case l.b.STICKER:return t+_("[Sticker]");case 0:case null:return e.content?t+e.content:""}}(this.currentMsg)},messageThreadName:function(){return At(this.threadMap[this.currentMsg.threadId])}}),methods:{informHover:function(e,t){void 0===t&&(t=!1),Fe("minimizedIconHover",{communityName:ServerData.community.name,href:"/c/"+ServerData.community.endpoint+"/home",show:e,instant:t})},maximizeWindow:function(){var e=this.$store;this.currentMsg&&e.dispatch("addOneThread",{threadId:this.currentMsg.threadId,source:"minimized_window",action:"click"}),e.dispatch("toggleMinimize"),this.informHover(!1,!0)},addNewMessage:function(e){if(e){var t=this.threadMap;e.type===a.USER_GENERAL&&t[e.threadId]&&t[e.threadId].alertOption===b.ON&&(this.$store.commit("toggleHasMessageWhenMinimized",!0),this.incomingMsgs.push(e),this.setupInterval())}},setupInterval:function(){var e=this;this.interaval||(this.interaval=setInterval(function(){e.incomingMsgs.shift(),0===e.incomingMsgs.length&&(clearInterval(e.interaval),e.interaval=null)},3e3))},cleanup:function(){V.$off("msg",this.addNewMessage),clearInterval(this.interaval),this.interaval=null,this.incomingMsgs=[]}},data:function(){return{community:ServerData.community,incomingMsgs:[]}},activated:function(){V.$on("msg",this.addNewMessage)},deactivated:function(){this.cleanup()}},Sr=(n(246),Object(mt.a)(Ir,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"minimized-preview",class:e.className,on:{click:e.maximizeWindow}},[n("img",{staticClass:"logo",attrs:{src:e.community.logo},on:{mouseenter:function(t){e.informHover(!0)},mouseleave:function(t){e.informHover(!1)}}}),e._v(" "),n("transition",[e.incomingMsgs.length?n("div",{key:"1",staticClass:"minimize-container message-coming"},[n("transition",[n("p",{key:e.currentMsg.threadId,staticClass:"thread-title"},[e._v(e._s(e.messageThreadName))])]),e._v(" "),n("transition",[n("div",{key:e.currentMsg.messageId,staticClass:"msg-excerpt"},[e._v(e._s(e.messageExceprt))])])],1):e.currentThread?n("div",{key:"3",staticClass:"minimize-container chat-thread-rest"},[n("ThreadIcon",{attrs:{thread:e.currentThread}}),e._v(" "),n("p",{staticClass:"thread-title"},[e._v(" "+e._s(e.threadName)+" ")])],1):n("div",{key:"2",staticClass:"minimize-container no-thread"},[n("p",{staticClass:"thread-title"},[e._v("\n                "+e._s(e.community.name)+"\n            ")])])])],1)},[],!1,null,null,null).exports),Or=ServerData.community.ndcId;function Ar(e){return e.type===a.USER_GENERAL&&e.content}var Lr={props:{threadId:String},data:function(){return{showPreview:!1,allMessages:null,messages:[],index:0}},methods:{start:function(){var e,t=this;return this.timer?Promise.resolve(!0):(this.showPreview=!0,this.allMessages?this.startAnimation(!0):(e=this.threadId,ce({ndcId:Or,threadId:e,size:15}).then(function(e){return[].slice.call(e)}).then(function(e){return e.filter(Ar)})).then(function(e){return t.allMessages=e,t.showPreview?t.startAnimation(!0):Promise.resolve(!1)}))},startAnimation:function(e){var t=this;if(this.allMessages.length<=2)return this.messages=this.allMessages,Promise.resolve(this.allMessages.length>0);for(var n=this.allMessages.slice(this.index,this.index+2),r=0;n.length<2;)n.push(this.allMessages[r++]);return this.messages=n,this.index++,this.index=this.index%this.allMessages.length,this.timer=setTimeout(function(){t.startAnimation()},e?800:2e3),Promise.resolve(!0)},stop:function(){this.showPreview=!1,this.messages=[],clearTimeout(this.timer),this.timer=void 0}}},Mr=(n(244),Object(mt.a)(Lr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{staticClass:"chat-message-preview unstyled",attrs:{tag:"ul"}},e._l(e.messages,function(t){return n("li",{key:t.messageId,staticClass:"comment pointer",attrs:{k:t.messageId}},[n("img",{staticClass:"avatar",attrs:{src:e._f("userAvatar")(t.author,68),alt:"User icon"}}),e._v(" "),n("div",{staticClass:"message"},[n("span",{staticClass:"content"},[e._v("\n                "+e._s(t.content)+"\n            ")])])])}))},[],!1,null,null,null).exports),Nr=ServerData.userInfo,kr={props:{thread:Object,userInfo:Object},data:function(){return{preview:!1}},components:{MessagePreview:Mr,HoverHint:Pt},computed:{activeTime:function(){return Mt(this.thread)},onlineMember:function(){var e=this.userInfo,t=e&&e.userProfileCount;return t?(t>1?_("{{number}} members online"):_("{{number}} member online")).replace("{{number}}",t):""},fanclubText:function(){var e=this.thread;return e&&e.author?_("Join {{owner}}'s  Fan Club on the Amino app to chat.").replace("{{owner}}",F(e.author)):_("This chat is fan club member only.")}},methods:{showMessagePreview:function(){var e=this;Nr&&this.$refs.preview.start().then(function(t){e.preview=t})},hideMessagePreview:function(){Nr&&(this.$refs.preview.stop(),this.preview=!1)}}},Rr=(n(242),Object(mt.a)(kr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return 0===e.thread.status?n("li",{staticClass:"chatroom",class:{preview:e.preview},on:{mouseenter:e.showMessagePreview,mouseleave:e.hideMessagePreview}},[e.thread.extensions&&e.thread.extensions.fansOnly?n("i",{staticClass:"fan-club-icon"},[n("HoverHint",{staticClass:"hover-hint bottom align-right"},[e._v("\n            "+e._s(e.fanclubText)+"\n        ")])],1):e._e(),e._v(" "),n("div",{staticClass:"cover-img"},[n("div",{staticClass:"cover community-bg"}),e._v(" "),n("img",{staticClass:"img-cover",attrs:{src:e.thread.icon}})]),e._v(" "),n("div",{staticClass:"overlay"},[n("div",{staticClass:"chat-info overflow-hidden"},[n("span",{staticClass:"pretty-date"},[e._v("\n                "+e._s(e._f("prettyDate")(e.activeTime))+"\n            ")]),e._v(" "),n("h3",{staticClass:"title"},[e._v("\n                "+e._s(e.thread.title)+"\n            ")]),e._v(" "),n("div",{staticClass:"counters"},[n("span",{staticClass:"counter"},[n("i",{staticClass:"amino-icon amino-icon-user-triple"}),e._v(" "),n("span",{staticClass:"num"},[e._v(e._s(e.thread.membersCount))])])])])]),e._v(" "),e.onlineMember?n("div",{staticClass:"chat-member-counter"},[n("span",{staticClass:"online-mark"}),e._v(" "),n("span",{staticClass:"chat-memeber-count-text"},[e._v("\n            "+e._s(e.onlineMember)+"\n        ")])]):e._e(),e._v(" "),n("MessagePreview",{ref:"preview",attrs:{"thread-id":e.thread.threadId}})],1):e._e()},[],!1,null,null,null).exports),xr=ServerData.community.ndcId,Dr={components:{ThreadCard:Rr,ScrollLoader:Wn},data:function(){return{loaded:!1,liveThreads:[],threadMap:{},hasMore:!0,userInfos:{}}},methods:{handleClick:function(e){ServerData.userInfo?this.$store.dispatch("addOneThread",{threadId:e.threadId,source:"suggested_public_chatrooms",action:"click"}):function(e,t,n){Fe("requestJoin",{ndcId:e,threadId:t.threadId,joinIcons:t.author.icon,joinMotivation:"chat",eventLabel:n.source})}(xr,e,{source:"enter_chat_thread",action:"click"})},loadMore:function(){var e=this;this.start=this.start||10,this.start>100?this.hasMore=!1:(ue({ndcId:xr,start:this.start}).then(function(t){e.mergeResult(t)}),this.start+=10)},mergeResult:function(e){for(var t=e.threadList||[],n=0,r=t=(t=t.concat(e.recommendedThreadList||[])).filter(function(e){return 0===e.status});n<r.length;n++){var i=r[n];this.threadMap[i.threadId]||(this.liveThreads.push(i),this.threadMap[i.threadId]=!0)}for(var s in e.userInfoInThread)this.userInfos[s]=e.userInfoInThread[s];this.hasMore=t.length>0;var a=this.$refs.loader;a&&a.isInViewport&&this.loadMore()}},mounted:function(){var e=this;ue({ndcId:xr}).then(function(t){e.loaded=!0,e.mergeResult(t)})}},Pr=(n(240),Object(mt.a)(Dr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded?n("div",{staticClass:"empty-container"},[n("section",{staticClass:"recommend-hint"},[n("p",{staticClass:"recommend-guide"},[e._v("\n        "+e._s(e._("You haven't joined any conversations yet."))+" "),n("br"),e._v(" "),e.liveThreads.length>0?[e._v("\n            "+e._s(e._("Check out these public chatrooms:"))+"\n        ")]:e._e()],2)]),e._v(" "),n("div",{staticClass:"scroll-wrapper"},[n("ul",{directives:[{name:"scroll-self",rawName:"v-scroll-self"}],staticClass:"chatroom-list"},[e._l(e.liveThreads,function(t){return n("ThreadCard",{key:t.threadId,attrs:{thread:t,"user-info":e.userInfos[t.threadId]},nativeOn:{click:function(n){e.handleClick(t)}}})}),e._v(" "),e.hasMore?n("li",{staticClass:"loader-item"},[n("ScrollLoader",{ref:"loader",on:{"enter-view":e.loadMore}},[n("i",{staticClass:"fa fa-spin fa-circle-o-notch"})])],1):e._e()],2)])]):e._e()},[],!1,null,null,null).exports),Fr={props:{thread:Object,activeId:String},components:{ThreadIcon:Cr,HoverHint:Pt},data:function(){return{fanclubHover:!1,fanclubTop:""}},computed:{isActive:function(){return this.thread.threadId===this.activeId},threadName:function(){return At(this.thread)},threadTime:function(){return Mt(this.thread)},showRedDot:function(){var e=this.thread;return!this.isActive&&(e.type===d.SINGLE||e.membershipStatus===h.ACTIVE)&&e.latestActivityTime>e.lastReadTime},message:function(){return this.thread.lastMessageSummary},messageSummary:function(){return Nt(this.thread)},fanclubText:function(){var e=this.thread;return e&&e.author?_("Join {{owner}}'s Fan Club on the Amino app to chat.").replace("{{owner}}",F(e.author)):_("This chat is fan club member only.")},draft:function(){return this.$store.state.draftMessages[this.thread.threadId]}},methods:{showFanclub:function(e){var t=e.target.getBoundingClientRect().top;this.fanclubHover=!0,this.fanclubTop=t+"px"},hideFanclub:function(){this.fanclubHover=!1}},mounted:function(){this.isActive&&function(e){if(Gn){var t=zn(e.parentNode);t.scrollTop=e.offsetTop-t.offsetTop}else e.scrollIntoView()}(this.$el)}},jr=(n(238),Object(mt.a)(Fr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"chatroom",class:{active:e.isActive},on:{click:function(t){e.$emit("click")}}},[n("div",{staticClass:"active-indicator chat-community-bg"}),e._v(" "),n("ThreadIcon",{attrs:{thread:e.thread}}),e._v(" "),n("div",{staticClass:"thread-name"},[n("span",{staticClass:"name"},[e._v(e._s(e.threadName))]),e._v(" "),n("span",{staticClass:"pretty-date"},[e._v("\n            "+e._s(e._f("prettyDate")(e.threadTime))+"\n        ")])]),e._v(" "),e.showRedDot?n("div",{staticClass:"red-dot"}):e._e(),e._v(" "),!e.isActive&&e.draft?n("div",{staticClass:"message-summary"},[n("span",{staticClass:"draft-hint"},[e._v("["+e._s(e._("Draft"))+"]")]),e._v("\n        "+e._s(e.draft)+"\n    ")]):e.message&&!e.thread.needHidden?n("div",{staticClass:"message-summary"},[e.message.sendFailed?n("span",{staticClass:"fa fa-exclamation-circle"}):e.message.messageId?e._e():n("span",{staticClass:"fa fa-spin fa-circle-o-notch"}),e._v("\n        "+e._s(e.messageSummary)+"\n    ")]):e._e(),e._v(" "),e.thread.extensions&&e.thread.extensions.fansOnly?[n("i",{staticClass:"fan-club-icon",on:{mouseenter:e.showFanclub,mouseleave:e.hideFanclub}}),e._v(" "),n("HoverHint",{staticClass:"hover-hint bottom align-right",class:{show:e.fanclubHover},style:{top:e.fanclubTop}},[e._v("\n            "+e._s(e.fanclubText)+"\n        ")])]:e._e()],2)},[],!1,null,null,null).exports),Ur=dt().components({ScrollLoader:Wn,ThreadSummary:jr}).data(function(e){return{hasMore:!0}}).computed(ht(["currentThread","threadList"])).methods({setActiveThreard:function(e){this.fromClick=!0,this.$store.commit("setThreadForTracker",{threadId:e.threadId,source:"chat_thread_list",action:"click"}),this.$store.dispatch("setThread",e)},loadMore:function(){var e=this;if(!this.loading){this.loading=!0;var t=ServerData.community.ndcId,n=this.threadList.length,r={ndcId:t,size:16,start:Math.max(n-8,0)},i=this.$refs.loader;(function(e){var t=e.ndcId,n=e.start,r=void 0===n?0:n,i=e.size,s=void 0===i?25:i;return Object(oe.h)("my-chat-threads",{ndcId:t,start:r,size:s})})(r).then(function(t){var n=t.threadList;e.hasMore=n.length>=16,e.loading=!1,e.$store.commit("mergeThreads",n);var r=e.$store.state.addedThreadCount>0;e.hasMore&&i.isInViewport()&&r&&e.loadMore()})}},nextThread:function(e){if(e.target===document.body||!e.target.value){var t=e.keyCode;if(38===t||40===t){e.preventDefault();var n=38===t?-1:1;this.$store.dispatch("rotateThread",n)}}}}).watch({currentThread:function(){if(this.currentThread){var e=this.$refs["thread"+this.currentThread.threadId];if(!this.fromClick&&e&&e[0])e[0].$el.scrollIntoView({behavior:"instant",block:"nearest"});else this.fromClick=!1}}}).lifecycle({mounted:function(){document.body.addEventListener("keydown",this.nextThread)},beforeDestroy:function(){document.body.removeEventListener("keydown",this.nextThread)}}).done(),Hr=(n(236),Object(mt.a)(Ur,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.threadList.length>0?n("section",{directives:[{name:"scroll-self",rawName:"v-scroll-self"}],staticClass:"thread-list"},[e.threadList.some(function(e){return e.isPinned})?n("div",{staticClass:"pinned-tip"},[n("i",{staticClass:"amino-icon amino-icon-pin"}),e._v("\n        "+e._s(e._("Pinned"))+"\n    ")]):e._e(),e._v(" "),n("transition-group",{staticClass:"animation-list",attrs:{tag:"div"}},e._l(e.threadList,function(t){return n("ThreadSummary",{key:t.threadId,ref:"thread"+t.threadId,refInFor:!0,class:{pinned:t.isPinned,unpinned:!t.isPinned},attrs:{thread:t,activeId:e.currentThread.threadId},on:{click:function(n){e.setActiveThreard(t)}}})})),e._v(" "),e.hasMore?n("ScrollLoader",{ref:"loader",on:{"enter-view":e.loadMore}}):e._e()],1):e._e()},[],!1,null,null,null).exports),Vr=dt().components({ChatThreads:Hr,ChatActions:pt}).data(function(e){return{community:ServerData.community}}).computed(ht(["currentThread"])).done(),$r=(n(234),Object(mt.a)(Vr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{staticClass:"chat-aside"},[n("header",{staticClass:"community-title chat-community-bg"},[n("a",{attrs:{target:"_parent",href:"/c/"+e.community.endpoint+"/home"}},[n("img",{staticClass:"logo",attrs:{src:e.community.logo}}),e._v("\n            "+e._s(e.community.name)+"\n        ")])]),e._v(" "),n("ChatThreads"),e._v(" "),e.currentThread?e._e():n("ChatActions")],1)},[],!1,null,null,null).exports),Br=n(26),zr={props:{addtionalClass:{default:[]},show:Boolean}},Gr=(n(232),Object(mt.a)(zr,function(){var e=this.$createElement,t=this._self._c||e;return t("transition",[this.show?t("div",{staticClass:"global-overlay",class:this.addtionalClass},[t("div",{staticClass:"overlay-content"},[this._t("default")],2)]):this._e()])},[],!1,null,null,null).exports),Wr={components:{Overlay:Gr},data:function(){return{resolve:function(){},reject:function(){},type:"",message:"",placeholder:"",title:"",action:"",cancel:"",show:!1,theme:""}},methods:{confirm:function(e){var t=this,n=e.message,r=e.action,i=void 0===r?"Ok":r,s=e.cancel,a=void 0===s?"cancel":s;return this.show=!0,this.message=n,this.type="confirm",this.action=i,this.cancel=a,new Promise(function(e,n){t.resolve=function(){t.show=!1,e()},t.reject=function(){t.show=!1,n()}})}}},Yr=(n(230),Object(mt.a)(Wr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Overlay",{attrs:{show:e.show,"addtional-class":["global-modal-box-overlay"]}},[n("div",{staticClass:"content modal-box-popup",class:[e.type,e.theme]},[e.title?n("h4",{staticClass:"popup-title"},[e._v(e._s(e.title))]):e._e(),e._v(" "),n("div",{staticClass:"message"},[e._v("\n            "+e._s(e.message)+"\n        ")]),e._v(" "),"prompty"===e.type?n("div",{staticClass:"input-box"},[n("input",{staticClass:"input",attrs:{type:"text",placeholder:e.placeholder}})]):e._e(),e._v(" "),n("div",{staticClass:"actions"},[n("button",{staticClass:"button btn-commit",on:{click:e.resolve}},[e._v("\n                "+e._s(e.action)+"\n            ")]),e._v(" "),"confirm"===e.type||"prompt"===e.type?n("button",{staticClass:"button btn-cancel",on:{click:e.reject}},[e._v("\n                "+e._s(e.cancel)+"\n            ")]):e._e()])])])},[],!1,null,null,null).exports),qr=ServerData.community.ndcId,Jr=dt().components({Overlay:Gr}).data(function(e){return{state:"selectFlagType",flagType:"",detailText:"",resolve:function(){},reject:function(){},request:function(){},show:!1}}).computed({flagTypeName:function(){return this.constants.FLAG_TYPE_NAME_FULL[this.flagType]}}).methods({startFlag:function(){if(this.show)throw new Error("cannot reenter flag review!");this.show=!0,this.flagType="",this.detailText="",this.state="selectFlagType"},makePromise:function(){var e=this;return new Promise(function(t,n){e.resolve=function(){e.show=!1,t()},e.reject=function(){e.show=!1,n()}})},submitSuccess:function(){this.$toast.success(_("Submitted")),this.resolve()},warnError:function(e){this.$toast.warn(e&&e.message)}}).methods({flagMessage:function(e){var t=this;return this.startFlag(),this.request=function(){return(n=qr,r={flagType:+t.flagType,message:t.detailText,messageId:e.messageId,threadId:e.threadId},i=r.messageId,s=r.threadId,a=r.flagType,o=r.message,Object(oe.h)("/api/add-flag",{ndcId:n,flagType:a,message:o,objectId:i,objectType:l.b.CHAT_MESSAGE,parentId:s,parentType:l.b.CHAT_THREAD})).then(t.submitSuccess).catch(t.warnError);var n,r,i,s,a,o},this.makePromise()},enterDetail:function(){""!==this.flagType&&(this.state="flagDetail")},flagThread:function(e){var t=this;return this.startFlag(),this.request=function(){return(n=qr,r={flagType:+t.flagType,message:t.detailText,threadId:e.threadId},i=r.threadId,s=r.flagType,a=r.message,Object(oe.h)("/api/add-flag",{ndcId:n,flagType:s,message:a,objectId:i,objectType:l.b.CHAT_THREAD})).then(t.submitSuccess).catch(t.warnError);var n,r,i,s,a},this.makePromise()}}).done(),Kr=(n(228),Object(mt.a)(Jr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Overlay",{attrs:{show:e.show,"addtional-class":["global-flag-overlay"]}},["selectFlagType"===e.state?n("div",{key:"select",staticClass:"flag-container"},[n("h2",{staticClass:"flag-title"},[e._v(e._s(e._("What's wrong?")))]),e._v(" "),n("section",{staticClass:"select-types"},e._l(e.constants.FLAG_TYPE_NAME_MAP,function(t,r){return n("label",{key:r,staticClass:"select-type"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.flagType,expression:"flagType"}],staticClass:"hidden",attrs:{type:"radio",name:"flagType"},domProps:{value:r,checked:e._q(e.flagType,r)},on:{change:function(t){e.flagType=r}}}),e._v(" "),n("span",{staticClass:"pseudo-check"},[e._v(e._s(t))])])})),e._v(" "),n("div",{staticClass:"flag-buttons"},[n("button",{staticClass:"button button-cancel",on:{click:e.reject}},[e._v(e._s(e._("Cancel")))]),e._v(" "),n("button",{staticClass:"button button-submit",attrs:{disabled:""===e.flagType},on:{click:e.enterDetail}},[e._v(e._s(e._("Next")))])])]):"flagDetail"===e.state?n("div",{key:"detail",staticClass:"flag-container"},[n("h2",{staticClass:"flag-title"},[e._v(e._s(e.flagTypeName))]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.detailText,expression:"detailText"}],staticClass:"flag-detail",attrs:{rows:"9",placeholder:e._("Let us know the reason (Optional)")},domProps:{value:e.detailText},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.request(t)):null},input:function(t){t.target.composing||(e.detailText=t.target.value)}}}),e._v(" "),n("div",{staticClass:"flag-buttons"},[n("button",{staticClass:"button button-cancel",on:{click:e.reject}},[e._v(e._s(e._("Cancel")))]),e._v(" "),n("button",{staticClass:"button button-submit",on:{click:e.request}},[e._v(e._s(e._("Submit")))])])]):e._e()])},[],!1,null,null,null).exports),Xr={computed:{waitDragging:function(){return this.sendable&&this.$store.state.waitDragging},sendable:function(){return this.$store.getters.isCurrentThreadSendable}},data:function(){return{canDrop:!1}},methods:{enableDrop:function(e){clearTimeout(this.leaveTimer),this.sendable&&(Fe("dragEnterWindow"),this.canDrop=!0)},disableDrop:function(e){var t=this;this.leaveTimer=setTimeout(function(){t.canDrop=!1},10)},onDrop:function(e){e.preventDefault(),Fe("dropInWindow"),this.sendable&&this.waitDragging&&(this.disableDrop(),e.dataTransfer&&e.dataTransfer.getData)}},mounted:function(){document.body.addEventListener("dragover",this.enableDrop),document.body.addEventListener("drop",this.onDrop),document.body.addEventListener("dragleave",this.disableDrop)},beforeDestroy:function(){document.body.removeEventListener("dragover",this.enableDrop),document.body.removeEventListener("drop",this.onDrop),document.body.removeEventListener("dragleave",this.disableDrop)}},Qr=(n(226),Object(mt.a)(Xr,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.waitDragging?n("div",{staticClass:"drop-overlay",class:{"can-drop":e.canDrop},on:{drop:e.onDrop}},[n("div",{staticClass:"drop-content"},[n("h3",{staticClass:"drop-title"},[e._v("\n            "+e._s(e.canDrop?e._("Sweet. Now Let go!"):e._("Drop image here to send."))+"\n        ")]),e._v(" "),n("p",{staticClass:"drop-text"},[e._v("\n        "+e._s(e._("You can add comments before uploading."))+"\n        ")])])]):e._e()},[],!1,null,null,null).exports),Zr=dt().components({ChatAside:$r,MinimizedPreview:Sr,MainChat:Er,EmptyRecommendation:Pr,Toast:Br.a,ModalBox:Yr,FlagReview:Kr,DropOveraly:Qr}).computed(ht(["currentThread","isMinimizedView","hasMessagesWhenMinimized"])).computed({className:function(){return{empty:!this.currentThread,minimized:this.isMinimizedView,"has-message":this.hasMessagesWhenMinimized}}}).done(),ei=c.default.extend(Zr),ti=(n(224),Object(mt.a)(ei,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-container",class:e.className},[e.isMinimizedView?e._e():n("ChatAside",{class:e.className}),e._v(" "),n("keep-alive",[e.isMinimizedView?n("MinimizedPreview"):e.currentThread?n("MainChat"):n("EmptyRecommendation")],1),e._v(" "),n("Toast",{ref:"toast"}),e._v(" "),n("ModalBox",{ref:"modalBox"}),e._v(" "),n("FlagReview",{ref:"flagReview"}),e._v(" "),n("DropOveraly")],1)},[],!1,null,null,null).exports);n.d(t,"store",function(){return ri}),c.default.use(u.default),c.default.directive("scroll-self",C);var ni=Object(I.c)(r);c.default.mixin({data:function(){return{constants:ni}},methods:{_:_,$confirm:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.$root.$refs.modalBox;return n.confirm.apply(n,e)}},computed:{$toast:{get:function(){return this.$root.$refs.toast},lazy:!0},$flagReview:{get:function(){return this.$root.$refs.flagReview},lazy:!0}}});var ri=function(){var e,t=new u.default.Store({state:ae,mutations:te,actions:ze,getters:Ke}),n=(e=ServerData.community.ndcId,localStorage.getItem(je(e))||ServerData.currentThreadId);if(ot(t),n){var r=t.state.threadMap[n]||t.state.threadList[0];r&&t.dispatch("setThread",r).then(function(){!function(e){xe(e,5e3),De(e,5e3),e.subscribe(Ne)}(t)})}return tt(t),$()&&!O&&t.dispatch("toggleMinimize"),t}();window.addEventListener("message",function(e){if(e.origin===location.origin){var t=e.data;switch(t.type){case"switchToThread":ri.dispatch("addOneThread",t.payload);break;case"sendSingleChat":ri.dispatch("receiveSingleChat",t.payload);break;case"openChatWindow":Ae(ri,!1,t.payload);var n=document.querySelector(".chat-input-area textarea");n&&n.focus(),ri.state.isMinimizedView&&!$()&&setTimeout(function(){ri.commit("toggleMinimize")},250);break;case"startDragFile":case"endDragFile":ri.commit(t.type);break;case"logout":!function(){for(var e=[],t=0,n=localStorage.length;t<n;t++)e.push(localStorage.key(t));e.filter(function(e){return/^chat-last-thread-/.test(e)}).forEach(function(e){localStorage.removeItem(e)})}()}}},!1),document.addEventListener("visibilitychange",function(){document.hidden||Ae(ri)}),new ti({el:"#app",store:ri}).$nextTick(function(){Fe("chatWindowLoaded")})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(56);n.n(r).a},,function(e,t,n){"use strict";var r=n(57);n.n(r).a},,function(e,t,n){"use strict";var r=n(58);n.n(r).a},,function(e,t,n){"use strict";var r=n(59);n.n(r).a},,function(e,t,n){"use strict";var r=n(60);n.n(r).a},,function(e,t,n){"use strict";var r=n(61);n.n(r).a},,function(e,t,n){"use strict";var r=n(62);n.n(r).a},,function(e,t,n){"use strict";var r=n(63);n.n(r).a},,function(e,t,n){"use strict";var r=n(64);n.n(r).a},,function(e,t,n){"use strict";var r=n(65);n.n(r).a},,function(e,t,n){"use strict";var r=n(66);n.n(r).a},,function(e,t,n){"use strict";var r=n(67);n.n(r).a},,function(e,t,n){"use strict";var r=n(68);n.n(r).a},,function(e,t,n){"use strict";var r=n(69);n.n(r).a},,function(e,t,n){"use strict";var r=n(70);n.n(r).a},,function(e,t,n){"use strict";var r=n(71);n.n(r).a},,function(e,t,n){"use strict";var r=n(72);n.n(r).a},,function(e,t,n){"use strict";var r=n(73);n.n(r).a},,function(e,t,n){"use strict";var r=n(74);n.n(r).a},,function(e,t,n){"use strict";var r=n(75);n.n(r).a},,function(e,t,n){"use strict";var r=n(76);n.n(r).a},,function(e,t,n){"use strict";var r=n(77);n.n(r).a},,function(e,t,n){"use strict";var r=n(78);n.n(r).a},,function(e,t,n){"use strict";var r=n(79);n.n(r).a},,function(e,t,n){"use strict";var r=n(80);n.n(r).a},,function(e,t,n){"use strict";var r=n(81);n.n(r).a},,function(e,t,n){"use strict";var r=n(82);n.n(r).a},,function(e,t,n){"use strict";var r=n(83);n.n(r).a},,function(e,t,n){"use strict";var r=n(84);n.n(r).a},,function(e,t,n){"use strict";var r=n(85);n.n(r).a},,function(e,t,n){"use strict";var r=n(86);n.n(r).a},,function(e,t,n){"use strict";var r=n(87);n.n(r).a},,function(e,t,n){"use strict";var r=n(88);n.n(r).a},,function(e,t,n){"use strict";var r=n(89);n.n(r).a},,function(e,t,n){"use strict";var r=n(90);n.n(r).a},,function(e,t,n){"use strict";var r=n(91);n.n(r).a},,function(e,t,n){"use strict";var r=n(92);n.n(r).a},,function(e,t,n){"use strict";var r=n(93);n.n(r).a},,function(e,t,n){"use strict";var r=n(94);n.n(r).a},,function(e,t,n){"use strict";var r=n(95);n.n(r).a},,function(e,t,n){"use strict";var r=n(96);n.n(r).a},,function(e,t,n){"use strict";var r=n(97);n.n(r).a},,function(e,t,n){"use strict";var r=n(98);n.n(r).a},,function(e,t,n){"use strict";var r=n(99);n.n(r).a},,function(e,t,n){"use strict";var r=n(100);n.n(r).a},,,,function(e,t,n){"use strict";n.r(t);var r=n(18);Object(r.a)(function(){n(172)})}]);